{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/openapi-typescript-typesafe-react-query/","result":{"data":{"site":{"siteMetadata":{"title":"Seonghyeon kim","social":[{"name":"twitter","url":"https://twitter.com/seonghyeon___"},{"name":"github","url":"https://github.com/seonghyeonkimm"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"b39f954c-f595-50eb-ad3d-8f7de6884e92","excerpt":"ReactQuery를 openapi-typescript를 활용해서 typesafe하게 활용해본 경험을 작성했습니다.","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"OpenApi 스펙을 활용해서 type-safe하게 ReactQuery 사용하기\",\n  \"date\": \"2022-02-20T00:00:00.000Z\",\n  \"excerpt\": \"ReactQuery를 openapi-typescript를 활용해서 typesafe하게 활용해본 경험을 작성했습니다.\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\xA0\", \"graphql \\uBC31\\uC5D4\\uB4DC\\uC640 \\uD1B5\\uC2E0\\uD558\\uBA74\\uC11C \\uD504\\uB860\\uD2B8 \\uC791\\uC5C5\\uC744 \\uD560 \\uB54C\\uC5D0\\uB294 graphql-codegen \\uC0AC\\uC6A9\\uD574\\uC11C graphql schema\\uB97C \\uAE30\\uC900\\uC73C\\uB85C types\\uC744 generate\\uD574\\uC11C \\uC0AC\\uC6A9\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uB530\\uB85C parameters, body, \\uADF8\\uB9AC\\uACE0 response\\uC5D0 \\uB300\\uD574\\uC11C type\\uC744 \\uB530\\uB85C \\uC2E0\\uACBD\\uC4F8 \\uD544\\uC694 \\uC5C6\\uC5C8\\uACE0 type-safe\\uD558\\uAC8C \\uC791\\uC5C5\\uD560 \\uC218 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC774\\uBC88\\uC5D0 \\uC2DC\\uC791\\uD55C \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0\\uC11C\\uB294 graphql\\uAC00 \\uC544\\uB2CC rest api\\uB85C \\uAD6C\\uC131\\uB418\\uC5B4\\uC788\\uB294 \\uBC31\\uC5D4\\uB4DC\\uC640 \\uD1B5\\uC2E0\\uD574\\uC57C\\uD558\\uB294 \\uC0C1\\uD669\\uC774 \\uC0DD\\uACBC\\uACE0, \\uC9C1\\uC811 type\\uB4E4\\uC744 \\uD0C0\\uC774\\uD551\\uC744 \\uD574\\uC57C\\uD55C\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD558\\uB2C8 \\uADF8\\uB807\\uAC8C \\uD558\\uAE30\\uAC00 \\uC2EB\\uC5C8\\uC2B5\\uB2C8\\uB2E4. (\\uBB3C\\uB860, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype\"\n  }), \"Paste JSON as Code\"), \"\\uC744 \\uC0AC\\uC6A9\\uD558\\uBA74 \\uC870\\uAE08 \\uB354 \\uD3B8\\uD558\\uAC8C \\uD560 \\uC218 \\uC788\\uAE34 \\uD558\\uC9C0\\uB9CC \\uBAA8\\uB4E0 \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD574\\uC8FC\\uB294 \\uAC83\\uC740 \\uC544\\uB2C8\\uAE30 \\uB54C\\uBB38\\uC5D0)\"), mdx(\"p\", null, \"\\xA0\", \"\\uC608\\uC804\\uC5D0 \\uCD5C\\uD0DC\\uAC74\\uB2D8\\uC774 FEConf\\uC5D0\\uC11C \\uBC1C\\uD45C\\uD588\\uB358 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=J4JHLESAiFk\"\n  }), \"OpenAPI Specification\\uC73C\\uB85C \\uD0C0\\uC785-\\uC138\\uC774\\uD504\\uD558\\uAC8C API \\uAC1C\\uBC1C\\uD558\\uAE30: \\uD76C\\uB9DD\\uD3B8 VS \\uC808\\uB9DD\\uD3B8\"), \" \\uC601\\uC0C1\\uC744 \\uBCF4\\uBA74\\uC11C \\uBC31\\uC5D4\\uB4DC\\uC5D0\\uC11C OpenApi \\uC2A4\\uD399\\uC744 \\uC81C\\uACF5\\uD574\\uC900\\uB2E4\\uBA74 \\uC774 \\uC815\\uBCF4\\uB97C \\uC774\\uC6A9\\uD574\\uC11C typing\\uC744 \\uB9CC\\uB4E4\\uC5B4 \\uB0BC \\uC218 \\uC788\\uB2E4\\uB294 \\uC0AC\\uC2E4\\uC744 \\uBC30\\uC6E0\\uB358 \\uAC83\\uC774 \\uC0DD\\uAC01\\uC774 \\uB0AC\\uACE0 \\uC0C8\\uB85C\\uC6B4 \\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uC2DC\\uC791\\uD558\\uB294 \\uAE40\\uC5D0 OpenApi\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C type\\uC744 generate\\uD558\\uACE0 type-safe\\uD558\\uAC8C react-query hook\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC2F6\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uAC1C\\uC778\\uC801\\uC73C\\uB85C \\uC5B4\\uB5BB\\uAC8C OpenApi \\uC2A4\\uD399\\uACFC \\uBA87 \\uAC00\\uC9C0 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\\uC744 \\uD65C\\uC6A9\\uD574\\uC11C \\uC5B4\\uB5BB\\uAC8C react-query hook\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294\\uC9C0 \\uC815\\uB9AC\\uD574\\uBCF4\\uB824\\uACE0\\uD569\\uB2C8\\uB2E4. \\uBC14\\uB85C \\uADF8\\uB0E5 \\uCF54\\uB4DC\\uB9CC \\uBCF4\\uACE0 \\uC2F6\\uC73C\\uC2E0 \\uBD84\\uB4E4\\uC740 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/seonghyeonkimm/977b58387f9f4e11afeee8c7685c2e89#file-1-use-oai-query-example-ts\"\n  }), \"\\uC544\\uB798 \\uB9C1\\uD06C\"), \"\\uB97C \\uD074\\uB9AD\\uD558\\uC154\\uC11C \\uCF54\\uB4DC\\uB9CC \\uD655\\uC778\\uD558\\uC2E4 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\xA0\", \"\\uC800\\uB294 \\uB2E4\\uC74C \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\\uC744 \\uC774\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://react-query.tanstack.com/\"\n  }), \"react-query\"), \": server state\\uB97C \\uC694\\uCCAD\\uD558\\uACE0 \\uAD00\\uB9AC\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC0AC\\uC6A9\\uD569\\uB2C8\\uB2E4.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/drwpow/openapi-typescript\"\n  }), \"openapi-typescript\"), \": \\uAC04\\uB2E8\\uD55C \\uCEE4\\uB9E8\\uB4DC\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C OpenApi \\uC2A4\\uD399\\uC744 \\uAE30\\uC900\\uC73C\\uB85C typing\\uC744 \\uC0DD\\uC131\\uD574\\uC90D\\uB2C8\\uB2E4.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/millsp/ts-toolbelt\"\n  }), \"ts-toolbelt\"), \": openapi-typescript \\uC0DD\\uC131\\uD574\\uC8FC\\uB294 type\\uB4E4\\uC744 \\uD3B8\\uD558\\uAC8C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C typescript utils\\uB4E4\\uC744 \\uC81C\\uACF5\\uD574\\uC8FC\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC0AC\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\")), mdx(\"p\", null, \"\\xA0\", \"\\uC704\\uC758 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\\uC744 \\uC124\\uCE58\\uB97C \\uD558\\uACE0\\uB098\\uC11C \\uC6B0\\uC120 \\uCC98\\uC74C \\uD574\\uC57C\\uD558\\uB294 \\uC791\\uC5C5\\uC740 OpenApi \\uC2A4\\uD399\\uC744 input\\uC73C\\uB85C \\uC8FC\\uACE0 openapi-typescript \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C typing\\uC744 \\uC0DD\\uC131\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. \\uC6B0\\uC120 \\uC774 \\uB0B4\\uC6A9\\uC744 \\uC9C4\\uD589\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uBC31\\uC5D4\\uB4DC \\uC11C\\uBC84\\uC5D0\\uC11C OpenApi \\uC2A4\\uD399\\uC774 \\uC815\\uC758\\uB41C JSON\\uC744 \\uBC1B\\uC744 \\uC218 \\uC788\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4. \\uBAA8\\uB4E0 \\uBD84\\uB4E4\\uC774 \\uC774 \\uC815\\uBCF4\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uC9C0 \\uC54A\\uC73C\\uC2E4 \\uC218\\uB3C4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC124\\uBA85\\uC744 \\uC704\\uD574\\uC11C \\uC778\\uD130\\uB137\\uC5D0 \\uACF5\\uAC1C\\uB418\\uC5B4\\uC788\\uB294 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://api.openapi-generator.tech/api-docs\"\n  }), \"openapi-generator OpenApi Specs\"), \"\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C type\\uC744 \\uB9CC\\uB4E4\\uACE0 react-query\\uB85C \\uC694\\uCCAD\\uC744 \\uD574\\uBCF8\\uB2E4\\uACE0 \\uAC00\\uC815\\uD574\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\xA0\", \"\\uC6B0\\uC120 type\\uC744 \\uC0DD\\uC131\\uD574\\uBD05\\uC2DC\\uB2E4. \\uC544\\uB798 \\uCEE4\\uB9E8\\uB4DC\\uB97C \\uC2E4\\uD589\\uD558\\uBA74 \\uB530\\uB85C \\uCCA8\\uBD80\\uD55C \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/seonghyeonkimm/977b58387f9f4e11afeee8c7685c2e89#file-2-type-ts\"\n  }), \"types.ts\"), \" \\uD30C\\uC77C\\uC758 \\uB0B4\\uC6A9\\uAC19\\uC740 type\\uB4E4\\uC774 generate\\uB429\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"# output parameter\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74 \\uC5B4\\uB514\\uC5D0 type\\uC744 \\uC0DD\\uC131\\uD560\\uC9C0 \\uACB0\\uC815\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\\nnpx openapi-typescript https://api.openapi-generator.tech/api-docs --output ./src/types/index.ts\\n\")), mdx(\"p\", null, \"\\xA0\", \"\\uACB0\\uACFC\\uBB3C\\uC744 \\uBCF4\\uBA74 \\uBA87 \\uAC00\\uC9C0 interface\\uB4E4\\uC774 \\uC0DD\\uC131\\uB429\\uB2C8\\uB2E4. \\uC6B0\\uC120 \\uAC01\\uAC01\\uC758 interface\\uAC00 \\uC5B4\\uB5A4 \\uAC12\\uB4E4\\uC744 \\uC758\\uBBF8\\uD558\\uB294 \\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uC774\\uD574\\uAC00 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4. paths\\uC640 operations\\uB97C \\uC81C\\uC678\\uD558\\uACE0 \\uB2E4\\uB978 type\\uB4E4\\uB3C4 \\uC0DD\\uC131\\uC774 \\uB418\\uC9C0\\uB9CC \\uC800\\uB294 \\uC8FC\\uB85C paths\\uC640 operations\\uB9CC \\uCC38\\uACE0\\uD574\\uC11C \\uC0AC\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"* paths interface\\n  - \\uC694\\uCCAD api endpoint(ex. /api/gen/clients)\\uB97C \\uD0A4\\uB85C\\uD558\\uACE0 \\uC5B4\\uB5A4 method\\uB4E4\\uC744 \\uC9C0\\uC6D0\\uD558\\uACE0 \\uAC01 method\\uB294 \\uC5B4\\uB5A4 response\\uB97C return\\uD558\\uB294\\uC9C0\\uC5D0 \\uB300\\uD55C interface\\uC785\\uB2C8\\uB2E4.\\n* operations interface\\n  - paths\\uC5D0\\uC11C \\uAC01 method\\uB4E4\\uC758 parameters(path, query)\\uC640 response\\uC5D0 \\uB300\\uD55C type\\uB4E4\\uC744 \\uBAA8\\uC544\\uB450\\uACE0 \\uC788\\uB294 interface\\uC785\\uB2C8\\uB2E4.\\n\")), mdx(\"p\", null, \"\\xA0\", \"\\uB2E4\\uC74C\\uC73C\\uB85C react-query\\uC758 useQuery\\uC758 key\\uAC12\\uC744 \\uB9E4\\uBC88 \\uC9C1\\uC811 \\uC9C0\\uC815\\uD574\\uC8FC\\uAE30 \\uADC0\\uCC2E\\uAE30 \\uB54C\\uBB38\\uC5D0 queryKey\\uB85C paths\\uC758 key\\uB85C \\uC0AC\\uC6A9\\uD558\\uACE0, \\uADF8 \\uAC12\\uC744 \\uAE30\\uC900\\uC73C\\uB85C params, body, response type, error type \\uB4F1\\uC744 \\uCD94\\uB860\\uD558\\uB3C4\\uB85D \\uB9CC\\uB4E4\\uAE30 \\uC704\\uD574\\uC11C\\uB294 util\\uC131\\uC758 \\uD0C0\\uC785\\uB4E4\\uC744 \\uBA3C\\uC800 \\uC791\\uC5C5\\uD574\\uC57C \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC774 utils\\uC131 \\uD0C0\\uC785\\uB4E4\\uC740 openapi-typescript\\uAC00 \\uC0DD\\uC131\\uD574\\uC900 type\\uB4E4\\uC5D0\\uC11C \\uD544\\uC694\\uD55C key\\uB4E4\\uB9CC\\uC744 select\\uD558\\uAC70\\uB098 parameters \\uD639\\uC740 response\\uC758 type\\uB97C \\uCD94\\uB860\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uB2E4\\uC74C\\uACFC \\uAC19\\uC774 \\uC791\\uC5C5\\uD588\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ts\"\n  }), \"import { O } from 'ts-toolbelt';\\n\\nimport { paths } from './types';\\n\\n// \\uC0DD\\uC131\\uB41C paths interface\\uC758 \\uBAA8\\uB4E0 \\uD0A4\\uB4E4\\uC758 type\\nexport type OAIPathKeys = keyof paths;\\n// \\uC8FC\\uB85C \\uC0AC\\uC6A9\\uB418\\uB294 api method\\uB4E4\\uC5D0 \\uB300\\uD55C type\\nexport type OAIMethods = 'get' | 'put' | 'post' | 'delete' | 'patch';\\n// \\uD2B9\\uC815 method\\uAC00 \\uC874\\uC7AC\\uD558\\uB294 paths key\\uB4E4\\uB9CC \\uBF51\\uAE30 \\uC704\\uD55C type\\nexport type OAIMethodPathKeys<TMethod extends OAIMethods> = O.SelectKeys<\\n  paths,\\n  Record<TMethod, unknown>\\n>;\\n\\n// \\uD2B9\\uC815 paths, method\\uC5D0 \\uD574\\uB2F9\\uB418\\uB294 path parameters type (api params\\uC5D0 \\uB300\\uD55C type)\\nexport type OAIPathParameters<\\n  TPath extends OAIPathKeys,\\n  TMethod extends OAIMethods,\\n> = O.Path<paths, [TPath, TMethod, 'parameters', 'path']>;\\n// \\uD2B9\\uC815 paths, method\\uC5D0 \\uD574\\uB2F9\\uB418\\uB294 query parameters type (api querystring\\uC5D0 \\uB300\\uD55C type)\\nexport type OAIQueryParameters<\\n  TPath extends OAIPathKeys,\\n  TMethod extends OAIMethods,\\n> = O.Path<paths, [TPath, TMethod, 'parameters', 'query']>;\\n// react-query\\uC758 variables\\uB85C params, querystring\\uC744 \\uD1B5\\uD569\\uD574\\uC11C \\uBC1B\\uC544\\uC11C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD55C type\\nexport type OAIParameters<\\n  TPath extends OAIPathKeys,\\n  TMethod extends OAIMethods,\\n> = OAIPathParameters<TPath, TMethod> extends Record<string, unknown>\\n  ? OAIQueryParameters<TPath, TMethod> extends Record<string, unknown>\\n    ? O.Merge<\\n        OAIPathParameters<TPath, TMethod>,\\n        OAIQueryParameters<TPath, TMethod>\\n      >\\n    : OAIPathParameters<TPath, TMethod>\\n  : OAIQueryParameters<TPath, TMethod> extends Record<string, unknown>\\n  ? OAIQueryParameters<TPath, TMethod>\\n  : undefined;\\n\\n// \\uD2B9\\uC815 path, method\\uC758 statusCode 200\\uC5D0 \\uB300\\uD55C response type\\nexport type OAIResponse<\\n  TPath extends keyof paths,\\n  TMethod extends OAIMethods,\\n> = O.Path<\\n  paths,\\n  // \\uC544\\uB798\\uC758 path\\uB294 \\uC8FC\\uC5B4\\uC9C4 OpenApi Specs\\uC5D0 \\uB530\\uB77C\\uC11C \\uB2EC\\uB77C\\uC9C8 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\\n  [TPath, TMethod, 'responses', 200, 'schema']\\n>;\\n\")), mdx(\"p\", null, \"\\xA0\", \"\\uB2E4\\uC74C\\uC73C\\uB85C, \\uC704\\uC5D0 \\uC791\\uC131\\uD55C utils\\uC131 type\\uB4E4\\uC744 \\uD65C\\uC6A9\\uD574\\uC11C react-query\\uC758 useQuery\\uC758 type\\uC744 \\uD655\\uC7A5\\uD574\\uC8FC\\uB294 useOAIQuery\\uB77C\\uB294 hook\\uC744 \\uB9CC\\uB4E4\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ts\"\n  }), \"import type { UseQueryOptions } from 'react-query';\\nimport { useQuery } from 'react-query';\\n\\n// BASE_URL\\uC740 \\uC694\\uCCAD\\uD574\\uC57C\\uD558\\uB294 \\uC11C\\uBC84\\uC758 \\uC8FC\\uC18C\\uB85C \\uBCC0\\uACBD \\uD544\\uC694\\nconst BASE_URL = 'https://api.openapi-generator.tech';\\n\\n// useQuery\\uC5D0 \\uC804\\uB2EC\\uD55C queryKey, variables\\uB97C requestUrl\\uB85C \\uB9CC\\uB4E4\\uAE30 \\uC704\\uD55C utils\\nexport const getRequestUrl = (\\n  queryKey: string,\\n  variables?: Record<string, unknown>,\\n) => {\\n  let url = `${BASE_URL}${queryKey}`;\\n\\n  const paramKeys = (queryKey.match(/{[a-zA-z-]+}/g) ?? []).map((param) =>\\n    param.replace(/[{}]/g, ''),\\n  );\\n  paramKeys.forEach((param) => {\\n    url = url.replace(`{${param}}`, variables?.[param] as string);\\n  });\\n\\n  const qs = new URLSearchParams(\\n    Object.entries(variables ?? {}).reduce((current, [key, value]) => {\\n      if (paramKeys.includes(key)) {\\n        return current;\\n      }\\n\\n      return {\\n        ...current,\\n        [key]: value,\\n      };\\n    }, {}),\\n  ).toString();\\n\\n  if (qs) {\\n    url = `${url}?${qs}`;\\n  }\\n\\n  return url;\\n};\\n\\n// \\uC704\\uC5D0 \\uC0DD\\uC131\\uD55C types, utils\\uC744 \\uD65C\\uC6A9\\uD558\\uC5EC useQuery\\uB97C wrapping\\uD558\\uACE0 \\uC788\\uB294 useOAIQuery\\nexport function useOAIQuery<\\n  TQueryKey extends OAIMethodPathKeys<'get'>,\\n  TVariables extends OAIParameters<TQueryKey, 'get'>,\\n  TData extends OAIResponse<TQueryKey, 'get'>,\\n>({\\n  queryKey,\\n  queryOptions,\\n  variables,\\n}: {\\n  queryKey: TQueryKey;\\n  queryOptions?: Omit<\\n    UseQueryOptions<\\n      TData,\\n      unknown,\\n      TData,\\n      (Record<string, unknown> | TQueryKey | undefined)[]\\n    >,\\n    'queryKey' | 'queryFn'\\n  >;\\n} & (TVariables extends undefined\\n  ? {\\n      variables?: undefined;\\n    }\\n  : O.RequiredKeys<NonNullable<TVariables>> extends never\\n  ? {\\n      variables?: TVariables;\\n    }\\n  : {\\n      variables: TVariables;\\n    })) {\\n  return useQuery(\\n    [queryKey, variables],\\n    async ({ signal }) => {\\n      const response = await fetch(getRequestUrl(queryKey, variables), {\\n        signal,\\n      });\\n     \\n      if (!response.ok) {\\n        throw new Error('Response error');\\n      }\\n\\n      const json = (await response.json()) as TData;\\n      return json;\\n    },\\n    queryOptions,\\n  );\\n}\\n\")), mdx(\"p\", null, \"\\xA0\", \"\\uC704\\uC640 \\uAC19\\uC774 util types, util \\uD568\\uC218, useOAIQuery \\uB4F1\\uC744 \\uB9CC\\uB4E4\\uC5B4 \\uB450\\uACE0 \\uC2E4\\uC81C\\uB85C \\uC0AC\\uC6A9\\uD55C\\uB2E4\\uBA74 \\uB9E4\\uBC88 react-query\\uC758 key\\uB97C \\uC5B4\\uB5BB\\uAC8C \\uC9C0\\uC815\\uD574\\uC57C\\uD560 \\uC9C0 \\uACE0\\uBBFC\\uD558\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uB418\\uACE0, type\\uC744 \\uC815\\uD655\\uD558\\uAC8C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC644\\uC804\\uD55C \\uCF54\\uB4DC \\uC2A4\\uB2C8\\uD3AB\\uC744 \\uBCF4\\uACE0 \\uC2F6\\uC73C\\uC2E0 \\uBD84\\uC740 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/seonghyeonkimm/977b58387f9f4e11afeee8c7685c2e89#file-1-use-oai-query-example-ts\"\n  }), \"\\uC544\\uB798 \\uB9C1\\uD06C\"), \"\\uB97C \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694.\"), mdx(\"p\", null, \"\\xA0\", \"\\uC774 \\uAE00\\uC5D0\\uC11C \\uC608\\uC2DC\\uB85C \\uC801\\uC740 \\uCF54\\uB4DC\\uB4E4\\uC740 \\uC2E4\\uC81C\\uB85C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294 \\uCF54\\uB4DC\\uC640\\uB294 \\uC870\\uAE08 \\uCC28\\uC774\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC6B0\\uC120, \\uCD5C\\uB300\\uD55C \\uC81C\\uAC00 \\uC804\\uB2EC\\uD558\\uACE0\\uC790 \\uD558\\uB294 \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uC124\\uBA85\\uD558\\uAE30\\uC5D0 \\uBD80\\uC871\\uD568\\uC774 \\uC5C6\\uACE0 \\uC791\\uB3D9\\uD558\\uB294 \\uCF54\\uB4DC\\uB97C \\uBCF4\\uC5EC\\uB4DC\\uB9AC\\uAE30 \\uC704\\uD574\\uC11C \\uCD5C\\uB300\\uD55C \\uAC04\\uACB0\\uD558\\uAC8C \\uC815\\uB9AC\\uD558\\uC5EC\\uC11C \\uACF5\\uC720\\uD588\\uC2B5\\uB2C8\\uB2E4 (\\uC5EC\\uC804\\uD788 \\uC81C \\uC2E4\\uB825\\uC774 \\uBD80\\uC871\\uD558\\uC5EC \\uBCF5\\uC7A1\\uD558\\uAE34 \\uD569\\uB2C8\\uB2E4.). \\uC81C\\uAC00 \\uACF5\\uC720\\uD55C \\uCF54\\uB4DC \\uC2A4\\uB2C8\\uD3AB\\uB4E4\\uC774 \\uBC14\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \\uC218\\uC900\\uAE4C\\uC9C0\\uB294 \\uB9CE\\uC740 \\uBCF4\\uC644\\uC774 \\uD544\\uC694\\uD560 \\uC218 \\uC788\\uACA0\\uC9C0\\uB9CC rest api\\uC640 \\uD1B5\\uC2E0\\uD558\\uB294 \\uC791\\uC5C5\\uC744 \\uC9C4\\uD589\\uD558\\uC2E4 \\uB54C\\uC5D0 type safe\\uD558\\uAC8C server state\\uB97C \\uAD00\\uB9AC\\uD558\\uACE0 \\uC2F6\\uACE0 react-query\\uB098 swc\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C\\uC5D0 key\\uB97C \\uB9E4\\uBC88 \\uC9C1\\uC811 \\uC801\\uC5B4\\uC8FC\\uB294 \\uBD88\\uD3B8\\uD568\\uC744 \\uB290\\uB07C\\uACE0 \\uACC4\\uC2E0 \\uBD84\\uB4E4\\uC5D0\\uAC8C \\uD558\\uB098\\uC758 \\uC544\\uC774\\uB514\\uC5B4\\uB098 \\uB3C4\\uC6C0\\uC774 \\uC870\\uAE08\\uC774\\uB77C\\uB3C4 \\uB420 \\uC218 \\uC788\\uC73C\\uBA74 \\uC88B\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/openapi-typescript-typesafe-react-query/","title":"OpenApi 스펙을 활용해서 type-safe하게 ReactQuery 사용하기","tags":[],"keywords":[],"date":"February 20, 2022","image":null,"imageAlt":null,"socialImage":null},"previous":{"__typename":"MdxBlogPost","id":"1475babe-537b-5b7b-9f49-260d255b101e","excerpt":"React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다.","slug":"/react-18-preview/","title":"React 18 미리보기","date":"February 10, 2022"},"next":null},"pageContext":{"id":"b39f954c-f595-50eb-ad3d-8f7de6884e92","previousId":"1475babe-537b-5b7b-9f49-260d255b101e"}}}
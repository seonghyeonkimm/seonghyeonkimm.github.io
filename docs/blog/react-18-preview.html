<!DOCTYPE html><html lang="ko" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>React 18 미리보기</title><meta name="robots" content="follow, index"/><meta name="description" content="React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다."/><meta property="og:url" content="https://seonghyeonkimm.github.io//blog/react-18-preview"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Seonghyeon Kim"/><meta property="og:description" content="React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다."/><meta property="og:title" content="React 18 미리보기"/><meta property="og:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://x.com/seonghyeon___"/><meta name="twitter:title" content="React 18 미리보기"/><meta name="twitter:description" content="React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다."/><meta name="twitter:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><link rel="canonical" href="https://seonghyeonkimm.github.io//blog/react-18-preview"/><meta property="article:published_time" content="2022-02-10T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://seonghyeonkimm.github.io//blog/react-18-preview"
  },
  "headline": "React 18 미리보기",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/og-card.png"
    }
  ],
  "datePublished": "2022-02-10T00:00:00.000Z",
  "dateModified": "2022-02-10T00:00:00.000Z",
  "author": [
    {
      "@type": "Person"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Seonghyeon Kim",
    "logo": {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/logo.png"
    }
  },
  "description": "React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/d9b4bce4bf471c19.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d9b4bce4bf471c19.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9828c9f9ef09ad91.js" defer=""></script><script src="/_next/static/chunks/main-4ef043329e44a116.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4229d2277cb7e8ef.js" defer=""></script><script src="/_next/static/chunks/170-510ab59698f42a3e.js" defer=""></script><script src="/_next/static/chunks/913-04fcc5f6d3ec89ba.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-0051806e725ec9a7.js" defer=""></script><script src="/_next/static/N95Jos2RTM0DWue_gqMj-/_buildManifest.js" defer=""></script><script src="/_next/static/N95Jos2RTM0DWue_gqMj-/_ssgManifest.js" defer=""></script><script src="/_next/static/N95Jos2RTM0DWue_gqMj-/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><noscript><iframe title="gtm-iframe" height="0" width="0" style="display:none;visibility:hidden" src="https://www.googletagmanager.com/ns.html?id=GTM-KJNTQFR"></iframe></noscript><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Seonghyeon Kim" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg id="logo_svg__Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 500 500" style="width:40px" xml:space="preserve"><style>.logo_svg__st0{fill:#fddf7f}</style><path class="logo_svg__st0" d="M198.709 105.373c-17.072-14.62-38.245-23.682-60.489-26.019-13.531 18.706-20.964 41.345-21.033 64.58 18.434 3.538 36.401 10.112 53.087 19.749 5.726-21.38 15.5-41.1 28.435-58.31zM382.812 143.934c-.069-23.235-7.501-45.874-21.032-64.58-22.243 2.337-43.417 11.399-60.489 26.019 12.935 17.21 22.709 36.93 28.435 58.31 16.686-9.636 34.652-16.211 53.086-19.749z"></path><path d="M495 348.043c-17.119-17.913-44.733-31.678-77.75-38.222-.668.69-1.32 1.39-2.002 2.072-44.773 44.773-108.176 59.496-165.248 44.266-57.072 15.23-120.475.508-165.248-44.265-.682-.682-1.335-1.381-2.002-2.072C49.733 316.365 22.118 330.13 5 348.043c18.346 19.199 48.743 33.641 84.931 39.527l.003-.003c-18.748 19.667-23.392 42.912-13.942 64.358 36.183 5.848 75.468 2.785 108.382-9.195 9.478 22.282 33.522 41.018 65.627 52.269 32.103-11.251 56.146-29.987 65.625-52.269 32.914 11.98 72.199 15.042 108.382 9.195 9.45-21.445 4.806-44.689-13.939-64.355 36.187-5.886 66.585-20.328 84.931-39.527z" style="fill:#83e1e5"></path><path d="M459.514 146.645c-43.251-11.542-90.13-5.865-129.788 17.038-11.847-44.238-40.982-81.4-79.726-103.822-38.744 22.421-67.878 59.584-79.726 103.822-39.659-22.904-86.537-28.58-129.788-17.038-15.23 57.072-.507 120.476 44.266 165.249C129.525 356.667 192.928 371.39 250 356.159c57.073 15.23 120.475.508 165.248-44.265 44.773-44.774 59.496-108.177 44.266-165.249z" style="fill:#ecf4f7"></path><path d="M234.025 15.975a5 5 0 0 1 5-5H245V5a5 5 0 1 1 10 0v5.975h5.975a5 5 0 1 1 0 10H255v5.975a5 5 0 1 1-10 0v-5.975h-5.975a5 5 0 0 1-5-5zM410.067 101h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm-342.084 0h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm430.632 243.589c-12.936-13.536-31.514-24.768-53.727-32.479a5 5 0 1 0-3.279 9.447c18.763 6.514 34.649 15.62 46.278 26.486-17.569 16.395-44.874 28.68-76.082 34.16a101.977 101.977 0 0 0-5.846-5.353l-.12-.101a110.401 110.401 0 0 0-2.707-2.215l-.37-.285a114.661 114.661 0 0 0-2.603-1.99c-.162-.12-.328-.239-.495-.357l-.291-.209a129.206 129.206 0 0 0-2.33-1.666c-.33-.228-.669-.453-1.007-.678l-.951-.638c-.435-.293-.868-.587-1.312-.874a132.33 132.33 0 0 0-3.43-2.149 5 5 0 1 0-5.179 8.554c1.08.654 2.137 1.317 3.175 1.99.389.251.765.506 1.142.761l1.025.688c.285.189.57.378.846.568.729.504 1.433 1.016 2.133 1.525l.727.522c.809.599 1.597 1.205 2.373 1.815l.34.262c.842.666 1.661 1.338 2.432 1.988l.142.119c2.479 2.1 4.818 4.3 6.952 6.538 16.455 17.264 21.374 37.193 14.01 56.395-33.207 4.92-68.602 2.104-98.38-7.753 3.429-10.789 3.701-22.676.694-34.022-2.705-10.212-8.027-19.674-15.39-27.363a5 5 0 0 0-7.222 6.916c6.196 6.47 10.673 14.426 12.946 23.008 2.914 10.999 2.174 22.566-2.083 32.572-8.596 20.203-30.787 37.971-61.024 48.919-11.477-4.153-21.839-9.284-30.822-15.263-11.502-7.656-20.311-16.372-26.18-25.905-7.568-12.292-9.81-26.277-6.311-39.377 2.301-8.616 6.985-16.999 13.548-24.243a5.001 5.001 0 0 0-7.411-6.714c-7.627 8.418-13.09 18.23-15.8 28.377-2.91 10.899-2.544 22.265.931 33.082-29.787 9.867-65.199 12.687-98.417 7.766-7.364-19.204-2.444-39.134 14.014-56.398a90.16 90.16 0 0 1 6.942-6.53c.023-.019.102-.083.124-.103.8-.675 1.617-1.346 2.458-2.011l.337-.26c.776-.61 1.564-1.216 2.374-1.815l.722-.518c.704-.513 1.408-1.024 2.135-1.527.277-.192.563-.381.848-.57l1.025-.688c.377-.255.753-.51 1.145-.763 1.035-.67 2.092-1.333 3.172-1.988a5 5 0 1 0-5.179-8.554 132.424 132.424 0 0 0-3.427 2.147c-.446.289-.88.582-1.314.875l-.951.638c-.338.225-.677.45-1.009.68-.793.549-1.562 1.106-2.332 1.667l-.287.206c-.167.118-.333.237-.494.356-.889.657-1.753 1.322-2.604 1.991l-.368.284a106.82 106.82 0 0 0-2.688 2.2l-.145.121a101.933 101.933 0 0 0-5.841 5.349c-31.21-5.48-58.514-17.764-76.083-34.16 11.688-10.923 27.661-20.065 46.529-26.587a5 5 0 0 0-3.267-9.451c-22.323 7.717-40.992 18.985-53.989 32.585a5 5 0 0 0 0 6.909c17.971 18.805 45.835 32.639 79.096 39.418-14.979 19.419-18.338 41.978-9.063 63.025a5 5 0 0 0 3.777 2.92c12.103 1.956 24.518 2.918 36.901 2.918 24.243 0 48.354-3.692 69.695-10.851a66.464 66.464 0 0 0 2.693 4.838c6.632 10.772 16.44 20.524 29.154 28.987 10.108 6.728 21.786 12.435 34.71 16.964a4.984 4.984 0 0 0 3.306 0c31.649-11.092 55.604-29.436 66.577-50.783 21.336 7.154 45.436 10.844 69.673 10.844 12.382 0 24.802-.963 36.901-2.918a4.997 4.997 0 0 0 3.777-2.92c9.276-21.05 5.915-43.612-9.069-63.033 32.908-6.767 61.408-20.896 79.102-39.41a5 5 0 0 0-.002-6.908zm-337.38-111.442a5 5 0 1 0 9.898-1.419 161.813 161.813 0 0 1-.504-3.841 5.001 5.001 0 0 0-9.93 1.186c.164 1.364.342 2.721.536 4.074zM35.276 235.13c-7.582-29.39-7.451-60.434.379-89.775a5.002 5.002 0 0 1 3.542-3.542c23.935-6.387 48.959-7.543 73.177-3.723 1.208-22.049 8.832-43.748 21.794-61.666a4.993 4.993 0 0 1 4.573-2.042c21.717 2.282 42.056 10.519 59.154 23.884 13.698-17.139 30.524-31.693 49.6-42.732a5.001 5.001 0 0 1 5.008 0c19.076 11.039 35.901 25.593 49.6 42.732 17.099-13.365 37.438-21.602 59.154-23.884a4.997 4.997 0 0 1 4.573 2.042c12.962 17.918 20.587 39.617 21.794 61.666 24.218-3.82 49.242-2.664 73.177 3.724a5.002 5.002 0 0 1 3.542 3.542c7.83 29.341 7.961 60.385.379 89.775-7.814 30.292-23.701 58.06-45.94 80.299s-50.006 38.125-80.298 45.939a176.8 176.8 0 0 1-44.155 5.592c-14.912 0-29.82-1.895-44.33-5.649a177.056 177.056 0 0 1-44.33 5.649 176.794 176.794 0 0 1-44.155-5.592c-30.292-7.814-58.059-23.7-80.298-45.939s-38.125-50.007-45.94-80.3zm300.226-68.955a176.425 176.425 0 0 1 5.046 41.835c0 31.451-8.401 62.318-24.295 89.264-13.342 22.619-31.648 42.021-53.363 56.695 53.774 10.277 109.868-6.657 148.823-45.611 41.08-41.08 57.683-101.227 43.695-157.607-40.309-9.99-83.636-4.407-119.906 15.424zm-27.378-59.925c2.875 4.047 5.6 8.207 8.129 12.495a174.86 174.86 0 0 1 16.542 37.543c14.175-7.498 29.323-12.967 44.927-16.34-.823-19.629-7.241-39.018-18.317-55.277-18.809 2.494-36.395 9.906-51.281 21.579zm-185.845 33.699c15.604 3.373 30.751 8.842 44.927 16.34a174.86 174.86 0 0 1 16.542-37.543 175.826 175.826 0 0 1 8.129-12.495c-14.887-11.673-32.472-19.086-51.281-21.579-11.076 16.259-17.494 35.648-18.317 55.277zM88.287 308.358c38.957 38.955 95.05 55.889 148.825 45.61-36.532-24.701-62.853-62.517-72.971-105.442a5 5 0 1 1 9.733-2.294c10.204 43.286 37.877 81.077 76.126 104.12 49.758-29.976 80.548-84.246 80.548-142.342 0-58.096-30.79-112.366-80.548-142.342-49.758 29.976-80.548 84.246-80.548 142.342a5 5 0 1 1-10 0c0-14.167 1.72-28.211 5.046-41.835-36.271-19.831-79.594-25.414-119.906-15.424-13.988 56.38 2.615 116.527 43.695 157.607z" style="fill:#1c1d21"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Seonghyeon Kim</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about/ko">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about/ko">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-02-10T00:00:00.000Z">2022년 2월 10일 목요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">React 18 미리보기</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100"></dd><dt class="sr-only">X</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="즉시-사용-가능한-개선점"><a href="#즉시-사용-가능한-개선점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>즉시 사용 가능한 개선점</h2><p>코드의 변경 없이 React 18로 업데이트하자마자 얻을 수 있는 개선점에 대해서 간단히 이해해보자.</p><h3 id="automatic-batching-for-fewer-renders"><a href="#automatic-batching-for-fewer-renders" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/21">Automatic batching for fewer renders</a></h3><p>  제목에서도 알 수 있는 것처럼 간단히 설명하자면, React 18 이전에는 오직 이벤트 핸들러 안에서 발생한 setState만 모아서 처리 했지만, React 18 이후부터는 promise, setTimeout 등에서 발생한 연속적인 setState도 모아서 처리될 수 있도록 개선되었다는 내용이다.</p><p>  위 기능을 피하고 싶다면 react-dom의 <code>flushSync</code> api를 이용하면 모아서 처리하지 않고 하나의 setState가 바로 re-render를 일으키도록 명시적으로 코드를 추가할 수 있다.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> flushSync <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-dom&#x27;</span> <span class="token comment">// Note: react-dom, not react</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">setCounter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// React has updated the DOM by now</span>
</span><span class="code-line">  <span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token operator">!</span>f<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// React has updated the DOM by now</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="ssr-support-for-suspense"><a href="#ssr-support-for-suspense" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/22">SSR support for Suspense</a></h3><p>  원래 React 18 이전에는 SSR에서는 Suspense가 지원되지 않았는데 React 18부터 SSR에서도 Suspense가 지원된다. 그래서 nextjs에서도 Suspense를 사용하려면 react, react-dom을 18 버전으로 업데이트를 해야 사용할 수 있다. React 18 이전의 SSR은 fetch data -&gt; render html -&gt; load code (client) -&gt; hydration(client) 과 같이 그 이전의 작업이 끝나야만 다음 작업을 진행할 수 있었기 때문에 과정 중에 느린 부분이 있다면 전체적으로 느려질 수 밖에 없었지만 이번 업데이트로 Suspense로 감싸진 부분마다 개별적으로 위 과정들을 따로 진행할 수 있고 완료되는 대로 HTML을 서버에서 추가적으로 HTML Streaming을 사용해서 전달받을 수 있고 hydration도 따로 진행할 수 있게 되었다.</p><h3 id="behavioral-changes-to-suspense-in-react-18"><a href="#behavioral-changes-to-suspense-in-react-18" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/7">Behavioral changes to Suspense in React 18</a></h3><p>  React 18 이전에는 Suspense fallback이 render되었더라도 suspended 상태를 초래한 컴포넌트를 제외한 다른 sibling은 DOM에 마운트되고 effect도 실행되지만 UI에서 보여주지 않는 식으로 작동했다면, React 18에서부터는 아예 render도 안되고 effect도 실행이 안되도록 변경되었다.</p><h2 id="concurrent-features"><a href="#concurrent-features" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Concurrent features</h2><p> 우선 React 18은 업데이트 되면서 바로 모든 기능들이 적용되는 것이 아니고 웹의 경우 react-dom 라이브러리에 새로 생긴 createRoot API를 사용해서 render하면서 적용되기 떄문에 app의 한정된 부분부터 적용하면서 migration을 할 수 있도록 설계가 되었다고 한다. 그렇기 때문에 React 18로 업데이트하더라도 실제로 createRoot API를 사용하지 않는다면 이전의 사용방식과 동일하게 사용될 수 있다. 기존의 legacy 코드가 많다면, 차근차근 일정부분부터 migration을 시도할 수 있다.</p><p>  React 18에서 제공되는 Concucrrent features로는 다음과 같은 것들이 있다. 이외에도 React Server Component와 Built-in Suspense Cache와 같은 기능들은 아직 추가가 되지 않았고 나중에 추가될 예정이지만 React 18 마이너 버전 업데이트 어디선가는 추가될 예정이라고 한다. 새로 생긴 API들이 어떤 기능들을 담고 있는지 간단하게 살펴보자.</p><ul><li>startTransition<ul><li>startTransition으로 감싼 state updater는 not urgent state update로 분류되고, 다른 urgent state update보다 뒤로 밀릴 수 있게 하여 user가 보는 화면이 더 매끄럽게 작동할 수 있도록 한다.</li><li>startTransition이 setTimeout가 다른 점은 setTimeout처럼 스케줄된 시간 이후에 실행되는 것이 아니라 그 즉시 실행이 된다는 점이다. 하지만 callback이 pending이 될 수 있다는 특징이 있습니다.</li><li><a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/react-18-starttransition-hiig0?file=/src/App.js">codesandbox 예시</a></li></ul></li><li>useDeferredValue<ul><li>말 그대로 지연된 값을 return하는 hook입니다. startTransition 대신에 useDeferredValue를 사용하면 startTransition안에 특정 state updater를 넣는 것과 비슷한 효과를 얻을 수 있습니다.</li><li><a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/react-18-usedeferredvalue-forked-d33ri?file=/src/App.js">codesandbox 예시</a></li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/111">useId</a><ul><li>이름 그대로 React에서 server에서 생성한 react tree와 client에서 그린 react tree 사이에 hydration이 원활하게 할 수 있도록, id가 일관적인 것이 필요했는데, useId를 이용하면 unique하고 hydration에서 문제가 없는 id를 생성해준다고 한다.</li><li><a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/react-18-useid-3ybbt?file=/src/App.js">codesandbox 예시</a></li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/110">useInsertionEffect</a><ul><li>React 컴포넌트가 그려지는 순서를 생각하면, 다음과 같다.</li><li>render -&gt; (synchronous) useLayoutEffect -&gt; commit(browser paint) -&gt; (asynchronous) useEffect</li><li>useInsertionEffect는 useLayoutEffect와 거의 비슷하지만 ref에 대한 접근을 할 수 없다.</li><li>기본적으로 React를 개발할 때에 css library를 개발하지 않는 이상 위 hook을 쓸 일은 없다고 한다.</li><li>css-in-js와 같이 특정 시점에 style 태그를 생성하고 document head에 추가하게되는데, browser가 추가된 style을 해석하고 react가 browser에 render 결과를 그리는 작업이 최대한 효율적으로 이루어질 수 있도록 컨트롤을 도와주는 hook이라고 한다.</li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://blog.saeloun.com/2021/12/30/react-18-usesyncexternalstore-api#understanding-usesyncexternalstore-hook">useSyncExternalStore</a><ul><li>react에서 말하는 internalSource는 props, state, context와 같은 것이다.</li><li>그러니까 external은 React 자체에서 제공하는 data source가 아닌 외부의 mutable한 store를 뜻한다.</li><li>즉, useSycnExternalStore는 외부의 store의 변경을 감지해서 internal state로 sync시켜주는 hook이다.</li><li>실제로 그냥 React 코드를 짤 때에는 크게 사용할 일이 없어보이지만, react state management library를 쓰는 사람들에게 필요한 hook인 것 같습니다.</li><li><a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/react-18-usesyncexternalstore-62zsu?file=/src/App.js">codesandbox 예시</a></li></ul></li></ul><hr/><ul><li>(추후에 추가예정) SuspenseList<ul><li>여러개의 Suspense children들이 있는 경우에 어떤 순서로 resolve할 것인지 등에 대한 option을 지정할 수 있는 API입니다.</li><li>아마도 React 18에 포함될 예정이었지만, 18 초기 release에는 포함이 안될 것으로 보이고 나중에 포함될 것으로 보입니다.</li></ul></li><li>(추후에 추가예정) <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/25">React Server Component</a><ul><li>React Server Component만으로도 꽤 많은 내용을 쓸 수 있겠지만, 간단하게만 설명하자면 서버에서 실행될 수 있는 Component입니다.</li><li>db query도 직접할 수 있고, 아무리 큰 라이브러리를 쓰더라도 client에서 해당 라이브러리를 download 받을 필요가 없습니다.</li><li>JSON으로 stringfy될 수 있는 정도의 정보만 props에 추가할 수 있어서 Event Handler같은 것은 추가할 수 없습니다.</li></ul></li><li>(추후에 추가예정) <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/25">Built-in Suspense Cache</a><ul><li>Suspense로 감싸면 data가 아직 resolve되지 않았을 때 fallback이 render되고 data가 resolve되면 실제 컴포넌트가 render된다.</li><li>그런데 props 혹은 state가 바뀌면서 다른 data fetching을 시작하고 다시 fallback으로 떨어졌다가 다시 render되고 다시 예전 컴포넌트를 render하려고 해도, Suspense가 기본적으로 cache를 하고 있어서 데이터를 다시 불러오지 않고 캐시되어 있던 데이터를 사용해서 render가 될 수 있도록 Suspense에 cache 기능을 넣으려고 하는 것 같습니다.</li><li>react-query의 기능과 비교를 해본다면 cacheTime이 있어서 cache가 있는 경우에는 우선 render하고 background에서 refetching하는 기능을 React만으로도 쉽게 짤 수 있는 느낌이 되려나 싶습니다.</li><li><a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/sad-banach-tcnim?file=/src/App.js">codesandbox</a></li></ul></li></ul><h2 id="new-strictmode-strictmode--stricteffect---링크"><a href="#new-strictmode-strictmode--stricteffect---링크" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>New StrictMode (StrictMode + StrictEffect) - <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/19">링크</a></h2><p> StrictMdoe는 React 16.3에서부터 추가되었습니다. 리액트가 개선됨에 따라 문제가 생길 수 있는 코드들을 미리 진단하는 역할을 하는 API입니다. StrictMode는 dev 환경에만 영향이 있고 production에서는 영향이 없습니다. 사용하는 방법으로는 react에서 제공하는 <code>&lt;React.StrickMode&gt;</code> 컴포넌트를 StrictMode를 적용하고자 하는 컴포넌트 상위에 위치시키면 됩니다. React 18 이전의 이 API는 의도적으로 컴포넌트를 두 번 render하도록 만들었는데, React 18 오면서 부터는 Strict Effect라는 것이 추가되면서 useEffect도 두 번 실행되도록 변경되었다고 합니다. 즉, StrictMode에서 React는 의도적으로 effect가 mount -&gt; unmount -&gt; mount하는 과정을 거치게 됩니다.</p><p> 리액트에 앞으로 추가될 기능들은 컴포넌트가 한 번 이상 mount되고 unmount되는 동안에도 문제 없이 작동해야만 정상적으로 작동할 것이기 때문에 위와 같은 Dev 환경에서만 작동하는 API를 사용하도록 추천하고 있습니다. 하지만 이로 인해 개발환경과 프로덕 환경의 동작이 다른 부분이 생길 수 있고 혼란이 생길 수도 있다고 생각했습니다. 실제로 스스로 혼란을 겪고 디버깅하는 데에 어려움을 겪었던 적이 있었습니다. 대부분은 문제가 없을 것이라고 하지만 개발자 입장에서 헷갈릴 수 있기 때문에 정확히 이해하고 넘어가는게 좋겠다고 생각했습니다.</p><p> 한 번 이상의 mount, unmount에 대응이 되어야 하는 이유는 React 팀에서 이전에 추가한 Fast Refresh와 아직은 개발 중이지만 추가될 예정인 Offscreen API 때문이라고 설명하고 있는데 Offscreen API는 unmount되었을 때 뿐만 아니라 화면에서 사라졌을 경우에도(tab의 이동 혹은 virtualized list) state를 유지하지만 컴포넌트를 숨기기만 하면서 다시 컴포넌트가 나타났을 때에 이전과 동일한 기능을 유지하기 위해서 unmount -&gt; mount 과정을 똑같이 거친다고 여기고 있고 그렇기 때문에 useEffect가 몇 번이고 실행되어도 코드에 문제가 없어야 된다고 말하고 있습니다.</p><p> React StrictMode가 설정되어 있는 상태에서 컴포넌트 render하게 되면 다음과 같은 과정이 실행됩니다.</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">- React renders the component.
</span><span class="code-line">- React mounts the component
</span><span class="code-line">  - Layout effect setup code runs.
</span><span class="code-line">  - Effect setup code runs.
</span><span class="code-line">- React simulates the component being hidden or unmounted.
</span><span class="code-line">  - Layout effect cleanup code runs
</span><span class="code-line">  - Effect cleanup code runs
</span><span class="code-line">- React simulates the component being shown again or remounted.
</span><span class="code-line">  - Layout effect setup code runs
</span><span class="code-line">  - Effect setup code runs
</span></code></pre></div><p> useEffect에 이미 deps list에 특정 값이 있는 경우에는 이미 한 번 이상 해당 useEffect가 실행될 수 있음을 전제하기 때문에 문제가 없을 것이고 Strict Mode가 설정되어 있을 때에 문제가 생길 수 있는 두 가지의 경우 일 것이라고 <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/18">react-18 discussion</a>에서 소개하고 있다. unmount할 때 실행되는 cleanup function이 있을 경우와 mount되었을 때에 한번만 실행되어야 하는 경우입니다. 이미 많은 React 개발자들이 이를 최대한 맞추고 있겠지만, cleanup function이 있는 useEffect는 다시 mount될 때에 이전의 상태유지할 수 있는 처리가 필요하다는 이야기입니다. unmount에서 removeEventListener를 했다면, mount할 때에는 무조건 다시 addEventListener를 하는 것처럼. 그리고 한 번만 실행되어야 하는 effect의 경우 dev와 production의 경우 동일하게 맞추고 싶다면 useRef에 boolean값을 저장해두고 해당 값을 참조해서 effect를 작성하는 식으로 보완이 필요할 수 있겠습니다. 예를 들면, 아래 코드처럼.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useEffectOnce</span><span class="token punctuation">(</span>effect<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">EffectCallback</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> isRun <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRun<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      isRun<span class="token punctuation">.</span><span class="token property-access">current</span> <span class="token operator">=</span> <span class="token boolean">true</span>
</span><span class="code-line">      <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fseonghyeonkimm.github.io%2F%2Fblog%2Freact-18-preview">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm/seonghyeonkimm.github.io/blob/master/data/blog/react-18-preview">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/react">react</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/nextjs-develop-and-operation-2">nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/openapi-typescript-typesafe-react-query">openapi 스펙을 활용해서 type-safe하게 react-query 사용하기</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:impressor7@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/seonghyeon-kim-328757b7/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://x.com/seonghyeon___"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Seonghyeon Kim</div><div> • </div><div>© 2025</div></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"React 18 미리보기","date":"2022-02-10T00:00:00.000Z","tags":["react"],"draft":false,"summary":"React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다.","body":{"raw":"\n## 즉시 사용 가능한 개선점\n\n코드의 변경 없이 React 18로 업데이트하자마자 얻을 수 있는 개선점에 대해서 간단히 이해해보자.\n\n### [Automatic batching for fewer renders](https://github.com/reactwg/react-18/discussions/21)\n\n\u0026nbsp; 제목에서도 알 수 있는 것처럼 간단히 설명하자면, React 18 이전에는 오직 이벤트 핸들러 안에서 발생한 setState만 모아서 처리 했지만, React 18 이후부터는 promise, setTimeout 등에서 발생한 연속적인 setState도 모아서 처리될 수 있도록 개선되었다는 내용이다.\n\n\u0026nbsp; 위 기능을 피하고 싶다면 react-dom의 `flushSync` api를 이용하면 모아서 처리하지 않고 하나의 setState가 바로 re-render를 일으키도록 명시적으로 코드를 추가할 수 있다.\n\n```tsx\nimport { flushSync } from 'react-dom' // Note: react-dom, not react\n\nfunction handleClick() {\n  flushSync(() =\u003e {\n    setCounter((c) =\u003e c + 1)\n  })\n  // React has updated the DOM by now\n  flushSync(() =\u003e {\n    setFlag((f) =\u003e !f)\n  })\n  // React has updated the DOM by now\n}\n```\n\n### [SSR support for Suspense](https://github.com/reactwg/react-18/discussions/22)\n\n\u0026nbsp; 원래 React 18 이전에는 SSR에서는 Suspense가 지원되지 않았는데 React 18부터 SSR에서도 Suspense가 지원된다. 그래서 nextjs에서도 Suspense를 사용하려면 react, react-dom을 18 버전으로 업데이트를 해야 사용할 수 있다. React 18 이전의 SSR은 fetch data -\u003e render html -\u003e load code (client) -\u003e hydration(client) 과 같이 그 이전의 작업이 끝나야만 다음 작업을 진행할 수 있었기 때문에 과정 중에 느린 부분이 있다면 전체적으로 느려질 수 밖에 없었지만 이번 업데이트로 Suspense로 감싸진 부분마다 개별적으로 위 과정들을 따로 진행할 수 있고 완료되는 대로 HTML을 서버에서 추가적으로 HTML Streaming을 사용해서 전달받을 수 있고 hydration도 따로 진행할 수 있게 되었다.\n\n### [Behavioral changes to Suspense in React 18](https://github.com/reactwg/react-18/discussions/7)\n\n\u0026nbsp; React 18 이전에는 Suspense fallback이 render되었더라도 suspended 상태를 초래한 컴포넌트를 제외한 다른 sibling은 DOM에 마운트되고 effect도 실행되지만 UI에서 보여주지 않는 식으로 작동했다면, React 18에서부터는 아예 render도 안되고 effect도 실행이 안되도록 변경되었다.\n\n## Concurrent features\n\n\u0026nbsp;우선 React 18은 업데이트 되면서 바로 모든 기능들이 적용되는 것이 아니고 웹의 경우 react-dom 라이브러리에 새로 생긴 createRoot API를 사용해서 render하면서 적용되기 떄문에 app의 한정된 부분부터 적용하면서 migration을 할 수 있도록 설계가 되었다고 한다. 그렇기 때문에 React 18로 업데이트하더라도 실제로 createRoot API를 사용하지 않는다면 이전의 사용방식과 동일하게 사용될 수 있다. 기존의 legacy 코드가 많다면, 차근차근 일정부분부터 migration을 시도할 수 있다.\n\n\u0026nbsp; React 18에서 제공되는 Concucrrent features로는 다음과 같은 것들이 있다. 이외에도 React Server Component와 Built-in Suspense Cache와 같은 기능들은 아직 추가가 되지 않았고 나중에 추가될 예정이지만 React 18 마이너 버전 업데이트 어디선가는 추가될 예정이라고 한다. 새로 생긴 API들이 어떤 기능들을 담고 있는지 간단하게 살펴보자.\n\n- startTransition\n  - startTransition으로 감싼 state updater는 not urgent state update로 분류되고, 다른 urgent state update보다 뒤로 밀릴 수 있게 하여 user가 보는 화면이 더 매끄럽게 작동할 수 있도록 한다.\n  - startTransition이 setTimeout가 다른 점은 setTimeout처럼 스케줄된 시간 이후에 실행되는 것이 아니라 그 즉시 실행이 된다는 점이다. 하지만 callback이 pending이 될 수 있다는 특징이 있습니다.\n  - [codesandbox 예시](https://codesandbox.io/s/react-18-starttransition-hiig0?file=/src/App.js)\n- useDeferredValue\n  - 말 그대로 지연된 값을 return하는 hook입니다. startTransition 대신에 useDeferredValue를 사용하면 startTransition안에 특정 state updater를 넣는 것과 비슷한 효과를 얻을 수 있습니다.\n  - [codesandbox 예시](https://codesandbox.io/s/react-18-usedeferredvalue-forked-d33ri?file=/src/App.js)\n- [useId](https://github.com/reactwg/react-18/discussions/111)\n  - 이름 그대로 React에서 server에서 생성한 react tree와 client에서 그린 react tree 사이에 hydration이 원활하게 할 수 있도록, id가 일관적인 것이 필요했는데, useId를 이용하면 unique하고 hydration에서 문제가 없는 id를 생성해준다고 한다.\n  - [codesandbox 예시](https://codesandbox.io/s/react-18-useid-3ybbt?file=/src/App.js)\n- [useInsertionEffect](https://github.com/reactwg/react-18/discussions/110)\n  - React 컴포넌트가 그려지는 순서를 생각하면, 다음과 같다.\n  - render -\u003e (synchronous) useLayoutEffect -\u003e commit(browser paint) -\u003e (asynchronous) useEffect\n  - useInsertionEffect는 useLayoutEffect와 거의 비슷하지만 ref에 대한 접근을 할 수 없다.\n  - 기본적으로 React를 개발할 때에 css library를 개발하지 않는 이상 위 hook을 쓸 일은 없다고 한다.\n  - css-in-js와 같이 특정 시점에 style 태그를 생성하고 document head에 추가하게되는데, browser가 추가된 style을 해석하고 react가 browser에 render 결과를 그리는 작업이 최대한 효율적으로 이루어질 수 있도록 컨트롤을 도와주는 hook이라고 한다.\n- [useSyncExternalStore](https://blog.saeloun.com/2021/12/30/react-18-usesyncexternalstore-api#understanding-usesyncexternalstore-hook)\n  - react에서 말하는 internalSource는 props, state, context와 같은 것이다.\n  - 그러니까 external은 React 자체에서 제공하는 data source가 아닌 외부의 mutable한 store를 뜻한다.\n  - 즉, useSycnExternalStore는 외부의 store의 변경을 감지해서 internal state로 sync시켜주는 hook이다.\n  - 실제로 그냥 React 코드를 짤 때에는 크게 사용할 일이 없어보이지만, react state management library를 쓰는 사람들에게 필요한 hook인 것 같습니다.\n  - [codesandbox 예시](https://codesandbox.io/s/react-18-usesyncexternalstore-62zsu?file=/src/App.js)\n\n---\n\n- (추후에 추가예정) SuspenseList\n  - 여러개의 Suspense children들이 있는 경우에 어떤 순서로 resolve할 것인지 등에 대한 option을 지정할 수 있는 API입니다.\n  - 아마도 React 18에 포함될 예정이었지만, 18 초기 release에는 포함이 안될 것으로 보이고 나중에 포함될 것으로 보입니다.\n- (추후에 추가예정) [React Server Component](https://github.com/reactwg/react-18/discussions/25)\n  - React Server Component만으로도 꽤 많은 내용을 쓸 수 있겠지만, 간단하게만 설명하자면 서버에서 실행될 수 있는 Component입니다.\n  - db query도 직접할 수 있고, 아무리 큰 라이브러리를 쓰더라도 client에서 해당 라이브러리를 download 받을 필요가 없습니다.\n  - JSON으로 stringfy될 수 있는 정도의 정보만 props에 추가할 수 있어서 Event Handler같은 것은 추가할 수 없습니다.\n- (추후에 추가예정) [Built-in Suspense Cache](https://github.com/reactwg/react-18/discussions/25)\n  - Suspense로 감싸면 data가 아직 resolve되지 않았을 때 fallback이 render되고 data가 resolve되면 실제 컴포넌트가 render된다.\n  - 그런데 props 혹은 state가 바뀌면서 다른 data fetching을 시작하고 다시 fallback으로 떨어졌다가 다시 render되고 다시 예전 컴포넌트를 render하려고 해도, Suspense가 기본적으로 cache를 하고 있어서 데이터를 다시 불러오지 않고 캐시되어 있던 데이터를 사용해서 render가 될 수 있도록 Suspense에 cache 기능을 넣으려고 하는 것 같습니다.\n  - react-query의 기능과 비교를 해본다면 cacheTime이 있어서 cache가 있는 경우에는 우선 render하고 background에서 refetching하는 기능을 React만으로도 쉽게 짤 수 있는 느낌이 되려나 싶습니다.\n  - [codesandbox](https://codesandbox.io/s/sad-banach-tcnim?file=/src/App.js)\n\n## New StrictMode (StrictMode + StrictEffect) - [링크](https://github.com/reactwg/react-18/discussions/19)\n\n\u0026nbsp;StrictMdoe는 React 16.3에서부터 추가되었습니다. 리액트가 개선됨에 따라 문제가 생길 수 있는 코드들을 미리 진단하는 역할을 하는 API입니다. StrictMode는 dev 환경에만 영향이 있고 production에서는 영향이 없습니다. 사용하는 방법으로는 react에서 제공하는 `\u003cReact.StrickMode\u003e` 컴포넌트를 StrictMode를 적용하고자 하는 컴포넌트 상위에 위치시키면 됩니다. React 18 이전의 이 API는 의도적으로 컴포넌트를 두 번 render하도록 만들었는데, React 18 오면서 부터는 Strict Effect라는 것이 추가되면서 useEffect도 두 번 실행되도록 변경되었다고 합니다. 즉, StrictMode에서 React는 의도적으로 effect가 mount -\u003e unmount -\u003e mount하는 과정을 거치게 됩니다.\n\n\u0026nbsp;리액트에 앞으로 추가될 기능들은 컴포넌트가 한 번 이상 mount되고 unmount되는 동안에도 문제 없이 작동해야만 정상적으로 작동할 것이기 때문에 위와 같은 Dev 환경에서만 작동하는 API를 사용하도록 추천하고 있습니다. 하지만 이로 인해 개발환경과 프로덕 환경의 동작이 다른 부분이 생길 수 있고 혼란이 생길 수도 있다고 생각했습니다. 실제로 스스로 혼란을 겪고 디버깅하는 데에 어려움을 겪었던 적이 있었습니다. 대부분은 문제가 없을 것이라고 하지만 개발자 입장에서 헷갈릴 수 있기 때문에 정확히 이해하고 넘어가는게 좋겠다고 생각했습니다.\n\n\u0026nbsp;한 번 이상의 mount, unmount에 대응이 되어야 하는 이유는 React 팀에서 이전에 추가한 Fast Refresh와 아직은 개발 중이지만 추가될 예정인 Offscreen API 때문이라고 설명하고 있는데 Offscreen API는 unmount되었을 때 뿐만 아니라 화면에서 사라졌을 경우에도(tab의 이동 혹은 virtualized list) state를 유지하지만 컴포넌트를 숨기기만 하면서 다시 컴포넌트가 나타났을 때에 이전과 동일한 기능을 유지하기 위해서 unmount -\u003e mount 과정을 똑같이 거친다고 여기고 있고 그렇기 때문에 useEffect가 몇 번이고 실행되어도 코드에 문제가 없어야 된다고 말하고 있습니다.\n\n\u0026nbsp;React StrictMode가 설정되어 있는 상태에서 컴포넌트 render하게 되면 다음과 같은 과정이 실행됩니다.\n\n```\n- React renders the component.\n- React mounts the component\n  - Layout effect setup code runs.\n  - Effect setup code runs.\n- React simulates the component being hidden or unmounted.\n  - Layout effect cleanup code runs\n  - Effect cleanup code runs\n- React simulates the component being shown again or remounted.\n  - Layout effect setup code runs\n  - Effect setup code runs\n```\n\n\u0026nbsp;useEffect에 이미 deps list에 특정 값이 있는 경우에는 이미 한 번 이상 해당 useEffect가 실행될 수 있음을 전제하기 때문에 문제가 없을 것이고 Strict Mode가 설정되어 있을 때에 문제가 생길 수 있는 두 가지의 경우 일 것이라고 [react-18 discussion](https://github.com/reactwg/react-18/discussions/18)에서 소개하고 있다. unmount할 때 실행되는 cleanup function이 있을 경우와 mount되었을 때에 한번만 실행되어야 하는 경우입니다. 이미 많은 React 개발자들이 이를 최대한 맞추고 있겠지만, cleanup function이 있는 useEffect는 다시 mount될 때에 이전의 상태유지할 수 있는 처리가 필요하다는 이야기입니다. unmount에서 removeEventListener를 했다면, mount할 때에는 무조건 다시 addEventListener를 하는 것처럼. 그리고 한 번만 실행되어야 하는 effect의 경우 dev와 production의 경우 동일하게 맞추고 싶다면 useRef에 boolean값을 저장해두고 해당 값을 참조해서 effect를 작성하는 식으로 보완이 필요할 수 있겠습니다. 예를 들면, 아래 코드처럼.\n\n```tsx\nexport function useEffectOnce(effect: React.EffectCallback) {\n  const isRun = React.useRef(false)\n\n  React.useEffect(() =\u003e {\n    if (!isRun.current) {\n      isRun.current = true\n      effect()\n    }\n  }, [])\n}\n```\n","code":"var Component=(()=\u003e{var o=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var r=a=\u003et(a,\"__esModule\",{value:!0});var m=(a,c)=\u003e()=\u003e(c||a((c={exports:{}}).exports,c),c.exports),f=(a,c)=\u003e{r(a);for(var s in c)t(a,s,{get:c[s],enumerable:!0})},N=(a,c,s)=\u003e{if(c\u0026\u0026typeof c==\"object\"||typeof c==\"function\")for(let n of h(c))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026t(a,n,{get:()=\u003ec[n],enumerable:!(s=d(c,n))||s.enumerable});return a},k=a=\u003eN(r(t(a!=null?o(p(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=m((x,i)=\u003e{i.exports=_jsx_runtime});var y={};f(y,{default:()=\u003eR,frontmatter:()=\u003eg});var e=k(l()),g={title:\"React 18 \\uBBF8\\uB9AC\\uBCF4\\uAE30\",date:\"2022-02-10\",tags:[\"react\"],draft:!1,summary:\"React 18\\uC744 \\uC4F0\\uAE30 \\uC2DC\\uC791\\uD55C\\uC9C0\\uB294 \\uAF64 \\uB418\\uC5C8\\uC9C0\\uB9CC \\uC81C\\uB300\\uB85C \\uC774\\uD574\\uD558\\uC9C0 \\uBABB\\uD55C \\uBD80\\uBD84\\uB4E4\\uC774 \\uB9CE\\uC544\\uC11C \\uB2E4\\uC2DC \\uC870\\uAE08 \\uB354 \\uAF3C\\uAF3C\\uD788 \\uACF5\\uBD80\\uD558\\uACE0 \\uAE30\\uB85D\\uD588\\uC2B5\\uB2C8\\uB2E4.\"};function b(a={}){let{wrapper:c}=a.components||{};return c?(0,e.jsx)(c,Object.assign({},a,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",h3:\"h3\",code:\"code\",pre:\"pre\",ul:\"ul\",li:\"li\",hr:\"hr\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\uC989\\uC2DC-\\uC0AC\\uC6A9-\\uAC00\\uB2A5\\uD55C-\\uAC1C\\uC120\\uC810\",children:[(0,e.jsx)(n.a,{href:\"#\\uC989\\uC2DC-\\uC0AC\\uC6A9-\\uAC00\\uB2A5\\uD55C-\\uAC1C\\uC120\\uC810\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC989\\uC2DC \\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD55C \\uAC1C\\uC120\\uC810\"]}),(0,e.jsx)(n.p,{children:\"\\uCF54\\uB4DC\\uC758 \\uBCC0\\uACBD \\uC5C6\\uC774 React 18\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uC790\\uB9C8\\uC790 \\uC5BB\\uC744 \\uC218 \\uC788\\uB294 \\uAC1C\\uC120\\uC810\\uC5D0 \\uB300\\uD574\\uC11C \\uAC04\\uB2E8\\uD788 \\uC774\\uD574\\uD574\\uBCF4\\uC790.\"}),(0,e.jsxs)(n.h3,{id:\"automatic-batching-for-fewer-renders\",children:[(0,e.jsx)(n.a,{href:\"#automatic-batching-for-fewer-renders\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/21\",children:\"Automatic batching for fewer renders\"})]}),(0,e.jsx)(n.p,{children:\"\\xA0 \\uC81C\\uBAA9\\uC5D0\\uC11C\\uB3C4 \\uC54C \\uC218 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC \\uAC04\\uB2E8\\uD788 \\uC124\\uBA85\\uD558\\uC790\\uBA74, React 18 \\uC774\\uC804\\uC5D0\\uB294 \\uC624\\uC9C1 \\uC774\\uBCA4\\uD2B8 \\uD578\\uB4E4\\uB7EC \\uC548\\uC5D0\\uC11C \\uBC1C\\uC0DD\\uD55C setState\\uB9CC \\uBAA8\\uC544\\uC11C \\uCC98\\uB9AC \\uD588\\uC9C0\\uB9CC, React 18 \\uC774\\uD6C4\\uBD80\\uD130\\uB294 promise, setTimeout \\uB4F1\\uC5D0\\uC11C \\uBC1C\\uC0DD\\uD55C \\uC5F0\\uC18D\\uC801\\uC778 setState\\uB3C4 \\uBAA8\\uC544\\uC11C \\uCC98\\uB9AC\\uB420 \\uC218 \\uC788\\uB3C4\\uB85D \\uAC1C\\uC120\\uB418\\uC5C8\\uB2E4\\uB294 \\uB0B4\\uC6A9\\uC774\\uB2E4.\"}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \\uC704 \\uAE30\\uB2A5\\uC744 \\uD53C\\uD558\\uACE0 \\uC2F6\\uB2E4\\uBA74 react-dom\\uC758 \",(0,e.jsx)(n.code,{children:\"flushSync\"}),\" api\\uB97C \\uC774\\uC6A9\\uD558\\uBA74 \\uBAA8\\uC544\\uC11C \\uCC98\\uB9AC\\uD558\\uC9C0 \\uC54A\\uACE0 \\uD558\\uB098\\uC758 setState\\uAC00 \\uBC14\\uB85C re-render\\uB97C \\uC77C\\uC73C\\uD0A4\\uB3C4\\uB85D \\uBA85\\uC2DC\\uC801\\uC73C\\uB85C \\uCF54\\uB4DC\\uB97C \\uCD94\\uAC00\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" flushSync \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react-dom'\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Note: react-dom, not react\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handleClick\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"flushSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCounter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"c\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" c \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// React has updated the DOM by now\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"flushSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setFlag\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"f\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"f\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// React has updated the DOM by now\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"ssr-support-for-suspense\",children:[(0,e.jsx)(n.a,{href:\"#ssr-support-for-suspense\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/22\",children:\"SSR support for Suspense\"})]}),(0,e.jsx)(n.p,{children:\"\\xA0 \\uC6D0\\uB798 React 18 \\uC774\\uC804\\uC5D0\\uB294 SSR\\uC5D0\\uC11C\\uB294 Suspense\\uAC00 \\uC9C0\\uC6D0\\uB418\\uC9C0 \\uC54A\\uC558\\uB294\\uB370 React 18\\uBD80\\uD130 SSR\\uC5D0\\uC11C\\uB3C4 Suspense\\uAC00 \\uC9C0\\uC6D0\\uB41C\\uB2E4. \\uADF8\\uB798\\uC11C nextjs\\uC5D0\\uC11C\\uB3C4 Suspense\\uB97C \\uC0AC\\uC6A9\\uD558\\uB824\\uBA74 react, react-dom\\uC744 18 \\uBC84\\uC804\\uC73C\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uB97C \\uD574\\uC57C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4. React 18 \\uC774\\uC804\\uC758 SSR\\uC740 fetch data -\u003e render html -\u003e load code (client) -\u003e hydration(client) \\uACFC \\uAC19\\uC774 \\uADF8 \\uC774\\uC804\\uC758 \\uC791\\uC5C5\\uC774 \\uB05D\\uB098\\uC57C\\uB9CC \\uB2E4\\uC74C \\uC791\\uC5C5\\uC744 \\uC9C4\\uD589\\uD560 \\uC218 \\uC788\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uACFC\\uC815 \\uC911\\uC5D0 \\uB290\\uB9B0 \\uBD80\\uBD84\\uC774 \\uC788\\uB2E4\\uBA74 \\uC804\\uCCB4\\uC801\\uC73C\\uB85C \\uB290\\uB824\\uC9C8 \\uC218 \\uBC16\\uC5D0 \\uC5C6\\uC5C8\\uC9C0\\uB9CC \\uC774\\uBC88 \\uC5C5\\uB370\\uC774\\uD2B8\\uB85C Suspense\\uB85C \\uAC10\\uC2F8\\uC9C4 \\uBD80\\uBD84\\uB9C8\\uB2E4 \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uC704 \\uACFC\\uC815\\uB4E4\\uC744 \\uB530\\uB85C \\uC9C4\\uD589\\uD560 \\uC218 \\uC788\\uACE0 \\uC644\\uB8CC\\uB418\\uB294 \\uB300\\uB85C HTML\\uC744 \\uC11C\\uBC84\\uC5D0\\uC11C \\uCD94\\uAC00\\uC801\\uC73C\\uB85C HTML Streaming\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C \\uC804\\uB2EC\\uBC1B\\uC744 \\uC218 \\uC788\\uACE0 hydration\\uB3C4 \\uB530\\uB85C \\uC9C4\\uD589\\uD560 \\uC218 \\uC788\\uAC8C \\uB418\\uC5C8\\uB2E4.\"}),(0,e.jsxs)(n.h3,{id:\"behavioral-changes-to-suspense-in-react-18\",children:[(0,e.jsx)(n.a,{href:\"#behavioral-changes-to-suspense-in-react-18\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/7\",children:\"Behavioral changes to Suspense in React 18\"})]}),(0,e.jsx)(n.p,{children:\"\\xA0 React 18 \\uC774\\uC804\\uC5D0\\uB294 Suspense fallback\\uC774 render\\uB418\\uC5C8\\uB354\\uB77C\\uB3C4 suspended \\uC0C1\\uD0DC\\uB97C \\uCD08\\uB798\\uD55C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC81C\\uC678\\uD55C \\uB2E4\\uB978 sibling\\uC740 DOM\\uC5D0 \\uB9C8\\uC6B4\\uD2B8\\uB418\\uACE0 effect\\uB3C4 \\uC2E4\\uD589\\uB418\\uC9C0\\uB9CC UI\\uC5D0\\uC11C \\uBCF4\\uC5EC\\uC8FC\\uC9C0 \\uC54A\\uB294 \\uC2DD\\uC73C\\uB85C \\uC791\\uB3D9\\uD588\\uB2E4\\uBA74, React 18\\uC5D0\\uC11C\\uBD80\\uD130\\uB294 \\uC544\\uC608 render\\uB3C4 \\uC548\\uB418\\uACE0 effect\\uB3C4 \\uC2E4\\uD589\\uC774 \\uC548\\uB418\\uB3C4\\uB85D \\uBCC0\\uACBD\\uB418\\uC5C8\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"concurrent-features\",children:[(0,e.jsx)(n.a,{href:\"#concurrent-features\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Concurrent features\"]}),(0,e.jsx)(n.p,{children:\"\\xA0\\uC6B0\\uC120 React 18\\uC740 \\uC5C5\\uB370\\uC774\\uD2B8 \\uB418\\uBA74\\uC11C \\uBC14\\uB85C \\uBAA8\\uB4E0 \\uAE30\\uB2A5\\uB4E4\\uC774 \\uC801\\uC6A9\\uB418\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uACE0 \\uC6F9\\uC758 \\uACBD\\uC6B0 react-dom \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uC5D0 \\uC0C8\\uB85C \\uC0DD\\uAE34 createRoot API\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C render\\uD558\\uBA74\\uC11C \\uC801\\uC6A9\\uB418\\uAE30 \\uB584\\uBB38\\uC5D0 app\\uC758 \\uD55C\\uC815\\uB41C \\uBD80\\uBD84\\uBD80\\uD130 \\uC801\\uC6A9\\uD558\\uBA74\\uC11C migration\\uC744 \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC124\\uACC4\\uAC00 \\uB418\\uC5C8\\uB2E4\\uACE0 \\uD55C\\uB2E4. \\uADF8\\uB807\\uAE30 \\uB54C\\uBB38\\uC5D0 React 18\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uB354\\uB77C\\uB3C4 \\uC2E4\\uC81C\\uB85C createRoot API\\uB97C \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4\\uBA74 \\uC774\\uC804\\uC758 \\uC0AC\\uC6A9\\uBC29\\uC2DD\\uACFC \\uB3D9\\uC77C\\uD558\\uAC8C \\uC0AC\\uC6A9\\uB420 \\uC218 \\uC788\\uB2E4. \\uAE30\\uC874\\uC758 legacy \\uCF54\\uB4DC\\uAC00 \\uB9CE\\uB2E4\\uBA74, \\uCC28\\uADFC\\uCC28\\uADFC \\uC77C\\uC815\\uBD80\\uBD84\\uBD80\\uD130 migration\\uC744 \\uC2DC\\uB3C4\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\xA0 React 18\\uC5D0\\uC11C \\uC81C\\uACF5\\uB418\\uB294 Concucrrent features\\uB85C\\uB294 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC740 \\uAC83\\uB4E4\\uC774 \\uC788\\uB2E4. \\uC774\\uC678\\uC5D0\\uB3C4 React Server Component\\uC640 Built-in Suspense Cache\\uC640 \\uAC19\\uC740 \\uAE30\\uB2A5\\uB4E4\\uC740 \\uC544\\uC9C1 \\uCD94\\uAC00\\uAC00 \\uB418\\uC9C0 \\uC54A\\uC558\\uACE0 \\uB098\\uC911\\uC5D0 \\uCD94\\uAC00\\uB420 \\uC608\\uC815\\uC774\\uC9C0\\uB9CC React 18 \\uB9C8\\uC774\\uB108 \\uBC84\\uC804 \\uC5C5\\uB370\\uC774\\uD2B8 \\uC5B4\\uB514\\uC120\\uAC00\\uB294 \\uCD94\\uAC00\\uB420 \\uC608\\uC815\\uC774\\uB77C\\uACE0 \\uD55C\\uB2E4. \\uC0C8\\uB85C \\uC0DD\\uAE34 API\\uB4E4\\uC774 \\uC5B4\\uB5A4 \\uAE30\\uB2A5\\uB4E4\\uC744 \\uB2F4\\uACE0 \\uC788\\uB294\\uC9C0 \\uAC04\\uB2E8\\uD558\\uAC8C \\uC0B4\\uD3B4\\uBCF4\\uC790.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"startTransition\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"startTransition\\uC73C\\uB85C \\uAC10\\uC2FC state updater\\uB294 not urgent state update\\uB85C \\uBD84\\uB958\\uB418\\uACE0, \\uB2E4\\uB978 urgent state update\\uBCF4\\uB2E4 \\uB4A4\\uB85C \\uBC00\\uB9B4 \\uC218 \\uC788\\uAC8C \\uD558\\uC5EC user\\uAC00 \\uBCF4\\uB294 \\uD654\\uBA74\\uC774 \\uB354 \\uB9E4\\uB044\\uB7FD\\uAC8C \\uC791\\uB3D9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"startTransition\\uC774 setTimeout\\uAC00 \\uB2E4\\uB978 \\uC810\\uC740 setTimeout\\uCC98\\uB7FC \\uC2A4\\uCF00\\uC904\\uB41C \\uC2DC\\uAC04 \\uC774\\uD6C4\\uC5D0 \\uC2E4\\uD589\\uB418\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C \\uADF8 \\uC989\\uC2DC \\uC2E4\\uD589\\uC774 \\uB41C\\uB2E4\\uB294 \\uC810\\uC774\\uB2E4. \\uD558\\uC9C0\\uB9CC callback\\uC774 pending\\uC774 \\uB420 \\uC218 \\uC788\\uB2E4\\uB294 \\uD2B9\\uC9D5\\uC774 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/react-18-starttransition-hiig0?file=/src/App.js\",children:\"codesandbox \\uC608\\uC2DC\"})})]})]}),(0,e.jsxs)(n.li,{children:[\"useDeferredValue\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uB9D0 \\uADF8\\uB300\\uB85C \\uC9C0\\uC5F0\\uB41C \\uAC12\\uC744 return\\uD558\\uB294 hook\\uC785\\uB2C8\\uB2E4. startTransition \\uB300\\uC2E0\\uC5D0 useDeferredValue\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74 startTransition\\uC548\\uC5D0 \\uD2B9\\uC815 state updater\\uB97C \\uB123\\uB294 \\uAC83\\uACFC \\uBE44\\uC2B7\\uD55C \\uD6A8\\uACFC\\uB97C \\uC5BB\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/react-18-usedeferredvalue-forked-d33ri?file=/src/App.js\",children:\"codesandbox \\uC608\\uC2DC\"})})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/111\",children:\"useId\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uC774\\uB984 \\uADF8\\uB300\\uB85C React\\uC5D0\\uC11C server\\uC5D0\\uC11C \\uC0DD\\uC131\\uD55C react tree\\uC640 client\\uC5D0\\uC11C \\uADF8\\uB9B0 react tree \\uC0AC\\uC774\\uC5D0 hydration\\uC774 \\uC6D0\\uD65C\\uD558\\uAC8C \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D, id\\uAC00 \\uC77C\\uAD00\\uC801\\uC778 \\uAC83\\uC774 \\uD544\\uC694\\uD588\\uB294\\uB370, useId\\uB97C \\uC774\\uC6A9\\uD558\\uBA74 unique\\uD558\\uACE0 hydration\\uC5D0\\uC11C \\uBB38\\uC81C\\uAC00 \\uC5C6\\uB294 id\\uB97C \\uC0DD\\uC131\\uD574\\uC900\\uB2E4\\uACE0 \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/react-18-useid-3ybbt?file=/src/App.js\",children:\"codesandbox \\uC608\\uC2DC\"})})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/110\",children:\"useInsertionEffect\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"React \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uADF8\\uB824\\uC9C0\\uB294 \\uC21C\\uC11C\\uB97C \\uC0DD\\uAC01\\uD558\\uBA74, \\uB2E4\\uC74C\\uACFC \\uAC19\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"render -\u003e (synchronous) useLayoutEffect -\u003e commit(browser paint) -\u003e (asynchronous) useEffect\"}),(0,e.jsx)(n.li,{children:\"useInsertionEffect\\uB294 useLayoutEffect\\uC640 \\uAC70\\uC758 \\uBE44\\uC2B7\\uD558\\uC9C0\\uB9CC ref\\uC5D0 \\uB300\\uD55C \\uC811\\uADFC\\uC744 \\uD560 \\uC218 \\uC5C6\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C React\\uB97C \\uAC1C\\uBC1C\\uD560 \\uB54C\\uC5D0 css library\\uB97C \\uAC1C\\uBC1C\\uD558\\uC9C0 \\uC54A\\uB294 \\uC774\\uC0C1 \\uC704 hook\\uC744 \\uC4F8 \\uC77C\\uC740 \\uC5C6\\uB2E4\\uACE0 \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"css-in-js\\uC640 \\uAC19\\uC774 \\uD2B9\\uC815 \\uC2DC\\uC810\\uC5D0 style \\uD0DC\\uADF8\\uB97C \\uC0DD\\uC131\\uD558\\uACE0 document head\\uC5D0 \\uCD94\\uAC00\\uD558\\uAC8C\\uB418\\uB294\\uB370, browser\\uAC00 \\uCD94\\uAC00\\uB41C style\\uC744 \\uD574\\uC11D\\uD558\\uACE0 react\\uAC00 browser\\uC5D0 render \\uACB0\\uACFC\\uB97C \\uADF8\\uB9AC\\uB294 \\uC791\\uC5C5\\uC774 \\uCD5C\\uB300\\uD55C \\uD6A8\\uC728\\uC801\\uC73C\\uB85C \\uC774\\uB8E8\\uC5B4\\uC9C8 \\uC218 \\uC788\\uB3C4\\uB85D \\uCEE8\\uD2B8\\uB864\\uC744 \\uB3C4\\uC640\\uC8FC\\uB294 hook\\uC774\\uB77C\\uACE0 \\uD55C\\uB2E4.\"})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://blog.saeloun.com/2021/12/30/react-18-usesyncexternalstore-api#understanding-usesyncexternalstore-hook\",children:\"useSyncExternalStore\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"react\\uC5D0\\uC11C \\uB9D0\\uD558\\uB294 internalSource\\uB294 props, state, context\\uC640 \\uAC19\\uC740 \\uAC83\\uC774\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uADF8\\uB7EC\\uB2C8\\uAE4C external\\uC740 React \\uC790\\uCCB4\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 data source\\uAC00 \\uC544\\uB2CC \\uC678\\uBD80\\uC758 mutable\\uD55C store\\uB97C \\uB73B\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC989, useSycnExternalStore\\uB294 \\uC678\\uBD80\\uC758 store\\uC758 \\uBCC0\\uACBD\\uC744 \\uAC10\\uC9C0\\uD574\\uC11C internal state\\uB85C sync\\uC2DC\\uCF1C\\uC8FC\\uB294 hook\\uC774\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC2E4\\uC81C\\uB85C \\uADF8\\uB0E5 React \\uCF54\\uB4DC\\uB97C \\uC9E4 \\uB54C\\uC5D0\\uB294 \\uD06C\\uAC8C \\uC0AC\\uC6A9\\uD560 \\uC77C\\uC774 \\uC5C6\\uC5B4\\uBCF4\\uC774\\uC9C0\\uB9CC, react state management library\\uB97C \\uC4F0\\uB294 \\uC0AC\\uB78C\\uB4E4\\uC5D0\\uAC8C \\uD544\\uC694\\uD55C hook\\uC778 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/react-18-usesyncexternalstore-62zsu?file=/src/App.js\",children:\"codesandbox \\uC608\\uC2DC\"})})]})]})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"(\\uCD94\\uD6C4\\uC5D0 \\uCD94\\uAC00\\uC608\\uC815) SuspenseList\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uC5EC\\uB7EC\\uAC1C\\uC758 Suspense children\\uB4E4\\uC774 \\uC788\\uB294 \\uACBD\\uC6B0\\uC5D0 \\uC5B4\\uB5A4 \\uC21C\\uC11C\\uB85C resolve\\uD560 \\uAC83\\uC778\\uC9C0 \\uB4F1\\uC5D0 \\uB300\\uD55C option\\uC744 \\uC9C0\\uC815\\uD560 \\uC218 \\uC788\\uB294 API\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC544\\uB9C8\\uB3C4 React 18\\uC5D0 \\uD3EC\\uD568\\uB420 \\uC608\\uC815\\uC774\\uC5C8\\uC9C0\\uB9CC, 18 \\uCD08\\uAE30 release\\uC5D0\\uB294 \\uD3EC\\uD568\\uC774 \\uC548\\uB420 \\uAC83\\uC73C\\uB85C \\uBCF4\\uC774\\uACE0 \\uB098\\uC911\\uC5D0 \\uD3EC\\uD568\\uB420 \\uAC83\\uC73C\\uB85C \\uBCF4\\uC785\\uB2C8\\uB2E4.\"})]})]}),(0,e.jsxs)(n.li,{children:[\"(\\uCD94\\uD6C4\\uC5D0 \\uCD94\\uAC00\\uC608\\uC815) \",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/25\",children:\"React Server Component\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"React Server Component\\uB9CC\\uC73C\\uB85C\\uB3C4 \\uAF64 \\uB9CE\\uC740 \\uB0B4\\uC6A9\\uC744 \\uC4F8 \\uC218 \\uC788\\uACA0\\uC9C0\\uB9CC, \\uAC04\\uB2E8\\uD558\\uAC8C\\uB9CC \\uC124\\uBA85\\uD558\\uC790\\uBA74 \\uC11C\\uBC84\\uC5D0\\uC11C \\uC2E4\\uD589\\uB420 \\uC218 \\uC788\\uB294 Component\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"db query\\uB3C4 \\uC9C1\\uC811\\uD560 \\uC218 \\uC788\\uACE0, \\uC544\\uBB34\\uB9AC \\uD070 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC4F0\\uB354\\uB77C\\uB3C4 client\\uC5D0\\uC11C \\uD574\\uB2F9 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C download \\uBC1B\\uC744 \\uD544\\uC694\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"JSON\\uC73C\\uB85C stringfy\\uB420 \\uC218 \\uC788\\uB294 \\uC815\\uB3C4\\uC758 \\uC815\\uBCF4\\uB9CC props\\uC5D0 \\uCD94\\uAC00\\uD560 \\uC218 \\uC788\\uC5B4\\uC11C Event Handler\\uAC19\\uC740 \\uAC83\\uC740 \\uCD94\\uAC00\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})]})]}),(0,e.jsxs)(n.li,{children:[\"(\\uCD94\\uD6C4\\uC5D0 \\uCD94\\uAC00\\uC608\\uC815) \",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/25\",children:\"Built-in Suspense Cache\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Suspense\\uB85C \\uAC10\\uC2F8\\uBA74 data\\uAC00 \\uC544\\uC9C1 resolve\\uB418\\uC9C0 \\uC54A\\uC558\\uC744 \\uB54C fallback\\uC774 render\\uB418\\uACE0 data\\uAC00 resolve\\uB418\\uBA74 \\uC2E4\\uC81C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 render\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uADF8\\uB7F0\\uB370 props \\uD639\\uC740 state\\uAC00 \\uBC14\\uB00C\\uBA74\\uC11C \\uB2E4\\uB978 data fetching\\uC744 \\uC2DC\\uC791\\uD558\\uACE0 \\uB2E4\\uC2DC fallback\\uC73C\\uB85C \\uB5A8\\uC5B4\\uC84C\\uB2E4\\uAC00 \\uB2E4\\uC2DC render\\uB418\\uACE0 \\uB2E4\\uC2DC \\uC608\\uC804 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C render\\uD558\\uB824\\uACE0 \\uD574\\uB3C4, Suspense\\uAC00 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C cache\\uB97C \\uD558\\uACE0 \\uC788\\uC5B4\\uC11C \\uB370\\uC774\\uD130\\uB97C \\uB2E4\\uC2DC \\uBD88\\uB7EC\\uC624\\uC9C0 \\uC54A\\uACE0 \\uCE90\\uC2DC\\uB418\\uC5B4 \\uC788\\uB358 \\uB370\\uC774\\uD130\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C render\\uAC00 \\uB420 \\uC218 \\uC788\\uB3C4\\uB85D Suspense\\uC5D0 cache \\uAE30\\uB2A5\\uC744 \\uB123\\uC73C\\uB824\\uACE0 \\uD558\\uB294 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"react-query\\uC758 \\uAE30\\uB2A5\\uACFC \\uBE44\\uAD50\\uB97C \\uD574\\uBCF8\\uB2E4\\uBA74 cacheTime\\uC774 \\uC788\\uC5B4\\uC11C cache\\uAC00 \\uC788\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uC6B0\\uC120 render\\uD558\\uACE0 background\\uC5D0\\uC11C refetching\\uD558\\uB294 \\uAE30\\uB2A5\\uC744 React\\uB9CC\\uC73C\\uB85C\\uB3C4 \\uC27D\\uAC8C \\uC9E4 \\uC218 \\uC788\\uB294 \\uB290\\uB08C\\uC774 \\uB418\\uB824\\uB098 \\uC2F6\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/sad-banach-tcnim?file=/src/App.js\",children:\"codesandbox\"})})]})]})]}),(0,e.jsxs)(n.h2,{id:\"new-strictmode-strictmode--stricteffect---\\uB9C1\\uD06C\",children:[(0,e.jsx)(n.a,{href:\"#new-strictmode-strictmode--stricteffect---\\uB9C1\\uD06C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"New StrictMode (StrictMode + StrictEffect) - \",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/19\",children:\"\\uB9C1\\uD06C\"})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0StrictMdoe\\uB294 React 16.3\\uC5D0\\uC11C\\uBD80\\uD130 \\uCD94\\uAC00\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uB9AC\\uC561\\uD2B8\\uAC00 \\uAC1C\\uC120\\uB428\\uC5D0 \\uB530\\uB77C \\uBB38\\uC81C\\uAC00 \\uC0DD\\uAE38 \\uC218 \\uC788\\uB294 \\uCF54\\uB4DC\\uB4E4\\uC744 \\uBBF8\\uB9AC \\uC9C4\\uB2E8\\uD558\\uB294 \\uC5ED\\uD560\\uC744 \\uD558\\uB294 API\\uC785\\uB2C8\\uB2E4. StrictMode\\uB294 dev \\uD658\\uACBD\\uC5D0\\uB9CC \\uC601\\uD5A5\\uC774 \\uC788\\uACE0 production\\uC5D0\\uC11C\\uB294 \\uC601\\uD5A5\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \\uC0AC\\uC6A9\\uD558\\uB294 \\uBC29\\uBC95\\uC73C\\uB85C\\uB294 react\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 \",(0,e.jsx)(n.code,{children:\"\u003cReact.StrickMode\u003e\"}),\" \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C StrictMode\\uB97C \\uC801\\uC6A9\\uD558\\uACE0\\uC790 \\uD558\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8 \\uC0C1\\uC704\\uC5D0 \\uC704\\uCE58\\uC2DC\\uD0A4\\uBA74 \\uB429\\uB2C8\\uB2E4. React 18 \\uC774\\uC804\\uC758 \\uC774 API\\uB294 \\uC758\\uB3C4\\uC801\\uC73C\\uB85C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uB450 \\uBC88 render\\uD558\\uB3C4\\uB85D \\uB9CC\\uB4E4\\uC5C8\\uB294\\uB370, React 18 \\uC624\\uBA74\\uC11C \\uBD80\\uD130\\uB294 Strict Effect\\uB77C\\uB294 \\uAC83\\uC774 \\uCD94\\uAC00\\uB418\\uBA74\\uC11C useEffect\\uB3C4 \\uB450 \\uBC88 \\uC2E4\\uD589\\uB418\\uB3C4\\uB85D \\uBCC0\\uACBD\\uB418\\uC5C8\\uB2E4\\uACE0 \\uD569\\uB2C8\\uB2E4. \\uC989, StrictMode\\uC5D0\\uC11C React\\uB294 \\uC758\\uB3C4\\uC801\\uC73C\\uB85C effect\\uAC00 mount -\u003e unmount -\u003e mount\\uD558\\uB294 \\uACFC\\uC815\\uC744 \\uAC70\\uCE58\\uAC8C \\uB429\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\xA0\\uB9AC\\uC561\\uD2B8\\uC5D0 \\uC55E\\uC73C\\uB85C \\uCD94\\uAC00\\uB420 \\uAE30\\uB2A5\\uB4E4\\uC740 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uD55C \\uBC88 \\uC774\\uC0C1 mount\\uB418\\uACE0 unmount\\uB418\\uB294 \\uB3D9\\uC548\\uC5D0\\uB3C4 \\uBB38\\uC81C \\uC5C6\\uC774 \\uC791\\uB3D9\\uD574\\uC57C\\uB9CC \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC791\\uB3D9\\uD560 \\uAC83\\uC774\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC704\\uC640 \\uAC19\\uC740 Dev \\uD658\\uACBD\\uC5D0\\uC11C\\uB9CC \\uC791\\uB3D9\\uD558\\uB294 API\\uB97C \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D \\uCD94\\uCC9C\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uC774\\uB85C \\uC778\\uD574 \\uAC1C\\uBC1C\\uD658\\uACBD\\uACFC \\uD504\\uB85C\\uB355 \\uD658\\uACBD\\uC758 \\uB3D9\\uC791\\uC774 \\uB2E4\\uB978 \\uBD80\\uBD84\\uC774 \\uC0DD\\uAE38 \\uC218 \\uC788\\uACE0 \\uD63C\\uB780\\uC774 \\uC0DD\\uAE38 \\uC218\\uB3C4 \\uC788\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC2E4\\uC81C\\uB85C \\uC2A4\\uC2A4\\uB85C \\uD63C\\uB780\\uC744 \\uACAA\\uACE0 \\uB514\\uBC84\\uAE45\\uD558\\uB294 \\uB370\\uC5D0 \\uC5B4\\uB824\\uC6C0\\uC744 \\uACAA\\uC5C8\\uB358 \\uC801\\uC774 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uB300\\uBD80\\uBD84\\uC740 \\uBB38\\uC81C\\uAC00 \\uC5C6\\uC744 \\uAC83\\uC774\\uB77C\\uACE0 \\uD558\\uC9C0\\uB9CC \\uAC1C\\uBC1C\\uC790 \\uC785\\uC7A5\\uC5D0\\uC11C \\uD5F7\\uAC08\\uB9B4 \\uC218 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC815\\uD655\\uD788 \\uC774\\uD574\\uD558\\uACE0 \\uB118\\uC5B4\\uAC00\\uB294\\uAC8C \\uC88B\\uACA0\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\xA0\\uD55C \\uBC88 \\uC774\\uC0C1\\uC758 mount, unmount\\uC5D0 \\uB300\\uC751\\uC774 \\uB418\\uC5B4\\uC57C \\uD558\\uB294 \\uC774\\uC720\\uB294 React \\uD300\\uC5D0\\uC11C \\uC774\\uC804\\uC5D0 \\uCD94\\uAC00\\uD55C Fast Refresh\\uC640 \\uC544\\uC9C1\\uC740 \\uAC1C\\uBC1C \\uC911\\uC774\\uC9C0\\uB9CC \\uCD94\\uAC00\\uB420 \\uC608\\uC815\\uC778 Offscreen API \\uB54C\\uBB38\\uC774\\uB77C\\uACE0 \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uB294\\uB370 Offscreen API\\uB294 unmount\\uB418\\uC5C8\\uC744 \\uB54C \\uBFD0\\uB9CC \\uC544\\uB2C8\\uB77C \\uD654\\uBA74\\uC5D0\\uC11C \\uC0AC\\uB77C\\uC84C\\uC744 \\uACBD\\uC6B0\\uC5D0\\uB3C4(tab\\uC758 \\uC774\\uB3D9 \\uD639\\uC740 virtualized list) state\\uB97C \\uC720\\uC9C0\\uD558\\uC9C0\\uB9CC \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC228\\uAE30\\uAE30\\uB9CC \\uD558\\uBA74\\uC11C \\uB2E4\\uC2DC \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uB098\\uD0C0\\uB0AC\\uC744 \\uB54C\\uC5D0 \\uC774\\uC804\\uACFC \\uB3D9\\uC77C\\uD55C \\uAE30\\uB2A5\\uC744 \\uC720\\uC9C0\\uD558\\uAE30 \\uC704\\uD574\\uC11C unmount -\u003e mount \\uACFC\\uC815\\uC744 \\uB611\\uAC19\\uC774 \\uAC70\\uCE5C\\uB2E4\\uACE0 \\uC5EC\\uAE30\\uACE0 \\uC788\\uACE0 \\uADF8\\uB807\\uAE30 \\uB54C\\uBB38\\uC5D0 useEffect\\uAC00 \\uBA87 \\uBC88\\uC774\\uACE0 \\uC2E4\\uD589\\uB418\\uC5B4\\uB3C4 \\uCF54\\uB4DC\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uC5C6\\uC5B4\\uC57C \\uB41C\\uB2E4\\uACE0 \\uB9D0\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\xA0React StrictMode\\uAC00 \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uB294 \\uC0C1\\uD0DC\\uC5D0\\uC11C \\uCEF4\\uD3EC\\uB10C\\uD2B8 render\\uD558\\uAC8C \\uB418\\uBA74 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC740 \\uACFC\\uC815\\uC774 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`- React renders the component.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`- React mounts the component\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Layout effect setup code runs.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Effect setup code runs.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`- React simulates the component being hidden or unmounted.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Layout effect cleanup code runs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Effect cleanup code runs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`- React simulates the component being shown again or remounted.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Layout effect setup code runs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - Effect setup code runs\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\xA0useEffect\\uC5D0 \\uC774\\uBBF8 deps list\\uC5D0 \\uD2B9\\uC815 \\uAC12\\uC774 \\uC788\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uC774\\uBBF8 \\uD55C \\uBC88 \\uC774\\uC0C1 \\uD574\\uB2F9 useEffect\\uAC00 \\uC2E4\\uD589\\uB420 \\uC218 \\uC788\\uC74C\\uC744 \\uC804\\uC81C\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uC5C6\\uC744 \\uAC83\\uC774\\uACE0 Strict Mode\\uAC00 \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uC744 \\uB54C\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uC0DD\\uAE38 \\uC218 \\uC788\\uB294 \\uB450 \\uAC00\\uC9C0\\uC758 \\uACBD\\uC6B0 \\uC77C \\uAC83\\uC774\\uB77C\\uACE0 \",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/18\",children:\"react-18 discussion\"}),\"\\uC5D0\\uC11C \\uC18C\\uAC1C\\uD558\\uACE0 \\uC788\\uB2E4. unmount\\uD560 \\uB54C \\uC2E4\\uD589\\uB418\\uB294 cleanup function\\uC774 \\uC788\\uC744 \\uACBD\\uC6B0\\uC640 mount\\uB418\\uC5C8\\uC744 \\uB54C\\uC5D0 \\uD55C\\uBC88\\uB9CC \\uC2E4\\uD589\\uB418\\uC5B4\\uC57C \\uD558\\uB294 \\uACBD\\uC6B0\\uC785\\uB2C8\\uB2E4. \\uC774\\uBBF8 \\uB9CE\\uC740 React \\uAC1C\\uBC1C\\uC790\\uB4E4\\uC774 \\uC774\\uB97C \\uCD5C\\uB300\\uD55C \\uB9DE\\uCD94\\uACE0 \\uC788\\uACA0\\uC9C0\\uB9CC, cleanup function\\uC774 \\uC788\\uB294 useEffect\\uB294 \\uB2E4\\uC2DC mount\\uB420 \\uB54C\\uC5D0 \\uC774\\uC804\\uC758 \\uC0C1\\uD0DC\\uC720\\uC9C0\\uD560 \\uC218 \\uC788\\uB294 \\uCC98\\uB9AC\\uAC00 \\uD544\\uC694\\uD558\\uB2E4\\uB294 \\uC774\\uC57C\\uAE30\\uC785\\uB2C8\\uB2E4. unmount\\uC5D0\\uC11C removeEventListener\\uB97C \\uD588\\uB2E4\\uBA74, mount\\uD560 \\uB54C\\uC5D0\\uB294 \\uBB34\\uC870\\uAC74 \\uB2E4\\uC2DC addEventListener\\uB97C \\uD558\\uB294 \\uAC83\\uCC98\\uB7FC. \\uADF8\\uB9AC\\uACE0 \\uD55C \\uBC88\\uB9CC \\uC2E4\\uD589\\uB418\\uC5B4\\uC57C \\uD558\\uB294 effect\\uC758 \\uACBD\\uC6B0 dev\\uC640 production\\uC758 \\uACBD\\uC6B0 \\uB3D9\\uC77C\\uD558\\uAC8C \\uB9DE\\uCD94\\uACE0 \\uC2F6\\uB2E4\\uBA74 useRef\\uC5D0 boolean\\uAC12\\uC744 \\uC800\\uC7A5\\uD574\\uB450\\uACE0 \\uD574\\uB2F9 \\uAC12\\uC744 \\uCC38\\uC870\\uD574\\uC11C effect\\uB97C \\uC791\\uC131\\uD558\\uB294 \\uC2DD\\uC73C\\uB85C \\uBCF4\\uC644\\uC774 \\uD544\\uC694\\uD560 \\uC218 \\uC788\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uC608\\uB97C \\uB4E4\\uBA74, \\uC544\\uB798 \\uCF54\\uB4DC\\uCC98\\uB7FC.\"]}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffectOnce\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"effect\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"EffectCallback\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" isRun \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"useRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"isRun\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"current\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      isRun\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"current\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})})]})}}var R=b;return y;})();\n;return Component;"},"_id":"blog/react-18-preview.mdx","_raw":{"sourceFilePath":"blog/react-18-preview.mdx","sourceFileName":"react-18-preview.mdx","sourceFileDir":"blog","contentType":"mdx","flattenedPath":"blog/react-18-preview"},"type":"Blog","readingTime":{"text":"7 min read","minutes":6.305,"time":378300,"words":1261},"slug":"react-18-preview","toc":[{"value":"즉시 사용 가능한 개선점","url":"#즉시-사용-가능한-개선점","depth":2},{"value":"Automatic batching for fewer renders","url":"#automatic-batching-for-fewer-renders","depth":3},{"value":"SSR support for Suspense","url":"#ssr-support-for-suspense","depth":3},{"value":"Behavioral changes to Suspense in React 18","url":"#behavioral-changes-to-suspense-in-react-18","depth":3},{"value":"Concurrent features","url":"#concurrent-features","depth":2},{"value":"New StrictMode (StrictMode + StrictEffect) - 링크","url":"#new-strictmode-strictmode--stricteffect---링크","depth":2}]},"authorDetails":[{}],"prev":{"title":"nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅","date":"2021-12-19T00:00:00.000Z","tags":["nextjs"],"draft":false,"summary":"nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.","type":"Blog","readingTime":{"text":"17 min read","minutes":16.995,"time":1019700,"words":3399},"slug":"nextjs-develop-and-operation-2","toc":[{"value":"목차","url":"#목차","depth":2},{"value":"nextjs 한걸음 더 나아가기","url":"#nextjs-한걸음-더-나아가기","depth":2},{"value":"SSG, SSR, SPA에 대해서 조금 더 이해해보기","url":"#ssg-ssr-spa에-대해서-조금-더-이해해보기","depth":3},{"value":"프로젝트의 구조를 어떻게 구성할 것인가","url":"#프로젝트의-구조를-어떻게-구성할-것인가","depth":3},{"value":"react@next, react-dom@next의 Suspense 이슈","url":"#reactnext-react-domnext의-suspense-이슈","depth":3},{"value":"react-query의 suspense 모드를 사용함으로써 useQuery가 서버에서도 실행이 된다.","url":"#react-query의-suspense-모드를-사용함으로써-usequery가-서버에서도-실행이-된다","depth":3},{"value":"Persistent Layout 구성하기","url":"#persistent-layout-구성하기","depth":3},{"value":".env, .env.local의 사용","url":"#env-envlocal의-사용","depth":3},{"value":"next/router를 사용하면서 주의해야할 것","url":"#nextrouter를-사용하면서-주의해야할-것","depth":3},{"value":"next/image를 사용하면서 주의해야할 것","url":"#nextimage를-사용하면서-주의해야할-것","depth":3},{"value":"next.config.js에서 headers 옵션 사용하기","url":"#nextconfigjs에서-headers-옵션-사용하기","depth":3},{"value":"next.config.js assetPrefix의 사용","url":"#nextconfigjs-assetprefix의-사용","depth":3},{"value":"인증을 어떻게 할 수 있을까","url":"#인증을-어떻게-할-수-있을까","depth":3},{"value":"nextjs와 같이 사용하고 있는 라이브러리들","url":"#nextjs와-같이-사용하고-있는-라이브러리들","depth":2},{"value":"react-query를 SSR에서 활용하기","url":"#react-query를-ssr에서-활용하기","depth":3},{"value":"openapi-typescript로 api의 type generation을 자동화하기","url":"#openapi-typescript로-api의-type-generation을-자동화하기","depth":3},{"value":"react-query, immer를 사용해서 optimistic update 구현하기","url":"#react-query-immer를-사용해서-optimistic-update-구현하기","depth":3},{"value":"react-virtuoso를 사용해서 빠른 무한스크롤링 리스트를 구현하기","url":"#react-virtuoso를-사용해서-빠른-무한스크롤링-리스트를-구현하기","depth":3},{"value":"useQuery의 refetchOnMount, refethcOnWindwoFocus 활용하기","url":"#usequery의-refetchonmount-refethconwindwofocus-활용하기","depth":3},{"value":"window.history가 있을 때에만 BackButton 노출하기","url":"#windowhistory가-있을-때에만-backbutton-노출하기","depth":3},{"value":"nextjs와 관련이 없을 수도 있는 트러블슈팅들","url":"#nextjs와-관련이-없을-수도-있는-트러블슈팅들","depth":2},{"value":"encodeURI, encodeURIComponent의 차이","url":"#encodeuri-encodeuricomponent의-차이","depth":3},{"value":"window.scroll smooth safari에서는 작동이 안된다","url":"#windowscroll-smooth-safari에서는-작동이-안된다","depth":3},{"value":"모바일 웹뷰에서 사용할 수 있는 유용한 패턴들","url":"#모바일-웹뷰에서-사용할-수-있는-유용한-패턴들","depth":3},{"value":"모바일 웹뷰에서 postMessage없이 postMessage하기","url":"#모바일-웹뷰에서-postmessage없이-postmessage하기","depth":3},{"value":"Horizontal 스크롤을 발생시키는 컴포넌트에서 디바이스의 크기에 따라서 완전히 보이는 컴포넌트와 걸치는 컴포넌트를 유지하기","url":"#horizontal-스크롤을-발생시키는-컴포넌트에서-디바이스의-크기에-따라서-완전히-보이는-컴포넌트와-걸치는-컴포넌트를-유지하기","depth":3},{"value":"마무리","url":"#마무리","depth":2}]},"next":{"title":"openapi 스펙을 활용해서 type-safe하게 react-query 사용하기","date":"2022-02-20T00:00:00.000Z","tags":["openapi","react-query","react"],"draft":false,"summary":"ReactQuery를 openapi-typescript를 활용해서 typesafe하게 활용해본 경험을 작성했습니다.","type":"Blog","readingTime":{"text":"5 min read","minutes":4.69,"time":281400,"words":938},"slug":"openapi-typescript-typesafe-react-query","toc":[]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["react-18-preview"]},"buildId":"N95Jos2RTM0DWue_gqMj-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
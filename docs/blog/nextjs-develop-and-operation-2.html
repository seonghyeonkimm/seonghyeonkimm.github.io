<!DOCTYPE html><html lang="ko" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅</title><meta name="robots" content="follow, index"/><meta name="description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta property="og:url" content="https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-2"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Seonghyeon Kim"/><meta property="og:description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta property="og:title" content="nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅"/><meta property="og:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/seonghyeon___"/><meta name="twitter:title" content="nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅"/><meta name="twitter:description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta name="twitter:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><link rel="canonical" href="https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-2"/><meta property="article:published_time" content="2021-12-19T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-2"
  },
  "headline": "nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/og-card.png"
    }
  ],
  "datePublished": "2021-12-19T00:00:00.000Z",
  "dateModified": "2021-12-19T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Seonghyeon Kim"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Seonghyeon Kim",
    "logo": {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/logo.png"
    }
  },
  "description": "nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/eb64dd48940ab122.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eb64dd48940ab122.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-57916c0557b48b5c.js" defer=""></script><script src="/_next/static/chunks/main-4ef043329e44a116.js" defer=""></script><script src="/_next/static/chunks/pages/_app-dd558cdee20f8a3c.js" defer=""></script><script src="/_next/static/chunks/170-510ab59698f42a3e.js" defer=""></script><script src="/_next/static/chunks/913-bac8caff02c611c0.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-0051806e725ec9a7.js" defer=""></script><script src="/_next/static/dzw4w5CEmJkywR8RC2qEm/_buildManifest.js" defer=""></script><script src="/_next/static/dzw4w5CEmJkywR8RC2qEm/_ssgManifest.js" defer=""></script><script src="/_next/static/dzw4w5CEmJkywR8RC2qEm/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><noscript><iframe title="gtm-iframe" height="0" width="0" style="display:none;visibility:hidden" src="https://www.googletagmanager.com/ns.html?id=GTM-KJNTQFR"></iframe></noscript><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Seonghyeon Kim" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg id="logo_svg__Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 500 500" style="width:40px" xml:space="preserve"><style>.logo_svg__st0{fill:#fddf7f}</style><path class="logo_svg__st0" d="M198.709 105.373c-17.072-14.62-38.245-23.682-60.489-26.019-13.531 18.706-20.964 41.345-21.033 64.58 18.434 3.538 36.401 10.112 53.087 19.749 5.726-21.38 15.5-41.1 28.435-58.31zM382.812 143.934c-.069-23.235-7.501-45.874-21.032-64.58-22.243 2.337-43.417 11.399-60.489 26.019 12.935 17.21 22.709 36.93 28.435 58.31 16.686-9.636 34.652-16.211 53.086-19.749z"></path><path d="M495 348.043c-17.119-17.913-44.733-31.678-77.75-38.222-.668.69-1.32 1.39-2.002 2.072-44.773 44.773-108.176 59.496-165.248 44.266-57.072 15.23-120.475.508-165.248-44.265-.682-.682-1.335-1.381-2.002-2.072C49.733 316.365 22.118 330.13 5 348.043c18.346 19.199 48.743 33.641 84.931 39.527l.003-.003c-18.748 19.667-23.392 42.912-13.942 64.358 36.183 5.848 75.468 2.785 108.382-9.195 9.478 22.282 33.522 41.018 65.627 52.269 32.103-11.251 56.146-29.987 65.625-52.269 32.914 11.98 72.199 15.042 108.382 9.195 9.45-21.445 4.806-44.689-13.939-64.355 36.187-5.886 66.585-20.328 84.931-39.527z" style="fill:#83e1e5"></path><path d="M459.514 146.645c-43.251-11.542-90.13-5.865-129.788 17.038-11.847-44.238-40.982-81.4-79.726-103.822-38.744 22.421-67.878 59.584-79.726 103.822-39.659-22.904-86.537-28.58-129.788-17.038-15.23 57.072-.507 120.476 44.266 165.249C129.525 356.667 192.928 371.39 250 356.159c57.073 15.23 120.475.508 165.248-44.265 44.773-44.774 59.496-108.177 44.266-165.249z" style="fill:#ecf4f7"></path><path d="M234.025 15.975a5 5 0 0 1 5-5H245V5a5 5 0 1 1 10 0v5.975h5.975a5 5 0 1 1 0 10H255v5.975a5 5 0 1 1-10 0v-5.975h-5.975a5 5 0 0 1-5-5zM410.067 101h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm-342.084 0h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm430.632 243.589c-12.936-13.536-31.514-24.768-53.727-32.479a5 5 0 1 0-3.279 9.447c18.763 6.514 34.649 15.62 46.278 26.486-17.569 16.395-44.874 28.68-76.082 34.16a101.977 101.977 0 0 0-5.846-5.353l-.12-.101a110.401 110.401 0 0 0-2.707-2.215l-.37-.285a114.661 114.661 0 0 0-2.603-1.99c-.162-.12-.328-.239-.495-.357l-.291-.209a129.206 129.206 0 0 0-2.33-1.666c-.33-.228-.669-.453-1.007-.678l-.951-.638c-.435-.293-.868-.587-1.312-.874a132.33 132.33 0 0 0-3.43-2.149 5 5 0 1 0-5.179 8.554c1.08.654 2.137 1.317 3.175 1.99.389.251.765.506 1.142.761l1.025.688c.285.189.57.378.846.568.729.504 1.433 1.016 2.133 1.525l.727.522c.809.599 1.597 1.205 2.373 1.815l.34.262c.842.666 1.661 1.338 2.432 1.988l.142.119c2.479 2.1 4.818 4.3 6.952 6.538 16.455 17.264 21.374 37.193 14.01 56.395-33.207 4.92-68.602 2.104-98.38-7.753 3.429-10.789 3.701-22.676.694-34.022-2.705-10.212-8.027-19.674-15.39-27.363a5 5 0 0 0-7.222 6.916c6.196 6.47 10.673 14.426 12.946 23.008 2.914 10.999 2.174 22.566-2.083 32.572-8.596 20.203-30.787 37.971-61.024 48.919-11.477-4.153-21.839-9.284-30.822-15.263-11.502-7.656-20.311-16.372-26.18-25.905-7.568-12.292-9.81-26.277-6.311-39.377 2.301-8.616 6.985-16.999 13.548-24.243a5.001 5.001 0 0 0-7.411-6.714c-7.627 8.418-13.09 18.23-15.8 28.377-2.91 10.899-2.544 22.265.931 33.082-29.787 9.867-65.199 12.687-98.417 7.766-7.364-19.204-2.444-39.134 14.014-56.398a90.16 90.16 0 0 1 6.942-6.53c.023-.019.102-.083.124-.103.8-.675 1.617-1.346 2.458-2.011l.337-.26c.776-.61 1.564-1.216 2.374-1.815l.722-.518c.704-.513 1.408-1.024 2.135-1.527.277-.192.563-.381.848-.57l1.025-.688c.377-.255.753-.51 1.145-.763 1.035-.67 2.092-1.333 3.172-1.988a5 5 0 1 0-5.179-8.554 132.424 132.424 0 0 0-3.427 2.147c-.446.289-.88.582-1.314.875l-.951.638c-.338.225-.677.45-1.009.68-.793.549-1.562 1.106-2.332 1.667l-.287.206c-.167.118-.333.237-.494.356-.889.657-1.753 1.322-2.604 1.991l-.368.284a106.82 106.82 0 0 0-2.688 2.2l-.145.121a101.933 101.933 0 0 0-5.841 5.349c-31.21-5.48-58.514-17.764-76.083-34.16 11.688-10.923 27.661-20.065 46.529-26.587a5 5 0 0 0-3.267-9.451c-22.323 7.717-40.992 18.985-53.989 32.585a5 5 0 0 0 0 6.909c17.971 18.805 45.835 32.639 79.096 39.418-14.979 19.419-18.338 41.978-9.063 63.025a5 5 0 0 0 3.777 2.92c12.103 1.956 24.518 2.918 36.901 2.918 24.243 0 48.354-3.692 69.695-10.851a66.464 66.464 0 0 0 2.693 4.838c6.632 10.772 16.44 20.524 29.154 28.987 10.108 6.728 21.786 12.435 34.71 16.964a4.984 4.984 0 0 0 3.306 0c31.649-11.092 55.604-29.436 66.577-50.783 21.336 7.154 45.436 10.844 69.673 10.844 12.382 0 24.802-.963 36.901-2.918a4.997 4.997 0 0 0 3.777-2.92c9.276-21.05 5.915-43.612-9.069-63.033 32.908-6.767 61.408-20.896 79.102-39.41a5 5 0 0 0-.002-6.908zm-337.38-111.442a5 5 0 1 0 9.898-1.419 161.813 161.813 0 0 1-.504-3.841 5.001 5.001 0 0 0-9.93 1.186c.164 1.364.342 2.721.536 4.074zM35.276 235.13c-7.582-29.39-7.451-60.434.379-89.775a5.002 5.002 0 0 1 3.542-3.542c23.935-6.387 48.959-7.543 73.177-3.723 1.208-22.049 8.832-43.748 21.794-61.666a4.993 4.993 0 0 1 4.573-2.042c21.717 2.282 42.056 10.519 59.154 23.884 13.698-17.139 30.524-31.693 49.6-42.732a5.001 5.001 0 0 1 5.008 0c19.076 11.039 35.901 25.593 49.6 42.732 17.099-13.365 37.438-21.602 59.154-23.884a4.997 4.997 0 0 1 4.573 2.042c12.962 17.918 20.587 39.617 21.794 61.666 24.218-3.82 49.242-2.664 73.177 3.724a5.002 5.002 0 0 1 3.542 3.542c7.83 29.341 7.961 60.385.379 89.775-7.814 30.292-23.701 58.06-45.94 80.299s-50.006 38.125-80.298 45.939a176.8 176.8 0 0 1-44.155 5.592c-14.912 0-29.82-1.895-44.33-5.649a177.056 177.056 0 0 1-44.33 5.649 176.794 176.794 0 0 1-44.155-5.592c-30.292-7.814-58.059-23.7-80.298-45.939s-38.125-50.007-45.94-80.3zm300.226-68.955a176.425 176.425 0 0 1 5.046 41.835c0 31.451-8.401 62.318-24.295 89.264-13.342 22.619-31.648 42.021-53.363 56.695 53.774 10.277 109.868-6.657 148.823-45.611 41.08-41.08 57.683-101.227 43.695-157.607-40.309-9.99-83.636-4.407-119.906 15.424zm-27.378-59.925c2.875 4.047 5.6 8.207 8.129 12.495a174.86 174.86 0 0 1 16.542 37.543c14.175-7.498 29.323-12.967 44.927-16.34-.823-19.629-7.241-39.018-18.317-55.277-18.809 2.494-36.395 9.906-51.281 21.579zm-185.845 33.699c15.604 3.373 30.751 8.842 44.927 16.34a174.86 174.86 0 0 1 16.542-37.543 175.826 175.826 0 0 1 8.129-12.495c-14.887-11.673-32.472-19.086-51.281-21.579-11.076 16.259-17.494 35.648-18.317 55.277zM88.287 308.358c38.957 38.955 95.05 55.889 148.825 45.61-36.532-24.701-62.853-62.517-72.971-105.442a5 5 0 1 1 9.733-2.294c10.204 43.286 37.877 81.077 76.126 104.12 49.758-29.976 80.548-84.246 80.548-142.342 0-58.096-30.79-112.366-80.548-142.342-49.758 29.976-80.548 84.246-80.548 142.342a5 5 0 1 1-10 0c0-14.167 1.72-28.211 5.046-41.835-36.271-19.831-79.594-25.414-119.906-15.424-13.988 56.38 2.615 116.527 43.695 157.607z" style="fill:#1c1d21"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Seonghyeon Kim</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2021-12-19T00:00:00.000Z">2021년 12월 19일 일요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.png" width="38px" height="38px" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Seonghyeon Kim</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/seonghyeon___" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@seonghyeon___</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p> 충분하지 않았을 수 있지만 Part1 이후로 우리는 이제 nextjs 앱을 aws에 ecs를 활용해서 구성하고 배포할 수 있게 되었습니다. 사실 Part1은 nextjs와 관련된 내용은 거의 없었고 aws 인프라를 어떻게 구성할 수 있는가에 대한 글에 가까웠습니다. 그래서 대제목과 어울리게 <code>이번 글에서는 구체적으로 nextjs로 개발하면서 어떤 이슈들에 부딪혔었고 어떻게 접근해왔었는지에 대한 이슈들에 대해서 이야기해보려고 합니다.</code> 간단하게 목차를 적어 보았습니다.</p><h2 id="목차"><a href="#목차" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>목차</h2><ul><li><a href="#nextjs-%ED%95%9C%EA%B1%B8%EC%9D%8C-%EB%8D%94-%EB%82%98%EC%95%84%EA%B0%80%EA%B8%B0">nextjs 한걸음 더 나아가기</a></li><li><a href="#nextjs%EC%99%80-%EA%B0%99%EC%9D%B4-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%93%A4">nextjs와 같이 사용하고 있는 라이브러리들</a></li><li><a href="#nextjs%EC%99%80-%EA%B4%80%EB%A0%A8%EC%9D%B4-%EC%97%86%EC%9D%84-%EC%88%98%EB%8F%84-%EC%9E%88%EB%8A%94-%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85%EB%93%A4">nextjs와 관련이 없을 수도 있는 트러블슈팅들</a></li></ul><h2 id="nextjs-한걸음-더-나아가기"><a href="#nextjs-한걸음-더-나아가기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs 한걸음 더 나아가기</h2><h3 id="ssg-ssr-spa에-대해서-조금-더-이해해보기"><a href="#ssg-ssr-spa에-대해서-조금-더-이해해보기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>SSG, SSR, SPA에 대해서 조금 더 이해해보기</h3><p> <code>nextjs에서 어떤 페이지는 getServerSideProps를 사용해서 SSR을 하고, 어떤 페이지는 getStaticPaths와 getStaticProps를 사용하거나 아무것도 사용하지 않아서 pre-rendering을 해야할까와 같은 고민</code>을 nextjs 서비스를 개발하면서 초기에 했었는데요. 블로그와 같이 생성 시를 제외하고 데이터가 자주 변할 일이 없다면 <code>당연히 SSG가 모든 면에서 뛰어나기 때문에 next export를 사용해서 모두 빌드 시점에 html로 만들어두면 그것이 최선</code>이라고 생각합니다. 하지만 대부분 우리가 만들려고 하는 앱들은 그것보다 조금 더 다이나믹한 앱일 경우가 많습니다. 그러면, SSG를 사용할 수 없는 경우에는 어떤 전략을 취하는게 맞을까요?</p><p> SSR이냐 SPA이냐를 결정해야 할 때 제가 고려한 요소는 <code>SEO와 FCP 두 가지였습니다.</code> 프론트 개발할 때에 사용할 수 있는 <code>접근 3가지가 두 요소에서 어떤 우위를 가지고 있는지를 표현해본다면 다음과 같을 것</code>입니다. 아래에서 SPA라고 표현한 것은 서버에서 데이터를 미리 준비하고 html을 만들지 않고 js가 로드되고 데이터를 가져와서 화면을 구성하는 방법을 표현한 것입니다.</p><ul><li><code>[SEO] SSG = SSR &gt; SPA</code></li><li><code>[FCP] SSG &gt;= SSR &gt; SPA</code></li></ul><p> SSG를 할 수 없는 경우에 위의 요소만을 보았을 때에 우리는 항상 SSR을 하는 것이 맞지 않을까라고 생각할 수 있습니다. 하지만 <code>SSR이 SPA보다 항상 우위를 가질 수 있는가를 판단하기 위해서는 캐시를 할 수 있는지에 대한 조건도 고려를 해야합니다. 위의 비교는 SSR에서 html response를 생성하기 위한 remote server request에 걸리는 시간을 제외하고 비교했기 때문입니다.</code> 캐시를 하기 어려운 페이지는 다음 정도의 페이지들을 생각할 수 있습니다. 쿠키를 캐시키에 포함시키면 가능할 수 있겠지만 <code>유저별로 다르게 표시가 되어야할 페이지는 캐시를 하기가 어렵습니다.</code> 또는 <code>유저의 특정 액션에 따라서 사용되는 데이터가 자주 변경될 수 있는 페이지는 캐시하기가 어렵습니다.</code> 결론적으로 결국 nextjs로 개발할 때에 저는 다음과 같은 조건으로 SSR을 할 페이지들을 결정했습니다.</p><ul><li><code>SEO가 필요한 페이지이고, 캐시를 할 수 있다면 SSR</code> -&gt; 상품목록 페이지 (1분 정도 캐시를 해도 크게 문제가 없을 수 있습니다.)</li><li><code>SEO가 필요없거나 캐시를 하기 어려운 페이지라면 SPA</code> -&gt; 상품 카트페이지 (유저마다 다르게 보여질 페이지이므로 SEO관련이 없고, 매번 자주 변하는 데이터들이기때문에 캐시를 하기 어렵습니다.)</li></ul><h3 id="프로젝트의-구조를-어떻게-구성할-것인가"><a href="#프로젝트의-구조를-어떻게-구성할-것인가" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>프로젝트의 구조를 어떻게 구성할 것인가</h3><p> <code>React로 서비스를 구성할 때에 어떻게 프로젝트의 구조 및 폴더 구조를 가져가면 좋은지에 대한 Best Practice같은 것들을 React에서 크게 제안하고 있는 내용은 따로 없습니다.</code> 그래서 다들 여러 가지 방법들을 사용하고 있습니다. 그래도 이번에 작업하면서 저는 어떤 접근을 취했는지에 대해서 공유 해보려고 합니다.</p><ul><li>next config에서 <code>pageExtentions</code>를 <code>page.tsx</code>로 설정했습니다.<ul><li>위 설정을 통해서 <code>pages</code>폴더 안에서 페이지에서 사용하는 컴포넌트들을 pages 폴더 안에 <code>최대한 가깝게 co-location시킬 수 있도록 접근</code>했습니다.</li><li>그리고 pages 폴더안에서 <code>components, hooks와 같은 기능적 폴더 분리를 하지 않았습니다.</code> 왜냐하면 하나의 페이지에 관련된 파일들이 많아봤자 보기에 불편할정도로 엄청 많아지지 않을 것이라고 생각했고(-&gt; 아직까지는 그렇습니다. 하지만 나중에 어떤 상황에 의해서 변할 수도 있겠습니다.), 특히나 nextjs의 pages폴더는 pageExtensions를 사용했지만, route를 표현하는 폴더이기때문에 따로 폴더링을 하고 싶지 않았습니다.</li></ul></li><li><code>libs, utils 폴더를 사용했습니다.</code><ul><li>서비스를 개발하다보면 공통적으로 사용해야하는 utils성 함수들이 존재할 수 있는데요. <code>libs는 특정 라이브러리와 관련된 전역적인 utils 함수</code>들을 모아두었고, <code>utils 폴더에는 라이브러리와는 관계없지만 전역적으로 사용 함수</code>들을 모아 두었습니다. (ex. format하는 함수)</li></ul></li><li><code>domains라는 폴더를 사용했습니다.</code><ul><li><code>domains라는 폴더는 주문, 장바구니와 같이 하나의 페이지에만 국한되는 것이 아니라 여러 페이지에서 공통적으로 사용할 수 있는 로직들을 모아두는 폴더</code>를 생성해서 사용했습니다.</li></ul></li></ul><h3 id="reactnext-react-domnext의-suspense-이슈"><a href="#reactnext-react-domnext의-suspense-이슈" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>react@next, react-dom@next의 Suspense 이슈</h3><p>  <code>react@next, react-dom@next를 사용해야만 nextjs에서 suspense for data fetching을 이용할 수 있습니다.</code> 그런데, <code>suspense는 에러가 나면 바로 fallback으로 떨어지고 데이터가 준비가 되면 render를 진행하는 식의 동작방식을 가지고 있는데요. 이게 nextjs의 서버에서 작동할 떄에는 그냥 특정 컴포넌트에서 error가 발생하면, 그냥 fallback으로 떨어져 버리고 html생성을 안하고 그냥 빈 fallback을 return합니다.</code> 그래서 이런 경우가 있었습니다. <code>특정 컴포넌트가 useEffect가 아닌 useState에서 그냥 window 객체에 접근하고 있었고 서버에서 해당 컴포넌트를 render하려고 했을 때에 에러가 나면서 그냥 html을 서버에서 만들지 않고 null을 내려주어서 SSR이 되어야하는 페이지인데도 불구하고 SSR이 안된 경우가 있었다.</code> 아직은 사용자가 이런 실수를 하지 않도록 주의하는 것 밖에 방법을 찾진 못했는데, 더 좋은 방법이 분명히 있을 것 같다는 생각을 하고 있고 틈틈히 찾아볼 생각입니다.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> <span class="token maybe-class-name">React</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// _app.tsx</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span><span class="token comment">/* window는 서버에서 실행시 없는 객체이므로 에러가 나면서 서버 렌더링 시에 fallback인 null로 render된다. */</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">pathname</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="react-query의-suspense-모드를-사용함으로써-usequery가-서버에서도-실행이-된다"><a href="#react-query의-suspense-모드를-사용함으로써-usequery가-서버에서도-실행이-된다" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>react-query의 suspense 모드를 사용함으로써 useQuery가 서버에서도 실행이 된다.</h3><p> <code>react-query의 기본적인 작동방식은 useEffect안에서 queryFn을 실행하는 것이다. 그런데 suspense mode를 키게 되면 suspense의 기본 동작과는 다르게 render될 때에 queryFn이 불리게 된다.</code> 그래서 실행되면 안될 useQuery가 실행되고 에러가 나고 있는 것을 cloudWatch 로그를 보면서 확인했습니다. 처음에는 이유를 정확히 몰랐으나 react-query discusstion에서 contributor들과 이야기를 나누면서 원인을 알게 되었습니다. 지금 이 이슈를 적절하게 처리할 수 있는 방법을 react-query에서 제공하고 있지는 않습니다. 그래서 <code>현재는 server에서는 useQuery가 성공한 것처럼 request는 안보내고 그냥 바로 return해버리는 식으로 우회하고 있다.</code></p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// _app.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> <span class="token maybe-class-name">React</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Hydrate</span><span class="token punctuation">,</span> <span class="token maybe-class-name">QueryClientProvider</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-query&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span><span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// suspense 모드 true를 하면</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>queryClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span> defaultOptions<span class="token operator">:</span> <span class="token punctuation">{</span> queries<span class="token operator">:</span> <span class="token punctuation">{</span> suspense<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator spread">...</span>pageProps<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  );
</span></span><span class="code-line"><span class="token plain-text">}
</span></span><span class="code-line"><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">// pages/index.tsx
</span></span><span class="code-line"><span class="token plain-text">function Page() </span><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 아래의 queryFn이 서버에서도 실행이 됨을 기억해야 합니다.</span>
</span><span class="code-line">  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">&#x27;queryKey&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token dom variable">window</span> <span class="token operator">===</span> <span class="token string">&#x27;undefined&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name known-class-name">Promise</span><span class="token punctuation">.</span><span class="token function property-access method">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token operator spread">...</span>result <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World: </span><span class="token punctuation">{</span>query<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token plain-text">
</span></span></code></pre></div><h3 id="persistent-layout-구성하기"><a href="#persistent-layout-구성하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Persistent Layout 구성하기</h3><p> nextjs는 react-router와는 다르게 nested router같은 것들을 구현할 수 없기 때문에 공통된 layout 컴포넌트 등을 사용하는 방법에 대해서 꽤 헷갈릴 수 있습니다. <code>페이지별로 매번 똑같은 Layout 컴포넌트를 둘러 싸서 사용한다고 하더라고 페이지간 state를 공유하고 싶은 경우를 해결할 수는 없습니다.</code> 이 상황에서 우리는 react의 특성에 대해서 조금 더 이해할 필요가 있습니다. <code>react가 dom을 그리고 업데이트할 때에는 React의 Element의 종류와 순서 등을 고려해서 이전의 React Element를 그대로 유지하고 사용할지 새로 만들지를 결정하게 됩니다. 그렇기 때문에 각 페이지에서 순서를 유지한채로 동일한 컴포넌트를 사용하게 되면 페이지가 변경될 때에도 동일한 state를 가지고 있는 persistent layout을 구현할 수 있습니다.</code> 자세한 내용은 <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/docs/basic-features/layouts">nextjs 문서 링크</a>에서 자세히 확인할 수 있습니다.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// pages/_app.tsx</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span><span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// Use the layout defined at the page level, if available</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token maybe-class-name">Layout</span> <span class="token operator">=</span>
</span><span class="code-line">    <span class="token maybe-class-name">Component</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Layout</span></span> <span class="token operator">??</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNode</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator spread">...</span>pageProps<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// pages/index.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">Layout</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../components/layout&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">NestedLayout</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../components/nested-layout&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello Word</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token maybe-class-name">Page</span><span class="token punctuation">.</span><span class="token function property-access method function-variable method-variable"><span class="token maybe-class-name">Layout</span></span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Layout</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">NavBar</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="env-envlocal의-사용"><a href="#env-envlocal의-사용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>.env, .env.local의 사용</h3><p> 서비스를 개발하면서 dotenv와 같이 환경변수를 관리하는 라이브러리를 사용해보신 경험이 있으실 수도 있을텐데, nextjs에서는 관련 기능을 조금 더 디테일하게 제공합니다. 두 가지로 나눠서 사용할 수 있는데 관련된 내용을 간단하게 설명해보겠습니다. 다음 설명은 실제 <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/docs/basic-features/environment-variables">nextjs 공식문서</a>에도 자세히 설명되어 있습니다.</p><ul><li><code>.env, .env.development, .env.staging과 같이 환경에 따라서 사용되는 환경변수를 지정할 수 있습니다. local이라는 suffix가 없는 경우는 repository에 포함되고 노출되어도 괜찮은 환경변수만을 포함시켜야합니다.</code></li><li><code>.env.local, .env.development.local과 같이 local이라는 단어가 포함이 되면 repository에 포함되지 않는 환경변수를 사용할 것임을 선언하는 것입니다. 실제 빌드시에 이런 값들은 Github secrets등을 이용해 빌드 시에만 추가해서 사용해야 합니다.</code></li></ul><h3 id="nextrouter를-사용하면서-주의해야할-것"><a href="#nextrouter를-사용하면서-주의해야할-것" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next/router를 사용하면서 주의해야할 것</h3><p> nextjs로 개발하면서 <code>next/router를 사용하면서 몇 가지 주의해야할 사항</code>들이 있습니다. <code>첫 번째로 next는 page를 이동하면서 SPA처럼 바로바로 페이지가 바뀌지 않습니다. 왜냐하면 getServerSideProps를 지정되어있는 경우 해당 함수 실행이 완료되고 페이지를 render하기 시작하기 때문에 그렇고 getServerSideProps가 없더라도 pages별로 asset파일들이 따로 생성이 되기 때문에 asset들을 다운 받는데에도 시간이 걸릴 수 있습니다. </code>(물론, production앱에서는 nextjs가 next/link를 사용해서 잘 prefetch를 해주고 직접 코드로 prefetch를 할 수 있는 방법을 제공하기도 합니다.) 그래서 저는 <code>유저에게 page가 변경되고 있다는 사실을 잘 전달 할 수 있도록 nprogress라는 라이브러리를 활용해서 router의 이벤트가 발생할 때마다 loading bar를 최상단에 보여주도록 작업</code>했습니다. (<a target="_blank" rel="noopener noreferrer" href="https://github.com/rstacruz/nprogress">nprogress</a>)</p><p> 두 번째로, <code>next/router의 useRouter에서 return되는 query object가 server-side rendering 페이지가 아닌 경우에는 처음에는 empty object로 내려옵니다. 그래서 실제 pageParams과 querystring에 접근하기 위해서는 useRouter().isReady값이 true가 된 이후에 해당 값을 사용</code>해야 합니다. 하지만, 저는 위 내용이 왜 그렇게 구현되었는지에 대한 이유는 정확히 모르고 이해가 잘 안되었습니다. 또한, React Suspense For data fetching을 사용하고 있었기 때문에 처음 rendering에서부터 해당 값이 필요했는데요. 그래서 직접 <code>router.asPath</code>와 <code>window.location</code>에 존재하는 값들을 매핑해서 직접 pageParams와 queryString을 초기 렌더링 시에도 사용할 수 있도록 작업하긴 했습니다. 뭔가 이유가 있기 때문에 nextjs에서 위와 같이 구현했을 것 같긴 한데, 우선 제가 불편해서 위와 같이 개선해서 사용해보고 있습니다.</p><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">function</span> <span class="token function">useRouterQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
</span><span class="code-line">      router<span class="token punctuation">.</span>isReady
</span><span class="code-line">        <span class="token operator">?</span> router<span class="token punctuation">.</span>query
</span><span class="code-line">        <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">              <span class="token operator">...</span><span class="token function">getRouterParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">                asPath<span class="token operator">:</span> router<span class="token punctuation">.</span>asPath<span class="token punctuation">,</span>
</span><span class="code-line">                pathname<span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">,</span>
</span><span class="code-line">              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">              <span class="token operator">...</span><span class="token function">toSearchObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">[</span>router<span class="token punctuation">.</span>asPath<span class="token punctuation">,</span> router<span class="token punctuation">.</span>isReady<span class="token punctuation">,</span> router<span class="token punctuation">.</span>query<span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="nextimage를-사용하면서-주의해야할-것"><a href="#nextimage를-사용하면서-주의해야할-것" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next/image를 사용하면서 주의해야할 것</h3><p> nextjs에서는 next/image를 통해서 이미지를 optimize할 수 있는 기능을 제공합니다. <code>결론적으로 저는 현재 unoptimized라는 props를 추가해서 optimize하는 기능을 사용하고 있지는 않습니다.</code> <code>image를 optimize하는 작업과 html을 서빙하는 일을 하나의 서버에게 맡기기에는 꽤 무리가 있어 보였고, cache가 잘되지 않는다면 서비스 운영에 큰 영향을 끼칠 수 있다고 생각했기 때문입니다. 왜냐하면 이미지가 로드가 조금 오래걸리는 것보다 html이 생성이 안되는게 훨씬 더 크리티컬한 오류이기 때문입니다.</code> 실제로 캐시 정책이 제대로 작동하지 않는 상황에서 next/image의 optimize를 사용하면서 nextjs 서버의 cpu가 100%를 찍는 것까지 목격했었습니다. <code>그래서 이미지 최적화에 대한 작업은 서버가 이미지를 업로드할 때에 잘 해줄 것을 기대하고 믿으며 작업하고 있습니다.</code> 실제로 nextjs의 image optimize 기능을 production에서 사용할 때에는 html 서빙하는 서버에서 직접 이 일들을 하기 보다는 다른 provider들을 사용하는게 맞을 것 같은데 다른 분들은 어떻게 접근하고 계신지 궁금하긴 합니다. vercel에서 배포해서 사용했을 때에는 따로 optimize하고 서빙해주는 worker같은 것들이 돌아가는 것처럼 확인됩니다.</p><blockquote><p>Vercel makes it easy to accomplish ideal loading times and prevent layout shifts for images when deploying Next.js applications by providing you with a built-in next/image component that automatically optimizes your images on demand and serves them from our globally distributed Edge Network.</p></blockquote><p> 그 이외에도 그래도 <code>next/image의 흥미로운 점들은 최신 image format들(avif, webp)등도 제공한다는 것이고, imagesSize, deviceSizes등의 설정을 통해서 srcset를 생성해주는 것을 직접 설정해서 사용할 수도 있습니다.</code></p><p> 그리고 <code>minimumCacheTTL을 사용해서 optimized된 이미지들의 cacheTime을 조절할 수도 있지만, nextjs에서 결국 image의 response를 돌려줄 때에 origin의 cache-control을 기준으로 돌려주기 때문에 minimumCacheTTL 설정은 origin의 cache-control보다 우선할 수는 없습니다.</code></p><h3 id="nextconfigjs에서-headers-옵션-사용하기"><a href="#nextconfigjs에서-headers-옵션-사용하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next.config.js에서 headers 옵션 사용하기</h3><p> Part1에서도 말했던 것처럼 <code>cloudFront는 cache-control header가 없으면 무제한으로 캐싱을 한다. 그렇기 때문에 nextjs에서 아무런 설정을 안하면 html response에 대해서 무한 캐싱을 해버리기때문에 html response에 대해서 캐시를 아예 하지 않도록 아래와 같은 코드 추가가 필요했다.</code> 아래와 같이 추가하더라도 assets(js, css)에 대한 cache-control은 nextjs에서 알아서 무제한으로 override해주니 그것에 대해서는 걱정 안해도 된다.</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function function-variable">headers</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&#x27;/:path*&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#x27;Cache-Control&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#x27;no-cache,no-store,max-age=0,must-revalidate&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="nextconfigjs-assetprefix의-사용"><a href="#nextconfigjs-assetprefix의-사용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next.config.js assetPrefix의 사용</h3><p> <code>assetPrefix라는 설정을 사용하면 nextjs 서버에서 직접 asset들을 서빙하지 않고 다른 cdn에서 assets 파일들을 서빙할 수 있습니다.</code> <code>이 설정을 하는 것이 더 권장되는 이유는 nextjs 서버는 실제로 유저의 인증 등을 위해서 cookie값들 혹은 querystring 값들을 계속해서 들고 다니는데 사실 assets파일들을 서빙할 때에는 그런 값들이 필요없을 수 있는데 불필요한 network resource가 낭비될 수 있기 때문에</code> 더 최적으로 서비스를 운영하기 위해서는 assetPrefix를 사용하는 것이 더 좋습니다. 또 cloudFront를 따로 사용해야 더 적절한 error pages 설정 등을 세팅하기에 좋습니다.</p><h3 id="인증을-어떻게-할-수-있을까"><a href="#인증을-어떻게-할-수-있을까" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>인증을 어떻게 할 수 있을까</h3><p> <code>nextjs에서는 인증을 서버에서도 확인할 수 있고 브라우저에서도 확인이 필요합니다. 보통 SPA를 개발할 때면 인증을 받고 token을 받아서 localStroage에 저장해두고 그 값을 기준으로 로그인 유지를 구현하곤 합니다. 하지만 nextjs에서는 서버에서도 인증이 필요하기 떄문에 localStorage만으로는 사용할 수 없습니다.</code> 그래서 <code>저는 nookies라는 라이브러리를 활용해서 쿠키 기반으로 nextjs 서버에서도 인증을 하고 브라우저에서도 인증을 하고 있습니다.</code> 혹시나 모를 상황에 대비해서 fallback으로 클라이언트에서 localStorage를 확인해서 인증을 확인하고 있기는 합니다. (<a target="_blank" rel="noopener noreferrer" href="https://github.com/maticzav/nookies">nookies</a>)</p><h2 id="nextjs와-같이-사용하고-있는-라이브러리들"><a href="#nextjs와-같이-사용하고-있는-라이브러리들" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs와 같이 사용하고 있는 라이브러리들</h2><h3 id="react-query를-ssr에서-활용하기"><a href="#react-query를-ssr에서-활용하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>react-query를 SSR에서 활용하기</h3><p> react-query를 애용해왔지만, SSR에서 사용한 것은 이번이 처음이었는데요. SSR 관련된 API나 docs가 존재한다는 생각을 하지 못하고 무작정 SPA에서 사용하던 방식대로 react-query를 사용하다가 몇가지 시행착오를 겪었습니다.</p><ul><li>첫 번째로는 <strong>new QueryClient()를 어떤 식으로 생성해서 사용해야하는가에 대한 문제</strong>입니다. <code>전역적으로 new QueryCLient()를 작성해두고 사용해도 SPA를 사용할 때에는 user의 request마다 새로운 queryClient가 만들어지고 사용될 것이 보장되었지만, nextjs에서 전역적으로 선언한 변수는 유저 request별로 공유될 수 있는 가능성이 있기 때문에 매번 _app.tsx파일에서 new QueryClient()를 새로 만들어 줘야 합니다.</code> 위 내용은 react-query ssr 관련 문서에 자세히 작성되어있습니다.</li><li>두 번째로는 getServerSideProps에서 이미 fetch해온 정보를 어떻게 컴포넌트에 작성되어 있는 <strong>useQuery</strong>에서 바로 사용할 수 있게 만들 수 있을까에 대한 고민이었습니다. 이것 또한 react-query의 ssr 문서를 보면 <code>getServerSideProps에서 prefetchQuery를 하고 _app.tsx에서 &lt;Hydrate /&gt;를 사용하는 방식이 소개</code>되어 있었는데 관련 내용을 읽지 못했었고 나중에야 발견하고 적용했던 경험을 했습니다.</li></ul><p> 따로 경험은 없지만, nextjs를 만든 vercel에서 react-query 역할을 하는 swr이라는 라이브러리를 만들었는데, nextjs와 swr가 훨씬 궁함이 잘맞을 수도 있겠다는 생각이 들긴 했지만, 회사 내부에서 react-query를 더 많이 사용하고 있기에 이번 nextjs 프로젝트에서도 react-query를 사용하게 되었습니다. 다음에는 swr도 사용해볼 기회가 있다면 해보면 또 다른 좋은 경험을 할 수 있지 않을까도 생각해봤습니다.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token comment">// _app.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> <span class="token maybe-class-name">React</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Hydrate</span><span class="token punctuation">,</span> <span class="token maybe-class-name">QueryClientProvider</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-query&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span><span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 매번 user request마다 QueryClient를 새로 생성합니다. (React useState lazy initialization)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>queryClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token punctuation">{</span><span class="token comment">/* Hydrate 컴포넌트를 활용해서 state를 주입 */</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hydrate</span></span> <span class="token attr-name">state</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>pageProps<span class="token operator">?.</span>dehydratedState<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator spread">...</span>pageProps<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Hydrate</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  );
</span></span><span class="code-line"><span class="token plain-text">}
</span></span></code></pre></div><h3 id="openapi-typescript로-api의-type-generation을-자동화하기"><a href="#openapi-typescript로-api의-type-generation을-자동화하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>openapi-typescript로 api의 type generation을 자동화하기</h3><p> API에서 데이터를 받아올 때에 서버가 graphql를 사용하고 있지 않다면 type을 직접 작성해줘야하는 일들이 발생하는데요. 이번 프로젝트도 마찬가지였습니다. <code>API는 rest로 구성되어 있었고, typescript를 쓰는 클라이언트에서 type checking을 하기 위해서 직접 typing을 작성해줘야만 했습니다. 그런데 이런 불필요한 작업들을 줄이기 위해서 이번에 도입한 것이 openapi-typescript라는 라이브러리를 사용해서 API서버에서 swagger의 메타정보를 이용해서 바로 type을 generation을 할 수 있도록 했습니다.</code> 위 방식을 도입하기 위해서는 백엔드팀에서도 swagger 정보를 yml혹은 json으로 뽑아줄 수 있는 endpoint를 만들어줘야하는 수고를 해주어야 하는데요. 다른 팀에서도 백엔드팀과 논의시 이것이 프론트팀에게 얼마나 큰 도움이 되는지를 잘 설득하고 할 수 있다면 굉장히 좋을 것 같습니다.</p><p> 우선, 위 내용들을 성공하고 <strong>openapi-typesciprt</strong>를 통해서 type을 만들었다고 해도 조금 불편했던 점은 만들어준 type의 형태가 꽤나 많이 nested 되어있는 object의 형태였고, 조금 더 쉽게 원하는 type들에 접근하기 위해서 좋은 방법이 없을까 생각하다가 typescript utility library인 <code>ts-toolbelt를 활용해서 필요한 type들을 조금 더 쉽게 얻고 활용할 수 있었습니다. 관련해서 몇 가지만 적어보겠습니다.</code></p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">O</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;ts-toolbelt&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> components<span class="token punctuation">,</span> paths <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;~/types/generated&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">OAIMethods</span> <span class="token operator">=</span> <span class="token string">&#x27;get&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;put&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;post&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;delete&#x27;</span> <span class="token operator">|</span> <span class="token string">&#x27;patch&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// (O.Selectkeys 사용) 특정 OAIMehotds에 해당하는 path keys들의 타입</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">OAIPathKeysByMethod<span class="token operator">&lt;</span>TMethod <span class="token keyword">extends</span> OAIMethods<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SelectKeys</span></span><span class="token operator">&lt;</span>
</span><span class="code-line">  paths<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token maybe-class-name">Record</span><span class="token operator">&lt;</span><span class="token maybe-class-name">TMethod</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token comment">// ex) get endpoint를 가지고 있는 모든 endpoint들</span>
</span><span class="code-line"><span class="token keyword">type</span> <span class="token class-name">GetPathKeys</span> <span class="token operator">=</span> <span class="token maybe-class-name">OAIPathKeysByMethod</span><span class="token operator">&lt;</span><span class="token string">&#x27;get&#x27;</span><span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// (O.Path 사용) 특정 path에 해당하는 pageParams들을 가져오는 type</span>
</span><span class="code-line"><span class="token class-name"><span class="token keyword">export</span></span> <span class="token keyword">type</span> <span class="token class-name">OAIPathParameters<span class="token operator">&lt;</span>TPath <span class="token keyword">extends</span> OAIPathKeys<span class="token punctuation">,</span> TMethod <span class="token keyword">extends</span> OAIMethods<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Path</span></span><span class="token operator">&lt;</span>
</span><span class="code-line">  paths<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">[</span><span class="token maybe-class-name">TPath</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TMethod</span><span class="token punctuation">,</span> <span class="token string">&#x27;parameters&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;path&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// (O.Path 사용) 특정 path에 해당하는 queryString들을 가져오는 type</span>
</span><span class="code-line"><span class="token class-name"><span class="token keyword">export</span></span> <span class="token keyword">type</span> <span class="token class-name">OAIQueryParameters<span class="token operator">&lt;</span>TPath <span class="token keyword">extends</span> OAIPathKeys<span class="token punctuation">,</span> TMethod <span class="token keyword">extends</span> OAIMethods<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Path</span></span><span class="token operator">&lt;</span>
</span><span class="code-line">  paths<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">[</span><span class="token maybe-class-name">TPath</span><span class="token punctuation">,</span> <span class="token maybe-class-name">TMethod</span><span class="token punctuation">,</span> <span class="token string">&#x27;parameters&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;query&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token operator">&gt;</span>
</span></code></pre></div><h3 id="react-query-immer를-사용해서-optimistic-update-구현하기"><a href="#react-query-immer를-사용해서-optimistic-update-구현하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>react-query, immer를 사용해서 optimistic update 구현하기</h3><p> 장바구니에서 장바구니에 담긴 item들의 수량 변경, 체크상태 등을 browser의 상태에서만 관리하는 것이 아니라 서버에 기록을 하고 서버의 데이터에 의존해서 페이지를 만들어야 했습니다. 그런데, 수량을 변경하거나 checkbox 체크를 할 때마다 API call을 하게 되면 빠르게 input에 대한 feedback을 받고 싶어하는 유저의 입장에서는 매번 수량 변경을 하거나 체크박스에 체크를 할 때마다 로딩 화면을 보여주는 것은 좋은 UX가 아니라고 생각했습니다.</p><p> 위 상황을 해결하기 위해서 생각했던 방법은 다음 두 가지정도였습니다.</p><ul><li>optimistic update를 구현하여 매번 API를 보내지만, API의 결과와 상관없이 우선 예상되는 결과를 반영하고 연속적인 요청이 끝났을 때에 서버에 마지막으로 확인하여 UI를 업데이트합니다.</li><li>혹은 초기값을 서버에서 받아와서 클라이언트의 state에 저장해두고, 그 이후의 동작들은 클라이언트에서만 변경을 시키다가 특정 시점에 서버에 싱크를 시킵니다.</li></ul><p> 초기에는 클라이언트에서 state를 관리하는 방향으로 했었지만 <code>react-query의 특성상 cache가 있을 수 있고 초기 클라이언트 state를 init할 때에 캐시에 들어있던 data를 기준으로 state를 세팅해버리기 떄문에 그걸 업데이트하는 코드 등을 추가해줘야하는 등 처리해야 하는 방식이 복잡해지기도 했고 data의 source를 react-query로 통일하고 싶었습니다. 그래서 react-query에서 제공하는 API중에서 onMutate, onSettled, cancelQueries, invalidateQueries등을 활용하여 optimistic update를 구현하는 것으로 방향으로 잡았습니다.</code> 그리고 <code>data가 꽤 nested되어 있는 Object였기에 해당 Object를 immutable하게 업데이트를 코드를 길게 쓰지 않고 작업하기 위해서 immer 라이브러리르 사용해서 immutable하게 업데이트</code>했습니다. (<a target="_blank" rel="noopener noreferrer" href="https://react-query.tanstack.com/guides/optimistic-updates">react-query optimistic update</a> / <a target="_blank" rel="noopener noreferrer" href="https://github.com/immerjs/immer">immer</a>)</p><h3 id="react-virtuoso를-사용해서-빠른-무한스크롤링-리스트를-구현하기"><a href="#react-virtuoso를-사용해서-빠른-무한스크롤링-리스트를-구현하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>react-virtuoso를 사용해서 빠른 무한스크롤링 리스트를 구현하기</h3><p> 상품목록 페이지에서는 무한스크롤링 리스트를 구현해야하는 이슈가 있었습니다. 무한스크롤링 리스트를 구현할 때에 virtualized list가 아닌 그냥 돔을 계속 추가하는 방향으로 그리게 되면 dom이 굉장히 무거워지고 업데이트가 느려지기 때문에 흔히 virutlized list를 구현합니다. 그래서 이전에도 사용해본 경험이 있던 react-virtualized라는 라이브러리를 사용해서 처음에 구현하려고 했는데, 이 라이브러리의 경우 window scroll에 맞게 구현하는 API가 따로 없었고 다른 라이브러리를 같이 혼용해서 사용해야했습니다. 그런데 <code>동료로부터 더 API가 간단하고 좋다고 추천받은 react-virtuoso를 알게 되었고 해당 라이브러리를 사용해서 조금 더 수월하게 구현</code>했습니다.</p><p> 처음에는 API가 꽤나 편하고 쉬워서 만족스럽게 사용하고 있습니다. 그런데 <code>갑자기 react-virtuoso가 SSR에서는 render가 안되는 것을 발견했습니다. 상품 목록이야말로 SEO가 중요한 페이지일 수 있는데 react-virtuoso가 아무리 좋더라도 SSR을 시작한 이유와 더 직결된 이 이점을 포기할 수가 없어서 이리저리 찾아봤는데 처음에는 못찾다가, 나중에야 initialCount와 FixedItemHeight라는 props를 사용</code>해서 SSR에서도 필요한 만큼 잘 render되도록 만들 수 있었습니다. (<a target="_blank" rel="noopener noreferrer" href="https://virtuoso.dev/virtuoso-api-reference/#virtuoso-properties">react-virtuoso</a>)</p><h3 id="usequery의-refetchonmount-refethconwindwofocus-활용하기"><a href="#usequery의-refetchonmount-refethconwindwofocus-활용하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>useQuery의 refetchOnMount, refethcOnWindwoFocus 활용하기</h3><p> useQuery를 사용하면서 <code>react-query staleTime의 기본값인 0을 사용하기 보다 staleTime을 조금 높은 값을 주고 정말로 변화가 필요한 값에 대해서만 invalidate해주는 방식으로 접근했었습니다.</code> 그런데 예를 들어서 <code>다른 페이지의 특정 액션을 통해서 변경이 될 수 있는 query들의 경우는 recthOnMount, refetchOnWindowFocus를 킴으로써 최산값을 최대한 유지하도록 하는 방향으로 접근했습니다. 여러 페이지에서 계속해서 어떤 query들을 invalidate해야하는 지를 항상 잘 기억하기가 어렵기 때문입니다.</code> 장바구니의 전체 상품 목록들에 대한 API, 장바구니 상품 목록의 가격을 계산하는 API등은 다른 페이지에서 장바구니에 상품을 추가할 때마다 새로 invalidate를 해줘야만 했는데 각각 invalidate하기보다는 refetch하도록 하는 것이 작업자의 멘탈모델에서도 훨씬 더 까먹지 않고 실수없이 작성할 수 있을 것이라고 생각했습니다. 그리고 <code>invalidate를 해주는 경우는 한 페이지에서 특정 액션을 통해서 변화가 있을 수 있는 query들은 invalidate하는 방식으로 접근했습니다.</code></p><h3 id="windowhistory가-있을-때에만-backbutton-노출하기"><a href="#windowhistory가-있을-때에만-backbutton-노출하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>window.history가 있을 때에만 BackButton 노출하기</h3><p> 모바일 웹뷰 상황에서 push, replace등으로 페이지를 옮기는 것이 아니라 완전히 history의 새로운 맥락을 만드는 경우에 Layout에서 엑스버튼 뿐만 아니라 그 안에서도 history가 생기는 경우에만 BackButton을 보여주고 싶었습니다. 그런데 <code>기본적으로 browser에서 history에서 back을 할 수 있는 상황인지에 대해서 정확하게 알 수 있는 방법은 없습니다. 그렇지만 react-router나 next/router와 같은 라이브러리에서 직접 routing을 관리하면서 window.history.state.idx라는 값에 현재 어떤 순서에 와있는지를 기록합니다. 공식적으로 제공하는 방법은 아니지만 router가 변할 때마다 해당 값의 변화에 따라서 BackButton을 보여주고 말고 등을 결정</code>하는 식으로 위 문제를 해결했습니다.</p><div class="relative"><pre><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">ModalAppBar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>showBackButton<span class="token punctuation">,</span> setShowBackButton<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token function property-access method">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token function function-variable">updateShowBackButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">setShowBackButton</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token operator">?.</span>idx <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    router<span class="token punctuation">.</span><span class="token property-access">events</span><span class="token punctuation">.</span><span class="token function property-access method">on</span><span class="token punctuation">(</span><span class="token string">&#x27;routeChangeComplete&#x27;</span><span class="token punctuation">,</span> updateShowBackButton<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> router<span class="token punctuation">.</span><span class="token property-access">events</span><span class="token punctuation">.</span><span class="token function property-access method">off</span><span class="token punctuation">(</span><span class="token string">&#x27;routeChangeComplete&#x27;</span><span class="token punctuation">,</span> updateShowBackButton<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>router<span class="token punctuation">.</span><span class="token property-access">events</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token punctuation">{</span>showBackButton <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
</span><span class="code-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span><span class="token property-access">left</span><span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> router<span class="token punctuation">.</span><span class="token function property-access method">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MoveBack</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CloseIcon</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="nextjs와-관련이-없을-수도-있는-트러블슈팅들"><a href="#nextjs와-관련이-없을-수도-있는-트러블슈팅들" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs와 관련이 없을 수도 있는 트러블슈팅들</h2><h3 id="encodeuri-encodeuricomponent의-차이"><a href="#encodeuri-encodeuricomponent의-차이" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>encodeURI, encodeURIComponent의 차이</h3><p> <code>querystring에 url을 기록하고 넘기고 싶은 경우에 우리는 어떤 encode 내장 함수를 써야할까. 정답은 endcodeURIComponent이다.</code> encodeURIComponent, encodeURI 두가지 API가 있다는 것은 알고 있는데 둘의 정확한 차이는 잘 몰랐는데 이번에 알았다. <code>encodeURI는 http://와 같이 프로토콜에 관련된 내용은 encode안하는데 encodeURIComponent는 해당 부분까지 encode해주는 API다.</code> 그러므로 encodeURIComponent를 사용해야한다. 그리고 encode관련해서 꽤 복잡했던 이슈가 있었는데, encode된 스트링을 또 encode할 수있는데 이런 경우 모바일웹뷰가 제대로 해당 string을 decode할 수 없고 정확한 querystring을 못넘기는 경우가 있다. 관련해서는 주의를 해야한다.</p><h3 id="windowscroll-smooth-safari에서는-작동이-안된다"><a href="#windowscroll-smooth-safari에서는-작동이-안된다" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>window.scroll smooth safari에서는 작동이 안된다</h3><p>  <code>window.scroll(0, { behavior: &#x27;smooth&#x27; })와 같은 코드는 크롬에서는 진짜 유저가 스크롤하는 것처럼 작동하지만 safari에서는 작동하지 않는다.</code> 그래서 이 경우에는 polyfill이 필요하다. <code>저는 smoothscroll-polyilll을 사용해서 polyfill을 추가</code>했습니다. (<a target="_blank" rel="noopener noreferrer" href="https://github.com/iamdustan/smoothscroll">smoothscroll-polyfill</a>)</p><h3 id="모바일-웹뷰에서-사용할-수-있는-유용한-패턴들"><a href="#모바일-웹뷰에서-사용할-수-있는-유용한-패턴들" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>모바일 웹뷰에서 사용할 수 있는 유용한 패턴들</h3><p> 현재 진행하고 있는 프로젝트에서는 /app/post-form, /app/modal-close와 같은 utils성의 페이지들이 있다. 다른 서비스를 이용할 때에 특정 로직을 심을 수는 없고 url만 지정할 수 있을 때 특정 로직을 실행시키기 위해서 위와 같은 페이지들을 만들어서 사용하고 있다. <code>/app/post-form은 새로운 웹뷰를 열면서 form post action으로 다른 페이지로 이동하고 싶을 때 사용하고 있고,</code> <code>/app/modal-close의 경우 다른 서비스에서 다녀오면서 웹뷰 창을 닫고 싶을 때 해당 로직을 담아둔 페이지를 따로 파서 사용</code>하고 있다.</p><h3 id="모바일-웹뷰에서-postmessage없이-postmessage하기"><a href="#모바일-웹뷰에서-postmessage없이-postmessage하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>모바일 웹뷰에서 postMessage없이 postMessage하기</h3><p> <code>모바일에서 웹뷰로 작업할 때에는 로드된 웹페이지 위에 또다른 웹이 뜰 수 있고 위에 떠있던 웹에서 아래 웹뷰 특정 데이터를 넘기고 싶을 떄가 있을 수 있다.</code> 이럴 때 보통은 postMessage를 할 수 있는 모바일앱인터페이스를 만들어서 사용하지만 그와 같은 인터페이스가 없다면, <code>localStorage에 필요한 정보를 전달하고 위에 떠있던 웹뷰가 닫히고 아래에 있던 웹뷰가 focus될 때에 localStorage에 정보를 확인하고 특정 로직을 실행시킬지 결정할 수 있다.</code></p><p> <code>window storage event를 사용할 수도 있지만, window storage event는 실제로 위 쪽에 떠있는 웹뷰가 닫히기도 전에 실행될 수 있을 것 같았다. 실제로 원하는 것은 위쪽 웹뷰가 닫히고 포커스되는 시점에 토스트를 띄워주는 로직을 실행해야되었기 때문에 localStorage + focus event로 해결했다.</code></p><h3 id="horizontal-스크롤을-발생시키는-컴포넌트에서-디바이스의-크기에-따라서-완전히-보이는-컴포넌트와-걸치는-컴포넌트를-유지하기"><a href="#horizontal-스크롤을-발생시키는-컴포넌트에서-디바이스의-크기에-따라서-완전히-보이는-컴포넌트와-걸치는-컴포넌트를-유지하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Horizontal 스크롤을 발생시키는 컴포넌트에서 디바이스의 크기에 따라서 완전히 보이는 컴포넌트와 걸치는 컴포넌트를 유지하기</h3><p>  <code>Horizontal 스크롤을 overflow를 auto로 설정하여 작동하도록 만들어 두었어도, 디바이스 크기에 따라 가로 스크롤이 가능하는 것을 인지하지 못하게 정확하게 컴포넌트가 크기가 딱 맞게 render가 되어서 유저가 가로 스크롤링이 가능한지 인지가 안될 수 있고 시도하지 않을 수 있다. 그럴 때에 item들의 width를 vw unit을 사용해서 디바이스 width가 달라지더라도 꼭 가로 스크롤링이 가능하다는 것을 인지할 수 있게 컴포넌트가 겹치게 rendering</code>할 수 있었다.</p><h2 id="마무리"><a href="#마무리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>마무리</h2><p> 처음에 글을 쓰기 시작할 때에 어느정도 목차를 작성하고 쓰기 시작했지만, 결국 나온 글은 사실과 의견들의 나열 정도를 벗어나지 못했다는 생각이 드네요. 앞으로 쓰게 될 글들은 더 집중된 주제로 일목요연하게 쓰고 싶다는 생각을 했습니다. 또 예시 코드들도 최대한 많이 포함해야겠다는 생각도 드네요. 부족함을 그대로 노출하는 것 같아 부끄럽지만, 조금이라도 저의 시행착오들에서 도움을 얻는 분들이 있길 바랍니다.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fseonghyeonkimm.github.io%2F%2Fblog%2Fnextjs-develop-and-operation-2">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm/seonghyeonkimm.github.io/blob/master/data/blog/nextjs-develop-and-operation-2">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/nextjs">nextjs</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/nextjs-develop-and-operation-1">nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/react-18-preview">React 18 미리보기</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:impressor7@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/seonghyeon-kim-328757b7/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/seonghyeon___"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Seonghyeon Kim</div><div> • </div><div>© 2025</div></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅","date":"2021-12-19T00:00:00.000Z","tags":["nextjs"],"draft":false,"summary":"nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.","body":{"raw":"\n\u0026nbsp;충분하지 않았을 수 있지만 Part1 이후로 우리는 이제 nextjs 앱을 aws에 ecs를 활용해서 구성하고 배포할 수 있게 되었습니다. 사실 Part1은 nextjs와 관련된 내용은 거의 없었고 aws 인프라를 어떻게 구성할 수 있는가에 대한 글에 가까웠습니다. 그래서 대제목과 어울리게 `이번 글에서는 구체적으로 nextjs로 개발하면서 어떤 이슈들에 부딪혔었고 어떻게 접근해왔었는지에 대한 이슈들에 대해서 이야기해보려고 합니다.` 간단하게 목차를 적어 보았습니다.\n\n## 목차\n\n- [nextjs 한걸음 더 나아가기](#nextjs-한걸음-더-나아가기)\n- [nextjs와 같이 사용하고 있는 라이브러리들](#nextjs와-같이-사용하고-있는-라이브러리들)\n- [nextjs와 관련이 없을 수도 있는 트러블슈팅들](#nextjs와-관련이-없을-수도-있는-트러블슈팅들)\n\n## nextjs 한걸음 더 나아가기\n\n### SSG, SSR, SPA에 대해서 조금 더 이해해보기\n\n\u0026nbsp;`nextjs에서 어떤 페이지는 getServerSideProps를 사용해서 SSR을 하고, 어떤 페이지는 getStaticPaths와 getStaticProps를 사용하거나 아무것도 사용하지 않아서 pre-rendering을 해야할까와 같은 고민`을 nextjs 서비스를 개발하면서 초기에 했었는데요. 블로그와 같이 생성 시를 제외하고 데이터가 자주 변할 일이 없다면 `당연히 SSG가 모든 면에서 뛰어나기 때문에 next export를 사용해서 모두 빌드 시점에 html로 만들어두면 그것이 최선`이라고 생각합니다. 하지만 대부분 우리가 만들려고 하는 앱들은 그것보다 조금 더 다이나믹한 앱일 경우가 많습니다. 그러면, SSG를 사용할 수 없는 경우에는 어떤 전략을 취하는게 맞을까요?\n\n\u0026nbsp;SSR이냐 SPA이냐를 결정해야 할 때 제가 고려한 요소는 `SEO와 FCP 두 가지였습니다.` 프론트 개발할 때에 사용할 수 있는 `접근 3가지가 두 요소에서 어떤 우위를 가지고 있는지를 표현해본다면 다음과 같을 것`입니다. 아래에서 SPA라고 표현한 것은 서버에서 데이터를 미리 준비하고 html을 만들지 않고 js가 로드되고 데이터를 가져와서 화면을 구성하는 방법을 표현한 것입니다.\n\n- `[SEO] SSG = SSR \u003e SPA`\n- `[FCP] SSG \u003e= SSR \u003e SPA`\n\n\u0026nbsp;SSG를 할 수 없는 경우에 위의 요소만을 보았을 때에 우리는 항상 SSR을 하는 것이 맞지 않을까라고 생각할 수 있습니다. 하지만 `SSR이 SPA보다 항상 우위를 가질 수 있는가를 판단하기 위해서는 캐시를 할 수 있는지에 대한 조건도 고려를 해야합니다. 위의 비교는 SSR에서 html response를 생성하기 위한 remote server request에 걸리는 시간을 제외하고 비교했기 때문입니다.` 캐시를 하기 어려운 페이지는 다음 정도의 페이지들을 생각할 수 있습니다. 쿠키를 캐시키에 포함시키면 가능할 수 있겠지만 `유저별로 다르게 표시가 되어야할 페이지는 캐시를 하기가 어렵습니다.` 또는 `유저의 특정 액션에 따라서 사용되는 데이터가 자주 변경될 수 있는 페이지는 캐시하기가 어렵습니다.` 결론적으로 결국 nextjs로 개발할 때에 저는 다음과 같은 조건으로 SSR을 할 페이지들을 결정했습니다.\n\n- `SEO가 필요한 페이지이고, 캐시를 할 수 있다면 SSR` -\u003e 상품목록 페이지 (1분 정도 캐시를 해도 크게 문제가 없을 수 있습니다.)\n- `SEO가 필요없거나 캐시를 하기 어려운 페이지라면 SPA` -\u003e 상품 카트페이지 (유저마다 다르게 보여질 페이지이므로 SEO관련이 없고, 매번 자주 변하는 데이터들이기때문에 캐시를 하기 어렵습니다.)\n\n### 프로젝트의 구조를 어떻게 구성할 것인가\n\n\u0026nbsp;`React로 서비스를 구성할 때에 어떻게 프로젝트의 구조 및 폴더 구조를 가져가면 좋은지에 대한 Best Practice같은 것들을 React에서 크게 제안하고 있는 내용은 따로 없습니다.` 그래서 다들 여러 가지 방법들을 사용하고 있습니다. 그래도 이번에 작업하면서 저는 어떤 접근을 취했는지에 대해서 공유 해보려고 합니다.\n\n- next config에서 `pageExtentions`를 `page.tsx`로 설정했습니다.\n  - 위 설정을 통해서 `pages`폴더 안에서 페이지에서 사용하는 컴포넌트들을 pages 폴더 안에 `최대한 가깝게 co-location시킬 수 있도록 접근`했습니다.\n  - 그리고 pages 폴더안에서 `components, hooks와 같은 기능적 폴더 분리를 하지 않았습니다.` 왜냐하면 하나의 페이지에 관련된 파일들이 많아봤자 보기에 불편할정도로 엄청 많아지지 않을 것이라고 생각했고(-\u003e 아직까지는 그렇습니다. 하지만 나중에 어떤 상황에 의해서 변할 수도 있겠습니다.), 특히나 nextjs의 pages폴더는 pageExtensions를 사용했지만, route를 표현하는 폴더이기때문에 따로 폴더링을 하고 싶지 않았습니다.\n- `libs, utils 폴더를 사용했습니다.`\n  - 서비스를 개발하다보면 공통적으로 사용해야하는 utils성 함수들이 존재할 수 있는데요. `libs는 특정 라이브러리와 관련된 전역적인 utils 함수`들을 모아두었고, `utils 폴더에는 라이브러리와는 관계없지만 전역적으로 사용 함수`들을 모아 두었습니다. (ex. format하는 함수)\n- `domains라는 폴더를 사용했습니다.`\n  - `domains라는 폴더는 주문, 장바구니와 같이 하나의 페이지에만 국한되는 것이 아니라 여러 페이지에서 공통적으로 사용할 수 있는 로직들을 모아두는 폴더`를 생성해서 사용했습니다.\n\n### react@next, react-dom@next의 Suspense 이슈\n\n\u0026nbsp; `react@next, react-dom@next를 사용해야만 nextjs에서 suspense for data fetching을 이용할 수 있습니다.` 그런데, `suspense는 에러가 나면 바로 fallback으로 떨어지고 데이터가 준비가 되면 render를 진행하는 식의 동작방식을 가지고 있는데요. 이게 nextjs의 서버에서 작동할 떄에는 그냥 특정 컴포넌트에서 error가 발생하면, 그냥 fallback으로 떨어져 버리고 html생성을 안하고 그냥 빈 fallback을 return합니다.` 그래서 이런 경우가 있었습니다. `특정 컴포넌트가 useEffect가 아닌 useState에서 그냥 window 객체에 접근하고 있었고 서버에서 해당 컴포넌트를 render하려고 했을 때에 에러가 나면서 그냥 html을 서버에서 만들지 않고 null을 내려주어서 SSR이 되어야하는 페이지인데도 불구하고 SSR이 안된 경우가 있었다.` 아직은 사용자가 이런 실수를 하지 않도록 주의하는 것 밖에 방법을 찾진 못했는데, 더 좋은 방법이 분명히 있을 것 같다는 생각을 하고 있고 틈틈히 찾아볼 생각입니다.\n\n```tsx\nimport * as React from 'react'\n\n// _app.tsx\nfunction MyApp() {\n  return (\n    \u003cReact.Suspense fallback={null}\u003e\n      \u003cdiv\u003eHello World\u003c/div\u003e\n      {/* window는 서버에서 실행시 없는 객체이므로 에러가 나면서 서버 렌더링 시에 fallback인 null로 render된다. */}\n      \u003cdiv\u003e{window.location.pathname}\u003c/div\u003e\n    \u003c/React.Suspense\u003e\n  )\n}\n```\n\n### react-query의 suspense 모드를 사용함으로써 useQuery가 서버에서도 실행이 된다.\n\n\u0026nbsp;`react-query의 기본적인 작동방식은 useEffect안에서 queryFn을 실행하는 것이다. 그런데 suspense mode를 키게 되면 suspense의 기본 동작과는 다르게 render될 때에 queryFn이 불리게 된다.` 그래서 실행되면 안될 useQuery가 실행되고 에러가 나고 있는 것을 cloudWatch 로그를 보면서 확인했습니다. 처음에는 이유를 정확히 몰랐으나 react-query discusstion에서 contributor들과 이야기를 나누면서 원인을 알게 되었습니다. 지금 이 이슈를 적절하게 처리할 수 있는 방법을 react-query에서 제공하고 있지는 않습니다. 그래서 `현재는 server에서는 useQuery가 성공한 것처럼 request는 안보내고 그냥 바로 return해버리는 식으로 우회하고 있다.`\n\n```tsx\n// _app.tsx\nimport * as React from 'react';\nimport { Hydrate, QueryClientProvider } from 'react-query';\n\nfunction MyApp({ Component, pageProps }) {\n  // suspense 모드 true를 하면\n  const [queryClient] = React.useState(() =\u003e new QueryClient({ defaultOptions: { queries: { suspense: true }}}));\n\n  return (\n    \u003cReact.Suspense fallback={null}\u003e\n      \u003cQueryClientProvider client={queryClient}\u003e\n        \u003cComponent {...pageProps}\u003e\n      \u003c/QueryClientProvider\u003e\n    \u003c/React.Suspense\u003e\n  );\n}\n\n// pages/index.tsx\nfunction Page() {\n  // 아래의 queryFn이 서버에서도 실행이 됨을 기억해야 합니다.\n  const query = useQuery('queryKey', async () =\u003e {\n    if (typeof window === 'undefined') {\n      return { success: true, };\n    }\n\n    const result = await Promise.resolve({})\n    return { success: true, ...result };\n  });\n  return (\n    \u003cdiv\u003e\n      \u003cdiv\u003eHello World: {query.data}\u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n### Persistent Layout 구성하기\n\n\u0026nbsp;nextjs는 react-router와는 다르게 nested router같은 것들을 구현할 수 없기 때문에 공통된 layout 컴포넌트 등을 사용하는 방법에 대해서 꽤 헷갈릴 수 있습니다. `페이지별로 매번 똑같은 Layout 컴포넌트를 둘러 싸서 사용한다고 하더라고 페이지간 state를 공유하고 싶은 경우를 해결할 수는 없습니다.` 이 상황에서 우리는 react의 특성에 대해서 조금 더 이해할 필요가 있습니다. `react가 dom을 그리고 업데이트할 때에는 React의 Element의 종류와 순서 등을 고려해서 이전의 React Element를 그대로 유지하고 사용할지 새로 만들지를 결정하게 됩니다. 그렇기 때문에 각 페이지에서 순서를 유지한채로 동일한 컴포넌트를 사용하게 되면 페이지가 변경될 때에도 동일한 state를 가지고 있는 persistent layout을 구현할 수 있습니다.` 자세한 내용은 [nextjs 문서 링크](https://nextjs.org/docs/basic-features/layouts)에서 자세히 확인할 수 있습니다.\n\n```tsx\n// pages/_app.tsx\nexport default function MyApp({ Component, pageProps }) {\n  // Use the layout defined at the page level, if available\n  const Layout =\n    Component.Layout ?? (({ children }: { children: React.ReactNode }) =\u003e \u003c\u003e{children}\u003c/\u003e)\n\n  return (\n    \u003cLayout\u003e\n      \u003cComponent {...pageProps} /\u003e\n    \u003c/Layout\u003e\n  )\n}\n\n// pages/index.tsx\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\n\nexport default function Page() {\n  return \u003cdiv\u003eHello Word\u003c/div\u003e\n}\n\nPage.Layout = function Layout({ children }) {\n  return (\n    \u003c\u003e\n      \u003cnav\u003eNavBar\u003c/nav\u003e\n      \u003cmain\u003e{children}\u003c/main\u003e\n    \u003c/\u003e\n  )\n}\n```\n\n### .env, .env.local의 사용\n\n\u0026nbsp;서비스를 개발하면서 dotenv와 같이 환경변수를 관리하는 라이브러리를 사용해보신 경험이 있으실 수도 있을텐데, nextjs에서는 관련 기능을 조금 더 디테일하게 제공합니다. 두 가지로 나눠서 사용할 수 있는데 관련된 내용을 간단하게 설명해보겠습니다. 다음 설명은 실제 [nextjs 공식문서](https://nextjs.org/docs/basic-features/environment-variables)에도 자세히 설명되어 있습니다.\n\n- `.env, .env.development, .env.staging과 같이 환경에 따라서 사용되는 환경변수를 지정할 수 있습니다. local이라는 suffix가 없는 경우는 repository에 포함되고 노출되어도 괜찮은 환경변수만을 포함시켜야합니다.`\n- `.env.local, .env.development.local과 같이 local이라는 단어가 포함이 되면 repository에 포함되지 않는 환경변수를 사용할 것임을 선언하는 것입니다. 실제 빌드시에 이런 값들은 Github secrets등을 이용해 빌드 시에만 추가해서 사용해야 합니다.`\n\n### next/router를 사용하면서 주의해야할 것\n\n\u0026nbsp;nextjs로 개발하면서 `next/router를 사용하면서 몇 가지 주의해야할 사항`들이 있습니다. `첫 번째로 next는 page를 이동하면서 SPA처럼 바로바로 페이지가 바뀌지 않습니다. 왜냐하면 getServerSideProps를 지정되어있는 경우 해당 함수 실행이 완료되고 페이지를 render하기 시작하기 때문에 그렇고 getServerSideProps가 없더라도 pages별로 asset파일들이 따로 생성이 되기 때문에 asset들을 다운 받는데에도 시간이 걸릴 수 있습니다. `(물론, production앱에서는 nextjs가 next/link를 사용해서 잘 prefetch를 해주고 직접 코드로 prefetch를 할 수 있는 방법을 제공하기도 합니다.) 그래서 저는 `유저에게 page가 변경되고 있다는 사실을 잘 전달 할 수 있도록 nprogress라는 라이브러리를 활용해서 router의 이벤트가 발생할 때마다 loading bar를 최상단에 보여주도록 작업`했습니다. ([nprogress](https://github.com/rstacruz/nprogress))\n\n\u0026nbsp;두 번째로, `next/router의 useRouter에서 return되는 query object가 server-side rendering 페이지가 아닌 경우에는 처음에는 empty object로 내려옵니다. 그래서 실제 pageParams과 querystring에 접근하기 위해서는 useRouter().isReady값이 true가 된 이후에 해당 값을 사용`해야 합니다. 하지만, 저는 위 내용이 왜 그렇게 구현되었는지에 대한 이유는 정확히 모르고 이해가 잘 안되었습니다. 또한, React Suspense For data fetching을 사용하고 있었기 때문에 처음 rendering에서부터 해당 값이 필요했는데요. 그래서 직접 `router.asPath`와 `window.location`에 존재하는 값들을 매핑해서 직접 pageParams와 queryString을 초기 렌더링 시에도 사용할 수 있도록 작업하긴 했습니다. 뭔가 이유가 있기 때문에 nextjs에서 위와 같이 구현했을 것 같긴 한데, 우선 제가 불편해서 위와 같이 개선해서 사용해보고 있습니다.\n\n```ts\nfunction useRouterQuery() {\n  const router = useRouter()\n  return React.useMemo(\n    () =\u003e\n      router.isReady\n        ? router.query\n        : (() =\u003e {\n            return {\n              ...getRouterParams({\n                asPath: router.asPath,\n                pathname: window.location.pathname,\n              }),\n              ...toSearchObject(new URLSearchParams(window.location.search)),\n            }\n          })(),\n    [router.asPath, router.isReady, router.query]\n  )\n}\n```\n\n### next/image를 사용하면서 주의해야할 것\n\n\u0026nbsp;nextjs에서는 next/image를 통해서 이미지를 optimize할 수 있는 기능을 제공합니다. `결론적으로 저는 현재 unoptimized라는 props를 추가해서 optimize하는 기능을 사용하고 있지는 않습니다.` `image를 optimize하는 작업과 html을 서빙하는 일을 하나의 서버에게 맡기기에는 꽤 무리가 있어 보였고, cache가 잘되지 않는다면 서비스 운영에 큰 영향을 끼칠 수 있다고 생각했기 때문입니다. 왜냐하면 이미지가 로드가 조금 오래걸리는 것보다 html이 생성이 안되는게 훨씬 더 크리티컬한 오류이기 때문입니다.` 실제로 캐시 정책이 제대로 작동하지 않는 상황에서 next/image의 optimize를 사용하면서 nextjs 서버의 cpu가 100%를 찍는 것까지 목격했었습니다. `그래서 이미지 최적화에 대한 작업은 서버가 이미지를 업로드할 때에 잘 해줄 것을 기대하고 믿으며 작업하고 있습니다.` 실제로 nextjs의 image optimize 기능을 production에서 사용할 때에는 html 서빙하는 서버에서 직접 이 일들을 하기 보다는 다른 provider들을 사용하는게 맞을 것 같은데 다른 분들은 어떻게 접근하고 계신지 궁금하긴 합니다. vercel에서 배포해서 사용했을 때에는 따로 optimize하고 서빙해주는 worker같은 것들이 돌아가는 것처럼 확인됩니다.\n\n\u003e Vercel makes it easy to accomplish ideal loading times and prevent layout shifts for images when deploying Next.js applications by providing you with a built-in next/image component that automatically optimizes your images on demand and serves them from our globally distributed Edge Network.\n\n\u0026nbsp;그 이외에도 그래도 `next/image의 흥미로운 점들은 최신 image format들(avif, webp)등도 제공한다는 것이고, imagesSize, deviceSizes등의 설정을 통해서 srcset를 생성해주는 것을 직접 설정해서 사용할 수도 있습니다.`\n\n\u0026nbsp;그리고 `minimumCacheTTL을 사용해서 optimized된 이미지들의 cacheTime을 조절할 수도 있지만, nextjs에서 결국 image의 response를 돌려줄 때에 origin의 cache-control을 기준으로 돌려주기 때문에 minimumCacheTTL 설정은 origin의 cache-control보다 우선할 수는 없습니다.`\n\n### next.config.js에서 headers 옵션 사용하기\n\n\u0026nbsp;Part1에서도 말했던 것처럼 `cloudFront는 cache-control header가 없으면 무제한으로 캐싱을 한다. 그렇기 때문에 nextjs에서 아무런 설정을 안하면 html response에 대해서 무한 캐싱을 해버리기때문에 html response에 대해서 캐시를 아예 하지 않도록 아래와 같은 코드 추가가 필요했다.` 아래와 같이 추가하더라도 assets(js, css)에 대한 cache-control은 nextjs에서 알아서 무제한으로 override해주니 그것에 대해서는 걱정 안해도 된다.\n\n```js\nexport default {\n  headers: () =\u003e {\n    return [\n      {\n        source: '/:path*',\n        headers: [\n          {\n            key: 'Cache-Control',\n            value: 'no-cache,no-store,max-age=0,must-revalidate',\n          },\n        ],\n      },\n    ]\n  },\n}\n```\n\n### next.config.js assetPrefix의 사용\n\n\u0026nbsp;`assetPrefix라는 설정을 사용하면 nextjs 서버에서 직접 asset들을 서빙하지 않고 다른 cdn에서 assets 파일들을 서빙할 수 있습니다.` `이 설정을 하는 것이 더 권장되는 이유는 nextjs 서버는 실제로 유저의 인증 등을 위해서 cookie값들 혹은 querystring 값들을 계속해서 들고 다니는데 사실 assets파일들을 서빙할 때에는 그런 값들이 필요없을 수 있는데 불필요한 network resource가 낭비될 수 있기 때문에` 더 최적으로 서비스를 운영하기 위해서는 assetPrefix를 사용하는 것이 더 좋습니다. 또 cloudFront를 따로 사용해야 더 적절한 error pages 설정 등을 세팅하기에 좋습니다.\n\n### 인증을 어떻게 할 수 있을까\n\n\u0026nbsp;`nextjs에서는 인증을 서버에서도 확인할 수 있고 브라우저에서도 확인이 필요합니다. 보통 SPA를 개발할 때면 인증을 받고 token을 받아서 localStroage에 저장해두고 그 값을 기준으로 로그인 유지를 구현하곤 합니다. 하지만 nextjs에서는 서버에서도 인증이 필요하기 떄문에 localStorage만으로는 사용할 수 없습니다.` 그래서 `저는 nookies라는 라이브러리를 활용해서 쿠키 기반으로 nextjs 서버에서도 인증을 하고 브라우저에서도 인증을 하고 있습니다.` 혹시나 모를 상황에 대비해서 fallback으로 클라이언트에서 localStorage를 확인해서 인증을 확인하고 있기는 합니다. ([nookies](https://github.com/maticzav/nookies))\n\n## nextjs와 같이 사용하고 있는 라이브러리들\n\n### react-query를 SSR에서 활용하기\n\n\u0026nbsp;react-query를 애용해왔지만, SSR에서 사용한 것은 이번이 처음이었는데요. SSR 관련된 API나 docs가 존재한다는 생각을 하지 못하고 무작정 SPA에서 사용하던 방식대로 react-query를 사용하다가 몇가지 시행착오를 겪었습니다.\n\n- 첫 번째로는 **new QueryClient()를 어떤 식으로 생성해서 사용해야하는가에 대한 문제**입니다. `전역적으로 new QueryCLient()를 작성해두고 사용해도 SPA를 사용할 때에는 user의 request마다 새로운 queryClient가 만들어지고 사용될 것이 보장되었지만, nextjs에서 전역적으로 선언한 변수는 유저 request별로 공유될 수 있는 가능성이 있기 때문에 매번 _app.tsx파일에서 new QueryClient()를 새로 만들어 줘야 합니다.` 위 내용은 react-query ssr 관련 문서에 자세히 작성되어있습니다.\n- 두 번째로는 getServerSideProps에서 이미 fetch해온 정보를 어떻게 컴포넌트에 작성되어 있는 **useQuery**에서 바로 사용할 수 있게 만들 수 있을까에 대한 고민이었습니다. 이것 또한 react-query의 ssr 문서를 보면 `getServerSideProps에서 prefetchQuery를 하고 _app.tsx에서 \u003cHydrate /\u003e를 사용하는 방식이 소개`되어 있었는데 관련 내용을 읽지 못했었고 나중에야 발견하고 적용했던 경험을 했습니다.\n\n\u0026nbsp;따로 경험은 없지만, nextjs를 만든 vercel에서 react-query 역할을 하는 swr이라는 라이브러리를 만들었는데, nextjs와 swr가 훨씬 궁함이 잘맞을 수도 있겠다는 생각이 들긴 했지만, 회사 내부에서 react-query를 더 많이 사용하고 있기에 이번 nextjs 프로젝트에서도 react-query를 사용하게 되었습니다. 다음에는 swr도 사용해볼 기회가 있다면 해보면 또 다른 좋은 경험을 할 수 있지 않을까도 생각해봤습니다.\n\n```tsx\n// _app.tsx\nimport * as React from 'react';\nimport { Hydrate, QueryClientProvider } from 'react-query';\n\nfunction MyApp({ Component, pageProps }) {\n  // 매번 user request마다 QueryClient를 새로 생성합니다. (React useState lazy initialization)\n  const [queryClient] = React.useState(() =\u003e new QueryClient());\n\n  return (\n    \u003cReact.Suspense fallback={null}\u003e\n      \u003cQueryClientProvider client={queryClient}\u003e\n        {/* Hydrate 컴포넌트를 활용해서 state를 주입 */}\n        \u003cHydrate state={pageProps?.dehydratedState}\u003e\n          \u003cComponent {...pageProps}\u003e\n        \u003c/Hydrate\u003e\n      \u003c/QueryClientProvider\u003e\n    \u003c/React.Suspense\u003e\n  );\n}\n```\n\n### openapi-typescript로 api의 type generation을 자동화하기\n\n\u0026nbsp;API에서 데이터를 받아올 때에 서버가 graphql를 사용하고 있지 않다면 type을 직접 작성해줘야하는 일들이 발생하는데요. 이번 프로젝트도 마찬가지였습니다. `API는 rest로 구성되어 있었고, typescript를 쓰는 클라이언트에서 type checking을 하기 위해서 직접 typing을 작성해줘야만 했습니다. 그런데 이런 불필요한 작업들을 줄이기 위해서 이번에 도입한 것이 openapi-typescript라는 라이브러리를 사용해서 API서버에서 swagger의 메타정보를 이용해서 바로 type을 generation을 할 수 있도록 했습니다.` 위 방식을 도입하기 위해서는 백엔드팀에서도 swagger 정보를 yml혹은 json으로 뽑아줄 수 있는 endpoint를 만들어줘야하는 수고를 해주어야 하는데요. 다른 팀에서도 백엔드팀과 논의시 이것이 프론트팀에게 얼마나 큰 도움이 되는지를 잘 설득하고 할 수 있다면 굉장히 좋을 것 같습니다.\n\n\u0026nbsp;우선, 위 내용들을 성공하고 **openapi-typesciprt**를 통해서 type을 만들었다고 해도 조금 불편했던 점은 만들어준 type의 형태가 꽤나 많이 nested 되어있는 object의 형태였고, 조금 더 쉽게 원하는 type들에 접근하기 위해서 좋은 방법이 없을까 생각하다가 typescript utility library인 `ts-toolbelt를 활용해서 필요한 type들을 조금 더 쉽게 얻고 활용할 수 있었습니다. 관련해서 몇 가지만 적어보겠습니다.`\n\n```tsx\nimport { O } from 'ts-toolbelt'\nimport type { components, paths } from '~/types/generated'\n\nexport type OAIMethods = 'get' | 'put' | 'post' | 'delete' | 'patch'\n\n// (O.Selectkeys 사용) 특정 OAIMehotds에 해당하는 path keys들의 타입\nexport type OAIPathKeysByMethod\u003cTMethod extends OAIMethods\u003e = O.SelectKeys\u003c\n  paths,\n  Record\u003cTMethod, unknown\u003e\n\u003e\n// ex) get endpoint를 가지고 있는 모든 endpoint들\ntype GetPathKeys = OAIPathKeysByMethod\u003c'get'\u003e\n\n// (O.Path 사용) 특정 path에 해당하는 pageParams들을 가져오는 type\nexport type OAIPathParameters\u003cTPath extends OAIPathKeys, TMethod extends OAIMethods\u003e = O.Path\u003c\n  paths,\n  [TPath, TMethod, 'parameters', 'path']\n\u003e\n\n// (O.Path 사용) 특정 path에 해당하는 queryString들을 가져오는 type\nexport type OAIQueryParameters\u003cTPath extends OAIPathKeys, TMethod extends OAIMethods\u003e = O.Path\u003c\n  paths,\n  [TPath, TMethod, 'parameters', 'query']\n\u003e\n```\n\n### react-query, immer를 사용해서 optimistic update 구현하기\n\n\u0026nbsp;장바구니에서 장바구니에 담긴 item들의 수량 변경, 체크상태 등을 browser의 상태에서만 관리하는 것이 아니라 서버에 기록을 하고 서버의 데이터에 의존해서 페이지를 만들어야 했습니다. 그런데, 수량을 변경하거나 checkbox 체크를 할 때마다 API call을 하게 되면 빠르게 input에 대한 feedback을 받고 싶어하는 유저의 입장에서는 매번 수량 변경을 하거나 체크박스에 체크를 할 때마다 로딩 화면을 보여주는 것은 좋은 UX가 아니라고 생각했습니다.\n\n\u0026nbsp;위 상황을 해결하기 위해서 생각했던 방법은 다음 두 가지정도였습니다.\n\n- optimistic update를 구현하여 매번 API를 보내지만, API의 결과와 상관없이 우선 예상되는 결과를 반영하고 연속적인 요청이 끝났을 때에 서버에 마지막으로 확인하여 UI를 업데이트합니다.\n- 혹은 초기값을 서버에서 받아와서 클라이언트의 state에 저장해두고, 그 이후의 동작들은 클라이언트에서만 변경을 시키다가 특정 시점에 서버에 싱크를 시킵니다.\n\n\u0026nbsp;초기에는 클라이언트에서 state를 관리하는 방향으로 했었지만 `react-query의 특성상 cache가 있을 수 있고 초기 클라이언트 state를 init할 때에 캐시에 들어있던 data를 기준으로 state를 세팅해버리기 떄문에 그걸 업데이트하는 코드 등을 추가해줘야하는 등 처리해야 하는 방식이 복잡해지기도 했고 data의 source를 react-query로 통일하고 싶었습니다. 그래서 react-query에서 제공하는 API중에서 onMutate, onSettled, cancelQueries, invalidateQueries등을 활용하여 optimistic update를 구현하는 것으로 방향으로 잡았습니다.` 그리고 `data가 꽤 nested되어 있는 Object였기에 해당 Object를 immutable하게 업데이트를 코드를 길게 쓰지 않고 작업하기 위해서 immer 라이브러리르 사용해서 immutable하게 업데이트`했습니다. ([react-query optimistic update](https://react-query.tanstack.com/guides/optimistic-updates) / [immer](https://github.com/immerjs/immer))\n\n### react-virtuoso를 사용해서 빠른 무한스크롤링 리스트를 구현하기\n\n\u0026nbsp;상품목록 페이지에서는 무한스크롤링 리스트를 구현해야하는 이슈가 있었습니다. 무한스크롤링 리스트를 구현할 때에 virtualized list가 아닌 그냥 돔을 계속 추가하는 방향으로 그리게 되면 dom이 굉장히 무거워지고 업데이트가 느려지기 때문에 흔히 virutlized list를 구현합니다. 그래서 이전에도 사용해본 경험이 있던 react-virtualized라는 라이브러리를 사용해서 처음에 구현하려고 했는데, 이 라이브러리의 경우 window scroll에 맞게 구현하는 API가 따로 없었고 다른 라이브러리를 같이 혼용해서 사용해야했습니다. 그런데 `동료로부터 더 API가 간단하고 좋다고 추천받은 react-virtuoso를 알게 되었고 해당 라이브러리를 사용해서 조금 더 수월하게 구현`했습니다.\n\n\u0026nbsp;처음에는 API가 꽤나 편하고 쉬워서 만족스럽게 사용하고 있습니다. 그런데 `갑자기 react-virtuoso가 SSR에서는 render가 안되는 것을 발견했습니다. 상품 목록이야말로 SEO가 중요한 페이지일 수 있는데 react-virtuoso가 아무리 좋더라도 SSR을 시작한 이유와 더 직결된 이 이점을 포기할 수가 없어서 이리저리 찾아봤는데 처음에는 못찾다가, 나중에야 initialCount와 FixedItemHeight라는 props를 사용`해서 SSR에서도 필요한 만큼 잘 render되도록 만들 수 있었습니다. ([react-virtuoso](https://virtuoso.dev/virtuoso-api-reference/#virtuoso-properties))\n\n### useQuery의 refetchOnMount, refethcOnWindwoFocus 활용하기\n\n\u0026nbsp;useQuery를 사용하면서 `react-query staleTime의 기본값인 0을 사용하기 보다 staleTime을 조금 높은 값을 주고 정말로 변화가 필요한 값에 대해서만 invalidate해주는 방식으로 접근했었습니다.` 그런데 예를 들어서 `다른 페이지의 특정 액션을 통해서 변경이 될 수 있는 query들의 경우는 recthOnMount, refetchOnWindowFocus를 킴으로써 최산값을 최대한 유지하도록 하는 방향으로 접근했습니다. 여러 페이지에서 계속해서 어떤 query들을 invalidate해야하는 지를 항상 잘 기억하기가 어렵기 때문입니다.` 장바구니의 전체 상품 목록들에 대한 API, 장바구니 상품 목록의 가격을 계산하는 API등은 다른 페이지에서 장바구니에 상품을 추가할 때마다 새로 invalidate를 해줘야만 했는데 각각 invalidate하기보다는 refetch하도록 하는 것이 작업자의 멘탈모델에서도 훨씬 더 까먹지 않고 실수없이 작성할 수 있을 것이라고 생각했습니다. 그리고 `invalidate를 해주는 경우는 한 페이지에서 특정 액션을 통해서 변화가 있을 수 있는 query들은 invalidate하는 방식으로 접근했습니다.`\n\n### window.history가 있을 때에만 BackButton 노출하기\n\n\u0026nbsp;모바일 웹뷰 상황에서 push, replace등으로 페이지를 옮기는 것이 아니라 완전히 history의 새로운 맥락을 만드는 경우에 Layout에서 엑스버튼 뿐만 아니라 그 안에서도 history가 생기는 경우에만 BackButton을 보여주고 싶었습니다. 그런데 `기본적으로 browser에서 history에서 back을 할 수 있는 상황인지에 대해서 정확하게 알 수 있는 방법은 없습니다. 그렇지만 react-router나 next/router와 같은 라이브러리에서 직접 routing을 관리하면서 window.history.state.idx라는 값에 현재 어떤 순서에 와있는지를 기록합니다. 공식적으로 제공하는 방법은 아니지만 router가 변할 때마다 해당 값의 변화에 따라서 BackButton을 보여주고 말고 등을 결정`하는 식으로 위 문제를 해결했습니다.\n\n```tsx\nconst ModalAppBar = ({ title }) =\u003e {\n  const router = useRouter()\n  const [showBackButton, setShowBackButton] = React.useState(false)\n\n  React.useEffect(() =\u003e {\n    const updateShowBackButton = () =\u003e {\n      setShowBackButton((window.history.state?.idx || 0) \u003e 0)\n    }\n\n    router.events.on('routeChangeComplete', updateShowBackButton)\n    return () =\u003e router.events.off('routeChangeComplete', updateShowBackButton)\n  }, [router.events])\n\n  return (\n    \u003cnav\u003e\n      \u003cdiv\u003e\n        {showBackButton \u0026\u0026 (\n          \u003cbutton type=\"button\" className={styles.left} onClick={() =\u003e router.back()}\u003e\n            \u003cMoveBack /\u003e\n          \u003c/button\u003e\n        )}\n      \u003c/div\u003e\n      \u003cdiv\u003e{title}\u003c/div\u003e\n      \u003cdiv\u003e\n        \u003cbutton\u003e\n          \u003cCloseIcon /\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/nav\u003e\n  )\n}\n```\n\n## nextjs와 관련이 없을 수도 있는 트러블슈팅들\n\n### encodeURI, encodeURIComponent의 차이\n\n\u0026nbsp;`querystring에 url을 기록하고 넘기고 싶은 경우에 우리는 어떤 encode 내장 함수를 써야할까. 정답은 endcodeURIComponent이다.` encodeURIComponent, encodeURI 두가지 API가 있다는 것은 알고 있는데 둘의 정확한 차이는 잘 몰랐는데 이번에 알았다. `encodeURI는 http://와 같이 프로토콜에 관련된 내용은 encode안하는데 encodeURIComponent는 해당 부분까지 encode해주는 API다.` 그러므로 encodeURIComponent를 사용해야한다. 그리고 encode관련해서 꽤 복잡했던 이슈가 있었는데, encode된 스트링을 또 encode할 수있는데 이런 경우 모바일웹뷰가 제대로 해당 string을 decode할 수 없고 정확한 querystring을 못넘기는 경우가 있다. 관련해서는 주의를 해야한다.\n\n### window.scroll smooth safari에서는 작동이 안된다\n\n\u0026nbsp; `window.scroll(0, { behavior: 'smooth' })와 같은 코드는 크롬에서는 진짜 유저가 스크롤하는 것처럼 작동하지만 safari에서는 작동하지 않는다.` 그래서 이 경우에는 polyfill이 필요하다. `저는 smoothscroll-polyilll을 사용해서 polyfill을 추가`했습니다. ([smoothscroll-polyfill](https://github.com/iamdustan/smoothscroll))\n\n### 모바일 웹뷰에서 사용할 수 있는 유용한 패턴들\n\n\u0026nbsp;현재 진행하고 있는 프로젝트에서는 /app/post-form, /app/modal-close와 같은 utils성의 페이지들이 있다. 다른 서비스를 이용할 때에 특정 로직을 심을 수는 없고 url만 지정할 수 있을 때 특정 로직을 실행시키기 위해서 위와 같은 페이지들을 만들어서 사용하고 있다. `/app/post-form은 새로운 웹뷰를 열면서 form post action으로 다른 페이지로 이동하고 싶을 때 사용하고 있고,` `/app/modal-close의 경우 다른 서비스에서 다녀오면서 웹뷰 창을 닫고 싶을 때 해당 로직을 담아둔 페이지를 따로 파서 사용`하고 있다.\n\n### 모바일 웹뷰에서 postMessage없이 postMessage하기\n\n\u0026nbsp;`모바일에서 웹뷰로 작업할 때에는 로드된 웹페이지 위에 또다른 웹이 뜰 수 있고 위에 떠있던 웹에서 아래 웹뷰 특정 데이터를 넘기고 싶을 떄가 있을 수 있다.` 이럴 때 보통은 postMessage를 할 수 있는 모바일앱인터페이스를 만들어서 사용하지만 그와 같은 인터페이스가 없다면, `localStorage에 필요한 정보를 전달하고 위에 떠있던 웹뷰가 닫히고 아래에 있던 웹뷰가 focus될 때에 localStorage에 정보를 확인하고 특정 로직을 실행시킬지 결정할 수 있다.`\n\n\u0026nbsp;`window storage event를 사용할 수도 있지만, window storage event는 실제로 위 쪽에 떠있는 웹뷰가 닫히기도 전에 실행될 수 있을 것 같았다. 실제로 원하는 것은 위쪽 웹뷰가 닫히고 포커스되는 시점에 토스트를 띄워주는 로직을 실행해야되었기 때문에 localStorage + focus event로 해결했다.`\n\n### Horizontal 스크롤을 발생시키는 컴포넌트에서 디바이스의 크기에 따라서 완전히 보이는 컴포넌트와 걸치는 컴포넌트를 유지하기\n\n\u0026nbsp; `Horizontal 스크롤을 overflow를 auto로 설정하여 작동하도록 만들어 두었어도, 디바이스 크기에 따라 가로 스크롤이 가능하는 것을 인지하지 못하게 정확하게 컴포넌트가 크기가 딱 맞게 render가 되어서 유저가 가로 스크롤링이 가능한지 인지가 안될 수 있고 시도하지 않을 수 있다. 그럴 때에 item들의 width를 vw unit을 사용해서 디바이스 width가 달라지더라도 꼭 가로 스크롤링이 가능하다는 것을 인지할 수 있게 컴포넌트가 겹치게 rendering`할 수 있었다.\n\n## 마무리\n\n\u0026nbsp;처음에 글을 쓰기 시작할 때에 어느정도 목차를 작성하고 쓰기 시작했지만, 결국 나온 글은 사실과 의견들의 나열 정도를 벗어나지 못했다는 생각이 드네요. 앞으로 쓰게 될 글들은 더 집중된 주제로 일목요연하게 쓰고 싶다는 생각을 했습니다. 또 예시 코드들도 최대한 많이 포함해야겠다는 생각도 드네요. 부족함을 그대로 노출하는 것 같아 부끄럽지만, 조금이라도 저의 시행착오들에서 도움을 얻는 분들이 있길 바랍니다.\n","code":"var Component=(()=\u003e{var r=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var l=a=\u003et(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{l(a);for(var c in s)t(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let e of d(s))!m.call(a,e)\u0026\u0026e!==\"default\"\u0026\u0026t(a,e,{get:()=\u003es[e],enumerable:!(c=p(s,e))||c.enumerable});return a},y=a=\u003ek(l(t(a!=null?r(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((v,i)=\u003e{i.exports=_jsx_runtime});var w={};N(w,{default:()=\u003ef,frontmatter:()=\u003eg});var n=y(o()),g={title:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uAC1C\\uBC1C\\uBD80\\uD130 \\uC6B4\\uC601\\uAE4C\\uC9C0 (2) - nextjs \\uC11C\\uBE44\\uC2A4 \\uAC1C\\uBC1C \\uACBD\\uD5D8 \\uBC0F \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\",date:\"2021-12-19\",tags:[\"nextjs\"],draft:!1,summary:\"nextjs\\uB85C \\uC9C0\\uAE08 \\uD604\\uC7AC \\uCEE4\\uBA38\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC5B4\\uCA4C\\uB2E4\\uBCF4\\uB2C8 \\uB9CE\\uC740 \\uBD80\\uBD84\\uC5D0 \\uC788\\uC5B4\\uC11C \\uC9C1\\uC811 \\uC14B\\uC5C5\\uD558\\uB294 \\uACFC\\uC815\\uC5D0 \\uCC38\\uC5EC\\uD588\\uACE0, \\uADF8 \\uACFC\\uC815\\uC5D0\\uC11C \\uBC30\\uC6E0\\uB358 \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uD300\\uC6D0\\uB4E4\\uC5D0\\uAC8C \\uACF5\\uC720\\uD558\\uACE0\\uC790 \\uB2E4\\uC74C \\uAE00\\uC744 \\uAE30\\uD68D\\uD588\\uC2B5\\uB2C8\\uB2E4.\"};function x(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({p:\"p\",code:\"code\",h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",h3:\"h3\",pre:\"pre\",blockquote:\"blockquote\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\xA0\\uCDA9\\uBD84\\uD558\\uC9C0 \\uC54A\\uC558\\uC744 \\uC218 \\uC788\\uC9C0\\uB9CC Part1 \\uC774\\uD6C4\\uB85C \\uC6B0\\uB9AC\\uB294 \\uC774\\uC81C nextjs \\uC571\\uC744 aws\\uC5D0 ecs\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C \\uAD6C\\uC131\\uD558\\uACE0 \\uBC30\\uD3EC\\uD560 \\uC218 \\uC788\\uAC8C \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC0AC\\uC2E4 Part1\\uC740 nextjs\\uC640 \\uAD00\\uB828\\uB41C \\uB0B4\\uC6A9\\uC740 \\uAC70\\uC758 \\uC5C6\\uC5C8\\uACE0 aws \\uC778\\uD504\\uB77C\\uB97C \\uC5B4\\uB5BB\\uAC8C \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB294\\uAC00\\uC5D0 \\uB300\\uD55C \\uAE00\\uC5D0 \\uAC00\\uAE4C\\uC6E0\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uB300\\uC81C\\uBAA9\\uACFC \\uC5B4\\uC6B8\\uB9AC\\uAC8C \",(0,n.jsx)(e.code,{children:\"\\uC774\\uBC88 \\uAE00\\uC5D0\\uC11C\\uB294 \\uAD6C\\uCCB4\\uC801\\uC73C\\uB85C nextjs\\uB85C \\uAC1C\\uBC1C\\uD558\\uBA74\\uC11C \\uC5B4\\uB5A4 \\uC774\\uC288\\uB4E4\\uC5D0 \\uBD80\\uB52A\\uD614\\uC5C8\\uACE0 \\uC5B4\\uB5BB\\uAC8C \\uC811\\uADFC\\uD574\\uC654\\uC5C8\\uB294\\uC9C0\\uC5D0 \\uB300\\uD55C \\uC774\\uC288\\uB4E4\\uC5D0 \\uB300\\uD574\\uC11C \\uC774\\uC57C\\uAE30\\uD574\\uBCF4\\uB824\\uACE0 \\uD569\\uB2C8\\uB2E4.\"}),\" \\uAC04\\uB2E8\\uD558\\uAC8C \\uBAA9\\uCC28\\uB97C \\uC801\\uC5B4 \\uBCF4\\uC558\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.h2,{id:\"\\uBAA9\\uCC28\",children:[(0,n.jsx)(e.a,{href:\"#\\uBAA9\\uCC28\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uBAA9\\uCC28\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#nextjs-%ED%95%9C%EA%B1%B8%EC%9D%8C-%EB%8D%94-%EB%82%98%EC%95%84%EA%B0%80%EA%B8%B0\",children:\"nextjs \\uD55C\\uAC78\\uC74C \\uB354 \\uB098\\uC544\\uAC00\\uAE30\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#nextjs%EC%99%80-%EA%B0%99%EC%9D%B4-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%93%A4\",children:\"nextjs\\uC640 \\uAC19\\uC774 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#nextjs%EC%99%80-%EA%B4%80%EB%A0%A8%EC%9D%B4-%EC%97%86%EC%9D%84-%EC%88%98%EB%8F%84-%EC%9E%88%EB%8A%94-%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85%EB%93%A4\",children:\"nextjs\\uC640 \\uAD00\\uB828\\uC774 \\uC5C6\\uC744 \\uC218\\uB3C4 \\uC788\\uB294 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\\uB4E4\"})})]}),(0,n.jsxs)(e.h2,{id:\"nextjs-\\uD55C\\uAC78\\uC74C-\\uB354-\\uB098\\uC544\\uAC00\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#nextjs-\\uD55C\\uAC78\\uC74C-\\uB354-\\uB098\\uC544\\uAC00\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"nextjs \\uD55C\\uAC78\\uC74C \\uB354 \\uB098\\uC544\\uAC00\\uAE30\"]}),(0,n.jsxs)(e.h3,{id:\"ssg-ssr-spa\\uC5D0-\\uB300\\uD574\\uC11C-\\uC870\\uAE08-\\uB354-\\uC774\\uD574\\uD574\\uBCF4\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#ssg-ssr-spa\\uC5D0-\\uB300\\uD574\\uC11C-\\uC870\\uAE08-\\uB354-\\uC774\\uD574\\uD574\\uBCF4\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"SSG, SSR, SPA\\uC5D0 \\uB300\\uD574\\uC11C \\uC870\\uAE08 \\uB354 \\uC774\\uD574\\uD574\\uBCF4\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"nextjs\\uC5D0\\uC11C \\uC5B4\\uB5A4 \\uD398\\uC774\\uC9C0\\uB294 getServerSideProps\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C SSR\\uC744 \\uD558\\uACE0, \\uC5B4\\uB5A4 \\uD398\\uC774\\uC9C0\\uB294 getStaticPaths\\uC640 getStaticProps\\uB97C \\uC0AC\\uC6A9\\uD558\\uAC70\\uB098 \\uC544\\uBB34\\uAC83\\uB3C4 \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC544\\uC11C pre-rendering\\uC744 \\uD574\\uC57C\\uD560\\uAE4C\\uC640 \\uAC19\\uC740 \\uACE0\\uBBFC\"}),\"\\uC744 nextjs \\uC11C\\uBE44\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uBA74\\uC11C \\uCD08\\uAE30\\uC5D0 \\uD588\\uC5C8\\uB294\\uB370\\uC694. \\uBE14\\uB85C\\uADF8\\uC640 \\uAC19\\uC774 \\uC0DD\\uC131 \\uC2DC\\uB97C \\uC81C\\uC678\\uD558\\uACE0 \\uB370\\uC774\\uD130\\uAC00 \\uC790\\uC8FC \\uBCC0\\uD560 \\uC77C\\uC774 \\uC5C6\\uB2E4\\uBA74 \",(0,n.jsx)(e.code,{children:\"\\uB2F9\\uC5F0\\uD788 SSG\\uAC00 \\uBAA8\\uB4E0 \\uBA74\\uC5D0\\uC11C \\uB6F0\\uC5B4\\uB098\\uAE30 \\uB54C\\uBB38\\uC5D0 next export\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uBAA8\\uB450 \\uBE4C\\uB4DC \\uC2DC\\uC810\\uC5D0 html\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uB450\\uBA74 \\uADF8\\uAC83\\uC774 \\uCD5C\\uC120\"}),\"\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD569\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uB300\\uBD80\\uBD84 \\uC6B0\\uB9AC\\uAC00 \\uB9CC\\uB4E4\\uB824\\uACE0 \\uD558\\uB294 \\uC571\\uB4E4\\uC740 \\uADF8\\uAC83\\uBCF4\\uB2E4 \\uC870\\uAE08 \\uB354 \\uB2E4\\uC774\\uB098\\uBBF9\\uD55C \\uC571\\uC77C \\uACBD\\uC6B0\\uAC00 \\uB9CE\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7EC\\uBA74, SSG\\uB97C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC5C6\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uC5B4\\uB5A4 \\uC804\\uB7B5\\uC744 \\uCDE8\\uD558\\uB294\\uAC8C \\uB9DE\\uC744\\uAE4C\\uC694?\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0SSR\\uC774\\uB0D0 SPA\\uC774\\uB0D0\\uB97C \\uACB0\\uC815\\uD574\\uC57C \\uD560 \\uB54C \\uC81C\\uAC00 \\uACE0\\uB824\\uD55C \\uC694\\uC18C\\uB294 \",(0,n.jsx)(e.code,{children:\"SEO\\uC640 FCP \\uB450 \\uAC00\\uC9C0\\uC600\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uD504\\uB860\\uD2B8 \\uAC1C\\uBC1C\\uD560 \\uB54C\\uC5D0 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \",(0,n.jsx)(e.code,{children:\"\\uC811\\uADFC 3\\uAC00\\uC9C0\\uAC00 \\uB450 \\uC694\\uC18C\\uC5D0\\uC11C \\uC5B4\\uB5A4 \\uC6B0\\uC704\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294\\uC9C0\\uB97C \\uD45C\\uD604\\uD574\\uBCF8\\uB2E4\\uBA74 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC744 \\uAC83\"}),\"\\uC785\\uB2C8\\uB2E4. \\uC544\\uB798\\uC5D0\\uC11C SPA\\uB77C\\uACE0 \\uD45C\\uD604\\uD55C \\uAC83\\uC740 \\uC11C\\uBC84\\uC5D0\\uC11C \\uB370\\uC774\\uD130\\uB97C \\uBBF8\\uB9AC \\uC900\\uBE44\\uD558\\uACE0 html\\uC744 \\uB9CC\\uB4E4\\uC9C0 \\uC54A\\uACE0 js\\uAC00 \\uB85C\\uB4DC\\uB418\\uACE0 \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC838\\uC640\\uC11C \\uD654\\uBA74\\uC744 \\uAD6C\\uC131\\uD558\\uB294 \\uBC29\\uBC95\\uC744 \\uD45C\\uD604\\uD55C \\uAC83\\uC785\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\"[SEO] SSG = SSR \u003e SPA\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\"[FCP] SSG \u003e= SSR \u003e SPA\"})})]}),(0,n.jsxs)(e.p,{children:[\"\\xA0SSG\\uB97C \\uD560 \\uC218 \\uC5C6\\uB294 \\uACBD\\uC6B0\\uC5D0 \\uC704\\uC758 \\uC694\\uC18C\\uB9CC\\uC744 \\uBCF4\\uC558\\uC744 \\uB54C\\uC5D0 \\uC6B0\\uB9AC\\uB294 \\uD56D\\uC0C1 SSR\\uC744 \\uD558\\uB294 \\uAC83\\uC774 \\uB9DE\\uC9C0 \\uC54A\\uC744\\uAE4C\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \",(0,n.jsx)(e.code,{children:\"SSR\\uC774 SPA\\uBCF4\\uB2E4 \\uD56D\\uC0C1 \\uC6B0\\uC704\\uB97C \\uAC00\\uC9C8 \\uC218 \\uC788\\uB294\\uAC00\\uB97C \\uD310\\uB2E8\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uCE90\\uC2DC\\uB97C \\uD560 \\uC218 \\uC788\\uB294\\uC9C0\\uC5D0 \\uB300\\uD55C \\uC870\\uAC74\\uB3C4 \\uACE0\\uB824\\uB97C \\uD574\\uC57C\\uD569\\uB2C8\\uB2E4. \\uC704\\uC758 \\uBE44\\uAD50\\uB294 SSR\\uC5D0\\uC11C html response\\uB97C \\uC0DD\\uC131\\uD558\\uAE30 \\uC704\\uD55C remote server request\\uC5D0 \\uAC78\\uB9AC\\uB294 \\uC2DC\\uAC04\\uC744 \\uC81C\\uC678\\uD558\\uACE0 \\uBE44\\uAD50\\uD588\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4.\"}),\" \\uCE90\\uC2DC\\uB97C \\uD558\\uAE30 \\uC5B4\\uB824\\uC6B4 \\uD398\\uC774\\uC9C0\\uB294 \\uB2E4\\uC74C \\uC815\\uB3C4\\uC758 \\uD398\\uC774\\uC9C0\\uB4E4\\uC744 \\uC0DD\\uAC01\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uCFE0\\uD0A4\\uB97C \\uCE90\\uC2DC\\uD0A4\\uC5D0 \\uD3EC\\uD568\\uC2DC\\uD0A4\\uBA74 \\uAC00\\uB2A5\\uD560 \\uC218 \\uC788\\uACA0\\uC9C0\\uB9CC \",(0,n.jsx)(e.code,{children:\"\\uC720\\uC800\\uBCC4\\uB85C \\uB2E4\\uB974\\uAC8C \\uD45C\\uC2DC\\uAC00 \\uB418\\uC5B4\\uC57C\\uD560 \\uD398\\uC774\\uC9C0\\uB294 \\uCE90\\uC2DC\\uB97C \\uD558\\uAE30\\uAC00 \\uC5B4\\uB835\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uB610\\uB294 \",(0,n.jsx)(e.code,{children:\"\\uC720\\uC800\\uC758 \\uD2B9\\uC815 \\uC561\\uC158\\uC5D0 \\uB530\\uB77C\\uC11C \\uC0AC\\uC6A9\\uB418\\uB294 \\uB370\\uC774\\uD130\\uAC00 \\uC790\\uC8FC \\uBCC0\\uACBD\\uB420 \\uC218 \\uC788\\uB294 \\uD398\\uC774\\uC9C0\\uB294 \\uCE90\\uC2DC\\uD558\\uAE30\\uAC00 \\uC5B4\\uB835\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uACB0\\uB860\\uC801\\uC73C\\uB85C \\uACB0\\uAD6D nextjs\\uB85C \\uAC1C\\uBC1C\\uD560 \\uB54C\\uC5D0 \\uC800\\uB294 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC740 \\uC870\\uAC74\\uC73C\\uB85C SSR\\uC744 \\uD560 \\uD398\\uC774\\uC9C0\\uB4E4\\uC744 \\uACB0\\uC815\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"SEO\\uAC00 \\uD544\\uC694\\uD55C \\uD398\\uC774\\uC9C0\\uC774\\uACE0, \\uCE90\\uC2DC\\uB97C \\uD560 \\uC218 \\uC788\\uB2E4\\uBA74 SSR\"}),\" -\u003e \\uC0C1\\uD488\\uBAA9\\uB85D \\uD398\\uC774\\uC9C0 (1\\uBD84 \\uC815\\uB3C4 \\uCE90\\uC2DC\\uB97C \\uD574\\uB3C4 \\uD06C\\uAC8C \\uBB38\\uC81C\\uAC00 \\uC5C6\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.)\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"SEO\\uAC00 \\uD544\\uC694\\uC5C6\\uAC70\\uB098 \\uCE90\\uC2DC\\uB97C \\uD558\\uAE30 \\uC5B4\\uB824\\uC6B4 \\uD398\\uC774\\uC9C0\\uB77C\\uBA74 SPA\"}),\" -\u003e \\uC0C1\\uD488 \\uCE74\\uD2B8\\uD398\\uC774\\uC9C0 (\\uC720\\uC800\\uB9C8\\uB2E4 \\uB2E4\\uB974\\uAC8C \\uBCF4\\uC5EC\\uC9C8 \\uD398\\uC774\\uC9C0\\uC774\\uBBC0\\uB85C SEO\\uAD00\\uB828\\uC774 \\uC5C6\\uACE0, \\uB9E4\\uBC88 \\uC790\\uC8FC \\uBCC0\\uD558\\uB294 \\uB370\\uC774\\uD130\\uB4E4\\uC774\\uAE30\\uB54C\\uBB38\\uC5D0 \\uCE90\\uC2DC\\uB97C \\uD558\\uAE30 \\uC5B4\\uB835\\uC2B5\\uB2C8\\uB2E4.)\"]})]}),(0,n.jsxs)(e.h3,{id:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uC758-\\uAD6C\\uC870\\uB97C-\\uC5B4\\uB5BB\\uAC8C-\\uAD6C\\uC131\\uD560-\\uAC83\\uC778\\uAC00\",children:[(0,n.jsx)(e.a,{href:\"#\\uD504\\uB85C\\uC81D\\uD2B8\\uC758-\\uAD6C\\uC870\\uB97C-\\uC5B4\\uB5BB\\uAC8C-\\uAD6C\\uC131\\uD560-\\uAC83\\uC778\\uAC00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uD504\\uB85C\\uC81D\\uD2B8\\uC758 \\uAD6C\\uC870\\uB97C \\uC5B4\\uB5BB\\uAC8C \\uAD6C\\uC131\\uD560 \\uAC83\\uC778\\uAC00\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"React\\uB85C \\uC11C\\uBE44\\uC2A4\\uB97C \\uAD6C\\uC131\\uD560 \\uB54C\\uC5D0 \\uC5B4\\uB5BB\\uAC8C \\uD504\\uB85C\\uC81D\\uD2B8\\uC758 \\uAD6C\\uC870 \\uBC0F \\uD3F4\\uB354 \\uAD6C\\uC870\\uB97C \\uAC00\\uC838\\uAC00\\uBA74 \\uC88B\\uC740\\uC9C0\\uC5D0 \\uB300\\uD55C Best Practice\\uAC19\\uC740 \\uAC83\\uB4E4\\uC744 React\\uC5D0\\uC11C \\uD06C\\uAC8C \\uC81C\\uC548\\uD558\\uACE0 \\uC788\\uB294 \\uB0B4\\uC6A9\\uC740 \\uB530\\uB85C \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \\uB2E4\\uB4E4 \\uC5EC\\uB7EC \\uAC00\\uC9C0 \\uBC29\\uBC95\\uB4E4\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uB3C4 \\uC774\\uBC88\\uC5D0 \\uC791\\uC5C5\\uD558\\uBA74\\uC11C \\uC800\\uB294 \\uC5B4\\uB5A4 \\uC811\\uADFC\\uC744 \\uCDE8\\uD588\\uB294\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uACF5\\uC720 \\uD574\\uBCF4\\uB824\\uACE0 \\uD569\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"next config\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"pageExtentions\"}),\"\\uB97C \",(0,n.jsx)(e.code,{children:\"page.tsx\"}),\"\\uB85C \\uC124\\uC815\\uD588\\uC2B5\\uB2C8\\uB2E4.\",(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"\\uC704 \\uC124\\uC815\\uC744 \\uD1B5\\uD574\\uC11C \",(0,n.jsx)(e.code,{children:\"pages\"}),\"\\uD3F4\\uB354 \\uC548\\uC5D0\\uC11C \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB4E4\\uC744 pages \\uD3F4\\uB354 \\uC548\\uC5D0 \",(0,n.jsx)(e.code,{children:\"\\uCD5C\\uB300\\uD55C \\uAC00\\uAE5D\\uAC8C co-location\\uC2DC\\uD0AC \\uC218 \\uC788\\uB3C4\\uB85D \\uC811\\uADFC\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.li,{children:[\"\\uADF8\\uB9AC\\uACE0 pages \\uD3F4\\uB354\\uC548\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"components, hooks\\uC640 \\uAC19\\uC740 \\uAE30\\uB2A5\\uC801 \\uD3F4\\uB354 \\uBD84\\uB9AC\\uB97C \\uD558\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC65C\\uB0D0\\uD558\\uBA74 \\uD558\\uB098\\uC758 \\uD398\\uC774\\uC9C0\\uC5D0 \\uAD00\\uB828\\uB41C \\uD30C\\uC77C\\uB4E4\\uC774 \\uB9CE\\uC544\\uBD24\\uC790 \\uBCF4\\uAE30\\uC5D0 \\uBD88\\uD3B8\\uD560\\uC815\\uB3C4\\uB85C \\uC5C4\\uCCAD \\uB9CE\\uC544\\uC9C0\\uC9C0 \\uC54A\\uC744 \\uAC83\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD588\\uACE0(-\u003e \\uC544\\uC9C1\\uAE4C\\uC9C0\\uB294 \\uADF8\\uB807\\uC2B5\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uB098\\uC911\\uC5D0 \\uC5B4\\uB5A4 \\uC0C1\\uD669\\uC5D0 \\uC758\\uD574\\uC11C \\uBCC0\\uD560 \\uC218\\uB3C4 \\uC788\\uACA0\\uC2B5\\uB2C8\\uB2E4.), \\uD2B9\\uD788\\uB098 nextjs\\uC758 pages\\uD3F4\\uB354\\uB294 pageExtensions\\uB97C \\uC0AC\\uC6A9\\uD588\\uC9C0\\uB9CC, route\\uB97C \\uD45C\\uD604\\uD558\\uB294 \\uD3F4\\uB354\\uC774\\uAE30\\uB54C\\uBB38\\uC5D0 \\uB530\\uB85C \\uD3F4\\uB354\\uB9C1\\uC744 \\uD558\\uACE0 \\uC2F6\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4.\"]})]})]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"libs, utils \\uD3F4\\uB354\\uB97C \\uC0AC\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.ul,{children:(0,n.jsxs)(e.li,{children:[\"\\uC11C\\uBE44\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uB2E4\\uBCF4\\uBA74 \\uACF5\\uD1B5\\uC801\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD574\\uC57C\\uD558\\uB294 utils\\uC131 \\uD568\\uC218\\uB4E4\\uC774 \\uC874\\uC7AC\\uD560 \\uC218 \\uC788\\uB294\\uB370\\uC694. \",(0,n.jsx)(e.code,{children:\"libs\\uB294 \\uD2B9\\uC815 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uC640 \\uAD00\\uB828\\uB41C \\uC804\\uC5ED\\uC801\\uC778 utils \\uD568\\uC218\"}),\"\\uB4E4\\uC744 \\uBAA8\\uC544\\uB450\\uC5C8\\uACE0, \",(0,n.jsx)(e.code,{children:\"utils \\uD3F4\\uB354\\uC5D0\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uC640\\uB294 \\uAD00\\uACC4\\uC5C6\\uC9C0\\uB9CC \\uC804\\uC5ED\\uC801\\uC73C\\uB85C \\uC0AC\\uC6A9 \\uD568\\uC218\"}),\"\\uB4E4\\uC744 \\uBAA8\\uC544 \\uB450\\uC5C8\\uC2B5\\uB2C8\\uB2E4. (ex. format\\uD558\\uB294 \\uD568\\uC218)\"]})})]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"domains\\uB77C\\uB294 \\uD3F4\\uB354\\uB97C \\uC0AC\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.ul,{children:(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"domains\\uB77C\\uB294 \\uD3F4\\uB354\\uB294 \\uC8FC\\uBB38, \\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC640 \\uAC19\\uC774 \\uD558\\uB098\\uC758 \\uD398\\uC774\\uC9C0\\uC5D0\\uB9CC \\uAD6D\\uD55C\\uB418\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C \\uC5EC\\uB7EC \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uACF5\\uD1B5\\uC801\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \\uB85C\\uC9C1\\uB4E4\\uC744 \\uBAA8\\uC544\\uB450\\uB294 \\uD3F4\\uB354\"}),\"\\uB97C \\uC0DD\\uC131\\uD574\\uC11C \\uC0AC\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]})})]})]}),(0,n.jsxs)(e.h3,{id:\"reactnext-react-domnext\\uC758-suspense-\\uC774\\uC288\",children:[(0,n.jsx)(e.a,{href:\"#reactnext-react-domnext\\uC758-suspense-\\uC774\\uC288\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"react@next, react-dom@next\\uC758 Suspense \\uC774\\uC288\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0 \",(0,n.jsx)(e.code,{children:\"react@next, react-dom@next\\uB97C \\uC0AC\\uC6A9\\uD574\\uC57C\\uB9CC nextjs\\uC5D0\\uC11C suspense for data fetching\\uC744 \\uC774\\uC6A9\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB7F0\\uB370, \",(0,n.jsx)(e.code,{children:\"suspense\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uB098\\uBA74 \\uBC14\\uB85C fallback\\uC73C\\uB85C \\uB5A8\\uC5B4\\uC9C0\\uACE0 \\uB370\\uC774\\uD130\\uAC00 \\uC900\\uBE44\\uAC00 \\uB418\\uBA74 render\\uB97C \\uC9C4\\uD589\\uD558\\uB294 \\uC2DD\\uC758 \\uB3D9\\uC791\\uBC29\\uC2DD\\uC744 \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294\\uB370\\uC694. \\uC774\\uAC8C nextjs\\uC758 \\uC11C\\uBC84\\uC5D0\\uC11C \\uC791\\uB3D9\\uD560 \\uB584\\uC5D0\\uB294 \\uADF8\\uB0E5 \\uD2B9\\uC815 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0\\uC11C error\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBA74, \\uADF8\\uB0E5 fallback\\uC73C\\uB85C \\uB5A8\\uC5B4\\uC838 \\uBC84\\uB9AC\\uACE0 html\\uC0DD\\uC131\\uC744 \\uC548\\uD558\\uACE0 \\uADF8\\uB0E5 \\uBE48 fallback\\uC744 return\\uD569\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \\uC774\\uB7F0 \\uACBD\\uC6B0\\uAC00 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uD2B9\\uC815 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 useEffect\\uAC00 \\uC544\\uB2CC useState\\uC5D0\\uC11C \\uADF8\\uB0E5 window \\uAC1D\\uCCB4\\uC5D0 \\uC811\\uADFC\\uD558\\uACE0 \\uC788\\uC5C8\\uACE0 \\uC11C\\uBC84\\uC5D0\\uC11C \\uD574\\uB2F9 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C render\\uD558\\uB824\\uACE0 \\uD588\\uC744 \\uB54C\\uC5D0 \\uC5D0\\uB7EC\\uAC00 \\uB098\\uBA74\\uC11C \\uADF8\\uB0E5 html\\uC744 \\uC11C\\uBC84\\uC5D0\\uC11C \\uB9CC\\uB4E4\\uC9C0 \\uC54A\\uACE0 null\\uC744 \\uB0B4\\uB824\\uC8FC\\uC5B4\\uC11C SSR\\uC774 \\uB418\\uC5B4\\uC57C\\uD558\\uB294 \\uD398\\uC774\\uC9C0\\uC778\\uB370\\uB3C4 \\uBD88\\uAD6C\\uD558\\uACE0 SSR\\uC774 \\uC548\\uB41C \\uACBD\\uC6B0\\uAC00 \\uC788\\uC5C8\\uB2E4.\"}),\" \\uC544\\uC9C1\\uC740 \\uC0AC\\uC6A9\\uC790\\uAC00 \\uC774\\uB7F0 \\uC2E4\\uC218\\uB97C \\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC8FC\\uC758\\uD558\\uB294 \\uAC83 \\uBC16\\uC5D0 \\uBC29\\uBC95\\uC744 \\uCC3E\\uC9C4 \\uBABB\\uD588\\uB294\\uB370, \\uB354 \\uC88B\\uC740 \\uBC29\\uBC95\\uC774 \\uBD84\\uBA85\\uD788 \\uC788\\uC744 \\uAC83 \\uAC19\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC744 \\uD558\\uACE0 \\uC788\\uACE0 \\uD2C8\\uD2C8\\uD788 \\uCC3E\\uC544\\uBCFC \\uC0DD\\uAC01\\uC785\\uB2C8\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// _app.tsx\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"MyApp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"fallback\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"Hello World\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token comment\",children:\"/* window\\uB294 \\uC11C\\uBC84\\uC5D0\\uC11C \\uC2E4\\uD589\\uC2DC \\uC5C6\\uB294 \\uAC1D\\uCCB4\\uC774\\uBBC0\\uB85C \\uC5D0\\uB7EC\\uAC00 \\uB098\\uBA74\\uC11C \\uC11C\\uBC84 \\uB80C\\uB354\\uB9C1 \\uC2DC\\uC5D0 fallback\\uC778 null\\uB85C render\\uB41C\\uB2E4. */\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token dom variable\",children:\"window\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"location\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"pathname\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"react-query\\uC758-suspense-\\uBAA8\\uB4DC\\uB97C-\\uC0AC\\uC6A9\\uD568\\uC73C\\uB85C\\uC368-usequery\\uAC00-\\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4-\\uC2E4\\uD589\\uC774-\\uB41C\\uB2E4\",children:[(0,n.jsx)(e.a,{href:\"#react-query\\uC758-suspense-\\uBAA8\\uB4DC\\uB97C-\\uC0AC\\uC6A9\\uD568\\uC73C\\uB85C\\uC368-usequery\\uAC00-\\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4-\\uC2E4\\uD589\\uC774-\\uB41C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"react-query\\uC758 suspense \\uBAA8\\uB4DC\\uB97C \\uC0AC\\uC6A9\\uD568\\uC73C\\uB85C\\uC368 useQuery\\uAC00 \\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4 \\uC2E4\\uD589\\uC774 \\uB41C\\uB2E4.\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"react-query\\uC758 \\uAE30\\uBCF8\\uC801\\uC778 \\uC791\\uB3D9\\uBC29\\uC2DD\\uC740 useEffect\\uC548\\uC5D0\\uC11C queryFn\\uC744 \\uC2E4\\uD589\\uD558\\uB294 \\uAC83\\uC774\\uB2E4. \\uADF8\\uB7F0\\uB370 suspense mode\\uB97C \\uD0A4\\uAC8C \\uB418\\uBA74 suspense\\uC758 \\uAE30\\uBCF8 \\uB3D9\\uC791\\uACFC\\uB294 \\uB2E4\\uB974\\uAC8C render\\uB420 \\uB54C\\uC5D0 queryFn\\uC774 \\uBD88\\uB9AC\\uAC8C \\uB41C\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \\uC2E4\\uD589\\uB418\\uBA74 \\uC548\\uB420 useQuery\\uAC00 \\uC2E4\\uD589\\uB418\\uACE0 \\uC5D0\\uB7EC\\uAC00 \\uB098\\uACE0 \\uC788\\uB294 \\uAC83\\uC744 cloudWatch \\uB85C\\uADF8\\uB97C \\uBCF4\\uBA74\\uC11C \\uD655\\uC778\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uCC98\\uC74C\\uC5D0\\uB294 \\uC774\\uC720\\uB97C \\uC815\\uD655\\uD788 \\uBAB0\\uB790\\uC73C\\uB098 react-query discusstion\\uC5D0\\uC11C contributor\\uB4E4\\uACFC \\uC774\\uC57C\\uAE30\\uB97C \\uB098\\uB204\\uBA74\\uC11C \\uC6D0\\uC778\\uC744 \\uC54C\\uAC8C \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC9C0\\uAE08 \\uC774 \\uC774\\uC288\\uB97C \\uC801\\uC808\\uD558\\uAC8C \\uCC98\\uB9AC\\uD560 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC744 react-query\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uACE0 \\uC788\\uC9C0\\uB294 \\uC54A\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \",(0,n.jsx)(e.code,{children:\"\\uD604\\uC7AC\\uB294 server\\uC5D0\\uC11C\\uB294 useQuery\\uAC00 \\uC131\\uACF5\\uD55C \\uAC83\\uCC98\\uB7FC request\\uB294 \\uC548\\uBCF4\\uB0B4\\uACE0 \\uADF8\\uB0E5 \\uBC14\\uB85C return\\uD574\\uBC84\\uB9AC\\uB294 \\uC2DD\\uC73C\\uB85C \\uC6B0\\uD68C\\uD558\\uACE0 \\uC788\\uB2E4.\"})]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// _app.tsx\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Hydrate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"QueryClientProvider\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-query'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"MyApp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" pageProps \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// suspense \\uBAA8\\uB4DC true\\uB97C \\uD558\\uBA74\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"queryClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClient\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" defaultOptions\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" queries\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" suspense\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"fallback\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClientProvider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"client\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"queryClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"})]}),\" \",(0,n.jsxs)(e.span,{className:\"token spread\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),\"pageProps\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClientProvider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`  );\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`}\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`// pages/index.tsx\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"function Page() \"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\uC544\\uB798\\uC758 queryFn\\uC774 \\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4 \\uC2E4\\uD589\\uC774 \\uB428\\uC744 \\uAE30\\uC5B5\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4.\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" query \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useQuery\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'queryKey'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" \",(0,n.jsx)(e.span,{className:\"token dom variable\",children:\"window\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'undefined'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" success\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name known-class-name\",children:\"Promise\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"resolve\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" success\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),\"result \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"Hello World: \"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"query\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"data\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]})]})}),(0,n.jsxs)(e.h3,{id:\"persistent-layout-\\uAD6C\\uC131\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#persistent-layout-\\uAD6C\\uC131\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Persistent Layout \\uAD6C\\uC131\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0nextjs\\uB294 react-router\\uC640\\uB294 \\uB2E4\\uB974\\uAC8C nested router\\uAC19\\uC740 \\uAC83\\uB4E4\\uC744 \\uAD6C\\uD604\\uD560 \\uC218 \\uC5C6\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uACF5\\uD1B5\\uB41C layout \\uCEF4\\uD3EC\\uB10C\\uD2B8 \\uB4F1\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uBC29\\uBC95\\uC5D0 \\uB300\\uD574\\uC11C \\uAF64 \\uD5F7\\uAC08\\uB9B4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uD398\\uC774\\uC9C0\\uBCC4\\uB85C \\uB9E4\\uBC88 \\uB611\\uAC19\\uC740 Layout \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uB458\\uB7EC \\uC2F8\\uC11C \\uC0AC\\uC6A9\\uD55C\\uB2E4\\uACE0 \\uD558\\uB354\\uB77C\\uACE0 \\uD398\\uC774\\uC9C0\\uAC04 state\\uB97C \\uACF5\\uC720\\uD558\\uACE0 \\uC2F6\\uC740 \\uACBD\\uC6B0\\uB97C \\uD574\\uACB0\\uD560 \\uC218\\uB294 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC774 \\uC0C1\\uD669\\uC5D0\\uC11C \\uC6B0\\uB9AC\\uB294 react\\uC758 \\uD2B9\\uC131\\uC5D0 \\uB300\\uD574\\uC11C \\uC870\\uAE08 \\uB354 \\uC774\\uD574\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"react\\uAC00 dom\\uC744 \\uADF8\\uB9AC\\uACE0 \\uC5C5\\uB370\\uC774\\uD2B8\\uD560 \\uB54C\\uC5D0\\uB294 React\\uC758 Element\\uC758 \\uC885\\uB958\\uC640 \\uC21C\\uC11C \\uB4F1\\uC744 \\uACE0\\uB824\\uD574\\uC11C \\uC774\\uC804\\uC758 React Element\\uB97C \\uADF8\\uB300\\uB85C \\uC720\\uC9C0\\uD558\\uACE0 \\uC0AC\\uC6A9\\uD560\\uC9C0 \\uC0C8\\uB85C \\uB9CC\\uB4E4\\uC9C0\\uB97C \\uACB0\\uC815\\uD558\\uAC8C \\uB429\\uB2C8\\uB2E4. \\uADF8\\uB807\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uAC01 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uC21C\\uC11C\\uB97C \\uC720\\uC9C0\\uD55C\\uCC44\\uB85C \\uB3D9\\uC77C\\uD55C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC0AC\\uC6A9\\uD558\\uAC8C \\uB418\\uBA74 \\uD398\\uC774\\uC9C0\\uAC00 \\uBCC0\\uACBD\\uB420 \\uB54C\\uC5D0\\uB3C4 \\uB3D9\\uC77C\\uD55C state\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294 persistent layout\\uC744 \\uAD6C\\uD604\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC790\\uC138\\uD55C \\uB0B4\\uC6A9\\uC740 \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/basic-features/layouts\",children:\"nextjs \\uBB38\\uC11C \\uB9C1\\uD06C\"}),\"\\uC5D0\\uC11C \\uC790\\uC138\\uD788 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// pages/_app.tsx\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"MyApp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" pageProps \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Use the layout defined at the page level, if available\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Layout\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Layout\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"??\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" children \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" children\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ReactNode\"})}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"children\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"})]}),\" \",(0,n.jsxs)(e.span,{className:\"token spread\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),\"pageProps\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// pages/index.tsx\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Layout\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../components/layout'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"NestedLayout\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../components/nested-layout'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Page\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"Hello Word\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Page\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method function-variable method-variable\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Layout\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Layout\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" children \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"nav\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"NavBar\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"nav\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"main\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"children\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"main\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"env-envlocal\\uC758-\\uC0AC\\uC6A9\",children:[(0,n.jsx)(e.a,{href:\"#env-envlocal\\uC758-\\uC0AC\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\".env, .env.local\\uC758 \\uC0AC\\uC6A9\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uC11C\\uBE44\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uBA74\\uC11C dotenv\\uC640 \\uAC19\\uC774 \\uD658\\uACBD\\uBCC0\\uC218\\uB97C \\uAD00\\uB9AC\\uD558\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC0AC\\uC6A9\\uD574\\uBCF4\\uC2E0 \\uACBD\\uD5D8\\uC774 \\uC788\\uC73C\\uC2E4 \\uC218\\uB3C4 \\uC788\\uC744\\uD150\\uB370, nextjs\\uC5D0\\uC11C\\uB294 \\uAD00\\uB828 \\uAE30\\uB2A5\\uC744 \\uC870\\uAE08 \\uB354 \\uB514\\uD14C\\uC77C\\uD558\\uAC8C \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4. \\uB450 \\uAC00\\uC9C0\\uB85C \\uB098\\uB220\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294\\uB370 \\uAD00\\uB828\\uB41C \\uB0B4\\uC6A9\\uC744 \\uAC04\\uB2E8\\uD558\\uAC8C \\uC124\\uBA85\\uD574\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uB2E4\\uC74C \\uC124\\uBA85\\uC740 \\uC2E4\\uC81C \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/basic-features/environment-variables\",children:\"nextjs \\uACF5\\uC2DD\\uBB38\\uC11C\"}),\"\\uC5D0\\uB3C4 \\uC790\\uC138\\uD788 \\uC124\\uBA85\\uB418\\uC5B4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\".env, .env.development, .env.staging\\uACFC \\uAC19\\uC774 \\uD658\\uACBD\\uC5D0 \\uB530\\uB77C\\uC11C \\uC0AC\\uC6A9\\uB418\\uB294 \\uD658\\uACBD\\uBCC0\\uC218\\uB97C \\uC9C0\\uC815\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. local\\uC774\\uB77C\\uB294 suffix\\uAC00 \\uC5C6\\uB294 \\uACBD\\uC6B0\\uB294 repository\\uC5D0 \\uD3EC\\uD568\\uB418\\uACE0 \\uB178\\uCD9C\\uB418\\uC5B4\\uB3C4 \\uAD1C\\uCC2E\\uC740 \\uD658\\uACBD\\uBCC0\\uC218\\uB9CC\\uC744 \\uD3EC\\uD568\\uC2DC\\uCF1C\\uC57C\\uD569\\uB2C8\\uB2E4.\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\".env.local, .env.development.local\\uACFC \\uAC19\\uC774 local\\uC774\\uB77C\\uB294 \\uB2E8\\uC5B4\\uAC00 \\uD3EC\\uD568\\uC774 \\uB418\\uBA74 repository\\uC5D0 \\uD3EC\\uD568\\uB418\\uC9C0 \\uC54A\\uB294 \\uD658\\uACBD\\uBCC0\\uC218\\uB97C \\uC0AC\\uC6A9\\uD560 \\uAC83\\uC784\\uC744 \\uC120\\uC5B8\\uD558\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4. \\uC2E4\\uC81C \\uBE4C\\uB4DC\\uC2DC\\uC5D0 \\uC774\\uB7F0 \\uAC12\\uB4E4\\uC740 Github secrets\\uB4F1\\uC744 \\uC774\\uC6A9\\uD574 \\uBE4C\\uB4DC \\uC2DC\\uC5D0\\uB9CC \\uCD94\\uAC00\\uD574\\uC11C \\uC0AC\\uC6A9\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4.\"})})]}),(0,n.jsxs)(e.h3,{id:\"nextrouter\\uB97C-\\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C-\\uC8FC\\uC758\\uD574\\uC57C\\uD560-\\uAC83\",children:[(0,n.jsx)(e.a,{href:\"#nextrouter\\uB97C-\\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C-\\uC8FC\\uC758\\uD574\\uC57C\\uD560-\\uAC83\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"next/router\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C \\uC8FC\\uC758\\uD574\\uC57C\\uD560 \\uAC83\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0nextjs\\uB85C \\uAC1C\\uBC1C\\uD558\\uBA74\\uC11C \",(0,n.jsx)(e.code,{children:\"next/router\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C \\uBA87 \\uAC00\\uC9C0 \\uC8FC\\uC758\\uD574\\uC57C\\uD560 \\uC0AC\\uD56D\"}),\"\\uB4E4\\uC774 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uCCAB \\uBC88\\uC9F8\\uB85C next\\uB294 page\\uB97C \\uC774\\uB3D9\\uD558\\uBA74\\uC11C SPA\\uCC98\\uB7FC \\uBC14\\uB85C\\uBC14\\uB85C \\uD398\\uC774\\uC9C0\\uAC00 \\uBC14\\uB00C\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4. \\uC65C\\uB0D0\\uD558\\uBA74 getServerSideProps\\uB97C \\uC9C0\\uC815\\uB418\\uC5B4\\uC788\\uB294 \\uACBD\\uC6B0 \\uD574\\uB2F9 \\uD568\\uC218 \\uC2E4\\uD589\\uC774 \\uC644\\uB8CC\\uB418\\uACE0 \\uD398\\uC774\\uC9C0\\uB97C render\\uD558\\uAE30 \\uC2DC\\uC791\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uADF8\\uB807\\uACE0 getServerSideProps\\uAC00 \\uC5C6\\uB354\\uB77C\\uB3C4 pages\\uBCC4\\uB85C asset\\uD30C\\uC77C\\uB4E4\\uC774 \\uB530\\uB85C \\uC0DD\\uC131\\uC774 \\uB418\\uAE30 \\uB54C\\uBB38\\uC5D0 asset\\uB4E4\\uC744 \\uB2E4\\uC6B4 \\uBC1B\\uB294\\uB370\\uC5D0\\uB3C4 \\uC2DC\\uAC04\\uC774 \\uAC78\\uB9B4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \"}),\"(\\uBB3C\\uB860, production\\uC571\\uC5D0\\uC11C\\uB294 nextjs\\uAC00 next/link\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC798 prefetch\\uB97C \\uD574\\uC8FC\\uACE0 \\uC9C1\\uC811 \\uCF54\\uB4DC\\uB85C prefetch\\uB97C \\uD560 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC744 \\uC81C\\uACF5\\uD558\\uAE30\\uB3C4 \\uD569\\uB2C8\\uB2E4.) \\uADF8\\uB798\\uC11C \\uC800\\uB294 \",(0,n.jsx)(e.code,{children:\"\\uC720\\uC800\\uC5D0\\uAC8C page\\uAC00 \\uBCC0\\uACBD\\uB418\\uACE0 \\uC788\\uB2E4\\uB294 \\uC0AC\\uC2E4\\uC744 \\uC798 \\uC804\\uB2EC \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D nprogress\\uB77C\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C router\\uC758 \\uC774\\uBCA4\\uD2B8\\uAC00 \\uBC1C\\uC0DD\\uD560 \\uB54C\\uB9C8\\uB2E4 loading bar\\uB97C \\uCD5C\\uC0C1\\uB2E8\\uC5D0 \\uBCF4\\uC5EC\\uC8FC\\uB3C4\\uB85D \\uC791\\uC5C5\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4. (\",(0,n.jsx)(e.a,{href:\"https://github.com/rstacruz/nprogress\",children:\"nprogress\"}),\")\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uB450 \\uBC88\\uC9F8\\uB85C, \",(0,n.jsx)(e.code,{children:\"next/router\\uC758 useRouter\\uC5D0\\uC11C return\\uB418\\uB294 query object\\uAC00 server-side rendering \\uD398\\uC774\\uC9C0\\uAC00 \\uC544\\uB2CC \\uACBD\\uC6B0\\uC5D0\\uB294 \\uCC98\\uC74C\\uC5D0\\uB294 empty object\\uB85C \\uB0B4\\uB824\\uC635\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uC2E4\\uC81C pageParams\\uACFC querystring\\uC5D0 \\uC811\\uADFC\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 useRouter().isReady\\uAC12\\uC774 true\\uAC00 \\uB41C \\uC774\\uD6C4\\uC5D0 \\uD574\\uB2F9 \\uAC12\\uC744 \\uC0AC\\uC6A9\"}),\"\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC, \\uC800\\uB294 \\uC704 \\uB0B4\\uC6A9\\uC774 \\uC65C \\uADF8\\uB807\\uAC8C \\uAD6C\\uD604\\uB418\\uC5C8\\uB294\\uC9C0\\uC5D0 \\uB300\\uD55C \\uC774\\uC720\\uB294 \\uC815\\uD655\\uD788 \\uBAA8\\uB974\\uACE0 \\uC774\\uD574\\uAC00 \\uC798 \\uC548\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uB610\\uD55C, React Suspense For data fetching\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uCC98\\uC74C rendering\\uC5D0\\uC11C\\uBD80\\uD130 \\uD574\\uB2F9 \\uAC12\\uC774 \\uD544\\uC694\\uD588\\uB294\\uB370\\uC694. \\uADF8\\uB798\\uC11C \\uC9C1\\uC811 \",(0,n.jsx)(e.code,{children:\"router.asPath\"}),\"\\uC640 \",(0,n.jsx)(e.code,{children:\"window.location\"}),\"\\uC5D0 \\uC874\\uC7AC\\uD558\\uB294 \\uAC12\\uB4E4\\uC744 \\uB9E4\\uD551\\uD574\\uC11C \\uC9C1\\uC811 pageParams\\uC640 queryString\\uC744 \\uCD08\\uAE30 \\uB80C\\uB354\\uB9C1 \\uC2DC\\uC5D0\\uB3C4 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC791\\uC5C5\\uD558\\uAE34 \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uBB54\\uAC00 \\uC774\\uC720\\uAC00 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 nextjs\\uC5D0\\uC11C \\uC704\\uC640 \\uAC19\\uC774 \\uAD6C\\uD604\\uD588\\uC744 \\uAC83 \\uAC19\\uAE34 \\uD55C\\uB370, \\uC6B0\\uC120 \\uC81C\\uAC00 \\uBD88\\uD3B8\\uD574\\uC11C \\uC704\\uC640 \\uAC19\\uC774 \\uAC1C\\uC120\\uD574\\uC11C \\uC0AC\\uC6A9\\uD574\\uBCF4\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-ts\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useRouterQuery\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" router \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useRouter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" React\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"useMemo\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`isReady\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`query\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getRouterParams\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                asPath\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"asPath\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                pathname\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"location\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"pathname\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toSearchObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URLSearchParams\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"location\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"search\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"asPath\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isReady\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"query\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"nextimage\\uB97C-\\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C-\\uC8FC\\uC758\\uD574\\uC57C\\uD560-\\uAC83\",children:[(0,n.jsx)(e.a,{href:\"#nextimage\\uB97C-\\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C-\\uC8FC\\uC758\\uD574\\uC57C\\uD560-\\uAC83\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"next/image\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C \\uC8FC\\uC758\\uD574\\uC57C\\uD560 \\uAC83\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0nextjs\\uC5D0\\uC11C\\uB294 next/image\\uB97C \\uD1B5\\uD574\\uC11C \\uC774\\uBBF8\\uC9C0\\uB97C optimize\\uD560 \\uC218 \\uC788\\uB294 \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uACB0\\uB860\\uC801\\uC73C\\uB85C \\uC800\\uB294 \\uD604\\uC7AC unoptimized\\uB77C\\uB294 props\\uB97C \\uCD94\\uAC00\\uD574\\uC11C optimize\\uD558\\uB294 \\uAE30\\uB2A5\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC9C0\\uB294 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"}),\" \",(0,n.jsx)(e.code,{children:\"image\\uB97C optimize\\uD558\\uB294 \\uC791\\uC5C5\\uACFC html\\uC744 \\uC11C\\uBE59\\uD558\\uB294 \\uC77C\\uC744 \\uD558\\uB098\\uC758 \\uC11C\\uBC84\\uC5D0\\uAC8C \\uB9E1\\uAE30\\uAE30\\uC5D0\\uB294 \\uAF64 \\uBB34\\uB9AC\\uAC00 \\uC788\\uC5B4 \\uBCF4\\uC600\\uACE0, cache\\uAC00 \\uC798\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4\\uBA74 \\uC11C\\uBE44\\uC2A4 \\uC6B4\\uC601\\uC5D0 \\uD070 \\uC601\\uD5A5\\uC744 \\uB07C\\uCE60 \\uC218 \\uC788\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD588\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4. \\uC65C\\uB0D0\\uD558\\uBA74 \\uC774\\uBBF8\\uC9C0\\uAC00 \\uB85C\\uB4DC\\uAC00 \\uC870\\uAE08 \\uC624\\uB798\\uAC78\\uB9AC\\uB294 \\uAC83\\uBCF4\\uB2E4 html\\uC774 \\uC0DD\\uC131\\uC774 \\uC548\\uB418\\uB294\\uAC8C \\uD6E8\\uC52C \\uB354 \\uD06C\\uB9AC\\uD2F0\\uCEEC\\uD55C \\uC624\\uB958\\uC774\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4.\"}),\" \\uC2E4\\uC81C\\uB85C \\uCE90\\uC2DC \\uC815\\uCC45\\uC774 \\uC81C\\uB300\\uB85C \\uC791\\uB3D9\\uD558\\uC9C0 \\uC54A\\uB294 \\uC0C1\\uD669\\uC5D0\\uC11C next/image\\uC758 optimize\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C nextjs \\uC11C\\uBC84\\uC758 cpu\\uAC00 100%\\uB97C \\uCC0D\\uB294 \\uAC83\\uAE4C\\uC9C0 \\uBAA9\\uACA9\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uADF8\\uB798\\uC11C \\uC774\\uBBF8\\uC9C0 \\uCD5C\\uC801\\uD654\\uC5D0 \\uB300\\uD55C \\uC791\\uC5C5\\uC740 \\uC11C\\uBC84\\uAC00 \\uC774\\uBBF8\\uC9C0\\uB97C \\uC5C5\\uB85C\\uB4DC\\uD560 \\uB54C\\uC5D0 \\uC798 \\uD574\\uC904 \\uAC83\\uC744 \\uAE30\\uB300\\uD558\\uACE0 \\uBBFF\\uC73C\\uBA70 \\uC791\\uC5C5\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC2E4\\uC81C\\uB85C nextjs\\uC758 image optimize \\uAE30\\uB2A5\\uC744 production\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 \\uB54C\\uC5D0\\uB294 html \\uC11C\\uBE59\\uD558\\uB294 \\uC11C\\uBC84\\uC5D0\\uC11C \\uC9C1\\uC811 \\uC774 \\uC77C\\uB4E4\\uC744 \\uD558\\uAE30 \\uBCF4\\uB2E4\\uB294 \\uB2E4\\uB978 provider\\uB4E4\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294\\uAC8C \\uB9DE\\uC744 \\uAC83 \\uAC19\\uC740\\uB370 \\uB2E4\\uB978 \\uBD84\\uB4E4\\uC740 \\uC5B4\\uB5BB\\uAC8C \\uC811\\uADFC\\uD558\\uACE0 \\uACC4\\uC2E0\\uC9C0 \\uAD81\\uAE08\\uD558\\uAE34 \\uD569\\uB2C8\\uB2E4. vercel\\uC5D0\\uC11C \\uBC30\\uD3EC\\uD574\\uC11C \\uC0AC\\uC6A9\\uD588\\uC744 \\uB54C\\uC5D0\\uB294 \\uB530\\uB85C optimize\\uD558\\uACE0 \\uC11C\\uBE59\\uD574\\uC8FC\\uB294 worker\\uAC19\\uC740 \\uAC83\\uB4E4\\uC774 \\uB3CC\\uC544\\uAC00\\uB294 \\uAC83\\uCC98\\uB7FC \\uD655\\uC778\\uB429\\uB2C8\\uB2E4.\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"Vercel makes it easy to accomplish ideal loading times and prevent layout shifts for images when deploying Next.js applications by providing you with a built-in next/image component that automatically optimizes your images on demand and serves them from our globally distributed Edge Network.\"})}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uADF8 \\uC774\\uC678\\uC5D0\\uB3C4 \\uADF8\\uB798\\uB3C4 \",(0,n.jsx)(e.code,{children:\"next/image\\uC758 \\uD765\\uBBF8\\uB85C\\uC6B4 \\uC810\\uB4E4\\uC740 \\uCD5C\\uC2E0 image format\\uB4E4(avif, webp)\\uB4F1\\uB3C4 \\uC81C\\uACF5\\uD55C\\uB2E4\\uB294 \\uAC83\\uC774\\uACE0, imagesSize, deviceSizes\\uB4F1\\uC758 \\uC124\\uC815\\uC744 \\uD1B5\\uD574\\uC11C srcset\\uB97C \\uC0DD\\uC131\\uD574\\uC8FC\\uB294 \\uAC83\\uC744 \\uC9C1\\uC811 \\uC124\\uC815\\uD574\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uADF8\\uB9AC\\uACE0 \",(0,n.jsx)(e.code,{children:\"minimumCacheTTL\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C optimized\\uB41C \\uC774\\uBBF8\\uC9C0\\uB4E4\\uC758 cacheTime\\uC744 \\uC870\\uC808\\uD560 \\uC218\\uB3C4 \\uC788\\uC9C0\\uB9CC, nextjs\\uC5D0\\uC11C \\uACB0\\uAD6D image\\uC758 response\\uB97C \\uB3CC\\uB824\\uC904 \\uB54C\\uC5D0 origin\\uC758 cache-control\\uC744 \\uAE30\\uC900\\uC73C\\uB85C \\uB3CC\\uB824\\uC8FC\\uAE30 \\uB54C\\uBB38\\uC5D0 minimumCacheTTL \\uC124\\uC815\\uC740 origin\\uC758 cache-control\\uBCF4\\uB2E4 \\uC6B0\\uC120\\uD560 \\uC218\\uB294 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,n.jsxs)(e.h3,{id:\"nextconfigjs\\uC5D0\\uC11C-headers-\\uC635\\uC158-\\uC0AC\\uC6A9\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#nextconfigjs\\uC5D0\\uC11C-headers-\\uC635\\uC158-\\uC0AC\\uC6A9\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"next.config.js\\uC5D0\\uC11C headers \\uC635\\uC158 \\uC0AC\\uC6A9\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0Part1\\uC5D0\\uC11C\\uB3C4 \\uB9D0\\uD588\\uB358 \\uAC83\\uCC98\\uB7FC \",(0,n.jsx)(e.code,{children:\"cloudFront\\uB294 cache-control header\\uAC00 \\uC5C6\\uC73C\\uBA74 \\uBB34\\uC81C\\uD55C\\uC73C\\uB85C \\uCE90\\uC2F1\\uC744 \\uD55C\\uB2E4. \\uADF8\\uB807\\uAE30 \\uB54C\\uBB38\\uC5D0 nextjs\\uC5D0\\uC11C \\uC544\\uBB34\\uB7F0 \\uC124\\uC815\\uC744 \\uC548\\uD558\\uBA74 html response\\uC5D0 \\uB300\\uD574\\uC11C \\uBB34\\uD55C \\uCE90\\uC2F1\\uC744 \\uD574\\uBC84\\uB9AC\\uAE30\\uB54C\\uBB38\\uC5D0 html response\\uC5D0 \\uB300\\uD574\\uC11C \\uCE90\\uC2DC\\uB97C \\uC544\\uC608 \\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uCF54\\uB4DC \\uCD94\\uAC00\\uAC00 \\uD544\\uC694\\uD588\\uB2E4.\"}),\" \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uCD94\\uAC00\\uD558\\uB354\\uB77C\\uB3C4 assets(js, css)\\uC5D0 \\uB300\\uD55C cache-control\\uC740 nextjs\\uC5D0\\uC11C \\uC54C\\uC544\\uC11C \\uBB34\\uC81C\\uD55C\\uC73C\\uB85C override\\uD574\\uC8FC\\uB2C8 \\uADF8\\uAC83\\uC5D0 \\uB300\\uD574\\uC11C\\uB294 \\uAC71\\uC815 \\uC548\\uD574\\uB3C4 \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"headers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'/:path*'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"headers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"key\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Cache-Control'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'no-cache,no-store,max-age=0,must-revalidate'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"nextconfigjs-assetprefix\\uC758-\\uC0AC\\uC6A9\",children:[(0,n.jsx)(e.a,{href:\"#nextconfigjs-assetprefix\\uC758-\\uC0AC\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"next.config.js assetPrefix\\uC758 \\uC0AC\\uC6A9\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"assetPrefix\\uB77C\\uB294 \\uC124\\uC815\\uC744 \\uC0AC\\uC6A9\\uD558\\uBA74 nextjs \\uC11C\\uBC84\\uC5D0\\uC11C \\uC9C1\\uC811 asset\\uB4E4\\uC744 \\uC11C\\uBE59\\uD558\\uC9C0 \\uC54A\\uACE0 \\uB2E4\\uB978 cdn\\uC5D0\\uC11C assets \\uD30C\\uC77C\\uB4E4\\uC744 \\uC11C\\uBE59\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \",(0,n.jsx)(e.code,{children:\"\\uC774 \\uC124\\uC815\\uC744 \\uD558\\uB294 \\uAC83\\uC774 \\uB354 \\uAD8C\\uC7A5\\uB418\\uB294 \\uC774\\uC720\\uB294 nextjs \\uC11C\\uBC84\\uB294 \\uC2E4\\uC81C\\uB85C \\uC720\\uC800\\uC758 \\uC778\\uC99D \\uB4F1\\uC744 \\uC704\\uD574\\uC11C cookie\\uAC12\\uB4E4 \\uD639\\uC740 querystring \\uAC12\\uB4E4\\uC744 \\uACC4\\uC18D\\uD574\\uC11C \\uB4E4\\uACE0 \\uB2E4\\uB2C8\\uB294\\uB370 \\uC0AC\\uC2E4 assets\\uD30C\\uC77C\\uB4E4\\uC744 \\uC11C\\uBE59\\uD560 \\uB54C\\uC5D0\\uB294 \\uADF8\\uB7F0 \\uAC12\\uB4E4\\uC774 \\uD544\\uC694\\uC5C6\\uC744 \\uC218 \\uC788\\uB294\\uB370 \\uBD88\\uD544\\uC694\\uD55C network resource\\uAC00 \\uB0AD\\uBE44\\uB420 \\uC218 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0\"}),\" \\uB354 \\uCD5C\\uC801\\uC73C\\uB85C \\uC11C\\uBE44\\uC2A4\\uB97C \\uC6B4\\uC601\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 assetPrefix\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uB354 \\uC88B\\uC2B5\\uB2C8\\uB2E4. \\uB610 cloudFront\\uB97C \\uB530\\uB85C \\uC0AC\\uC6A9\\uD574\\uC57C \\uB354 \\uC801\\uC808\\uD55C error pages \\uC124\\uC815 \\uB4F1\\uC744 \\uC138\\uD305\\uD558\\uAE30\\uC5D0 \\uC88B\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.h3,{id:\"\\uC778\\uC99D\\uC744-\\uC5B4\\uB5BB\\uAC8C-\\uD560-\\uC218-\\uC788\\uC744\\uAE4C\",children:[(0,n.jsx)(e.a,{href:\"#\\uC778\\uC99D\\uC744-\\uC5B4\\uB5BB\\uAC8C-\\uD560-\\uC218-\\uC788\\uC744\\uAE4C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC778\\uC99D\\uC744 \\uC5B4\\uB5BB\\uAC8C \\uD560 \\uC218 \\uC788\\uC744\\uAE4C\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"nextjs\\uC5D0\\uC11C\\uB294 \\uC778\\uC99D\\uC744 \\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uACE0 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C\\uB3C4 \\uD655\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4. \\uBCF4\\uD1B5 SPA\\uB97C \\uAC1C\\uBC1C\\uD560 \\uB54C\\uBA74 \\uC778\\uC99D\\uC744 \\uBC1B\\uACE0 token\\uC744 \\uBC1B\\uC544\\uC11C localStroage\\uC5D0 \\uC800\\uC7A5\\uD574\\uB450\\uACE0 \\uADF8 \\uAC12\\uC744 \\uAE30\\uC900\\uC73C\\uB85C \\uB85C\\uADF8\\uC778 \\uC720\\uC9C0\\uB97C \\uAD6C\\uD604\\uD558\\uACE4 \\uD569\\uB2C8\\uB2E4. \\uD558\\uC9C0\\uB9CC nextjs\\uC5D0\\uC11C\\uB294 \\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4 \\uC778\\uC99D\\uC774 \\uD544\\uC694\\uD558\\uAE30 \\uB584\\uBB38\\uC5D0 localStorage\\uB9CC\\uC73C\\uB85C\\uB294 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \",(0,n.jsx)(e.code,{children:\"\\uC800\\uB294 nookies\\uB77C\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C \\uCFE0\\uD0A4 \\uAE30\\uBC18\\uC73C\\uB85C nextjs \\uC11C\\uBC84\\uC5D0\\uC11C\\uB3C4 \\uC778\\uC99D\\uC744 \\uD558\\uACE0 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C\\uB3C4 \\uC778\\uC99D\\uC744 \\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uD639\\uC2DC\\uB098 \\uBAA8\\uB97C \\uC0C1\\uD669\\uC5D0 \\uB300\\uBE44\\uD574\\uC11C fallback\\uC73C\\uB85C \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC5D0\\uC11C localStorage\\uB97C \\uD655\\uC778\\uD574\\uC11C \\uC778\\uC99D\\uC744 \\uD655\\uC778\\uD558\\uACE0 \\uC788\\uAE30\\uB294 \\uD569\\uB2C8\\uB2E4. (\",(0,n.jsx)(e.a,{href:\"https://github.com/maticzav/nookies\",children:\"nookies\"}),\")\"]}),(0,n.jsxs)(e.h2,{id:\"nextjs\\uC640-\\uAC19\\uC774-\\uC0AC\\uC6A9\\uD558\\uACE0-\\uC788\\uB294-\\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\",children:[(0,n.jsx)(e.a,{href:\"#nextjs\\uC640-\\uAC19\\uC774-\\uC0AC\\uC6A9\\uD558\\uACE0-\\uC788\\uB294-\\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"nextjs\\uC640 \\uAC19\\uC774 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB4E4\"]}),(0,n.jsxs)(e.h3,{id:\"react-query\\uB97C-ssr\\uC5D0\\uC11C-\\uD65C\\uC6A9\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#react-query\\uB97C-ssr\\uC5D0\\uC11C-\\uD65C\\uC6A9\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"react-query\\uB97C SSR\\uC5D0\\uC11C \\uD65C\\uC6A9\\uD558\\uAE30\"]}),(0,n.jsx)(e.p,{children:\"\\xA0react-query\\uB97C \\uC560\\uC6A9\\uD574\\uC654\\uC9C0\\uB9CC, SSR\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD55C \\uAC83\\uC740 \\uC774\\uBC88\\uC774 \\uCC98\\uC74C\\uC774\\uC5C8\\uB294\\uB370\\uC694. SSR \\uAD00\\uB828\\uB41C API\\uB098 docs\\uAC00 \\uC874\\uC7AC\\uD55C\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC744 \\uD558\\uC9C0 \\uBABB\\uD558\\uACE0 \\uBB34\\uC791\\uC815 SPA\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB358 \\uBC29\\uC2DD\\uB300\\uB85C react-query\\uB97C \\uC0AC\\uC6A9\\uD558\\uB2E4\\uAC00 \\uBA87\\uAC00\\uC9C0 \\uC2DC\\uD589\\uCC29\\uC624\\uB97C \\uACAA\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"\\uCCAB \\uBC88\\uC9F8\\uB85C\\uB294 \",(0,n.jsx)(e.strong,{children:\"new QueryClient()\\uB97C \\uC5B4\\uB5A4 \\uC2DD\\uC73C\\uB85C \\uC0DD\\uC131\\uD574\\uC11C \\uC0AC\\uC6A9\\uD574\\uC57C\\uD558\\uB294\\uAC00\\uC5D0 \\uB300\\uD55C \\uBB38\\uC81C\"}),\"\\uC785\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uC804\\uC5ED\\uC801\\uC73C\\uB85C new QueryCLient()\\uB97C \\uC791\\uC131\\uD574\\uB450\\uACE0 \\uC0AC\\uC6A9\\uD574\\uB3C4 SPA\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C\\uC5D0\\uB294 user\\uC758 request\\uB9C8\\uB2E4 \\uC0C8\\uB85C\\uC6B4 queryClient\\uAC00 \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uACE0 \\uC0AC\\uC6A9\\uB420 \\uAC83\\uC774 \\uBCF4\\uC7A5\\uB418\\uC5C8\\uC9C0\\uB9CC, nextjs\\uC5D0\\uC11C \\uC804\\uC5ED\\uC801\\uC73C\\uB85C \\uC120\\uC5B8\\uD55C \\uBCC0\\uC218\\uB294 \\uC720\\uC800 request\\uBCC4\\uB85C \\uACF5\\uC720\\uB420 \\uC218 \\uC788\\uB294 \\uAC00\\uB2A5\\uC131\\uC774 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uB9E4\\uBC88 _app.tsx\\uD30C\\uC77C\\uC5D0\\uC11C new QueryClient()\\uB97C \\uC0C8\\uB85C \\uB9CC\\uB4E4\\uC5B4 \\uC918\\uC57C \\uD569\\uB2C8\\uB2E4.\"}),\" \\uC704 \\uB0B4\\uC6A9\\uC740 react-query ssr \\uAD00\\uB828 \\uBB38\\uC11C\\uC5D0 \\uC790\\uC138\\uD788 \\uC791\\uC131\\uB418\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.li,{children:[\"\\uB450 \\uBC88\\uC9F8\\uB85C\\uB294 getServerSideProps\\uC5D0\\uC11C \\uC774\\uBBF8 fetch\\uD574\\uC628 \\uC815\\uBCF4\\uB97C \\uC5B4\\uB5BB\\uAC8C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0 \\uC791\\uC131\\uB418\\uC5B4 \\uC788\\uB294 \",(0,n.jsx)(e.strong,{children:\"useQuery\"}),\"\\uC5D0\\uC11C \\uBC14\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uAC8C \\uB9CC\\uB4E4 \\uC218 \\uC788\\uC744\\uAE4C\\uC5D0 \\uB300\\uD55C \\uACE0\\uBBFC\\uC774\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC774\\uAC83 \\uB610\\uD55C react-query\\uC758 ssr \\uBB38\\uC11C\\uB97C \\uBCF4\\uBA74 \",(0,n.jsx)(e.code,{children:\"getServerSideProps\\uC5D0\\uC11C prefetchQuery\\uB97C \\uD558\\uACE0 _app.tsx\\uC5D0\\uC11C \u003cHydrate /\u003e\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uBC29\\uC2DD\\uC774 \\uC18C\\uAC1C\"}),\"\\uB418\\uC5B4 \\uC788\\uC5C8\\uB294\\uB370 \\uAD00\\uB828 \\uB0B4\\uC6A9\\uC744 \\uC77D\\uC9C0 \\uBABB\\uD588\\uC5C8\\uACE0 \\uB098\\uC911\\uC5D0\\uC57C \\uBC1C\\uACAC\\uD558\\uACE0 \\uC801\\uC6A9\\uD588\\uB358 \\uACBD\\uD5D8\\uC744 \\uD588\\uC2B5\\uB2C8\\uB2E4.\"]})]}),(0,n.jsx)(e.p,{children:\"\\xA0\\uB530\\uB85C \\uACBD\\uD5D8\\uC740 \\uC5C6\\uC9C0\\uB9CC, nextjs\\uB97C \\uB9CC\\uB4E0 vercel\\uC5D0\\uC11C react-query \\uC5ED\\uD560\\uC744 \\uD558\\uB294 swr\\uC774\\uB77C\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uB9CC\\uB4E4\\uC5C8\\uB294\\uB370, nextjs\\uC640 swr\\uAC00 \\uD6E8\\uC52C \\uAD81\\uD568\\uC774 \\uC798\\uB9DE\\uC744 \\uC218\\uB3C4 \\uC788\\uACA0\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC774 \\uB4E4\\uAE34 \\uD588\\uC9C0\\uB9CC, \\uD68C\\uC0AC \\uB0B4\\uBD80\\uC5D0\\uC11C react-query\\uB97C \\uB354 \\uB9CE\\uC774 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uAE30\\uC5D0 \\uC774\\uBC88 nextjs \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0\\uC11C\\uB3C4 react-query\\uB97C \\uC0AC\\uC6A9\\uD558\\uAC8C \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uB2E4\\uC74C\\uC5D0\\uB294 swr\\uB3C4 \\uC0AC\\uC6A9\\uD574\\uBCFC \\uAE30\\uD68C\\uAC00 \\uC788\\uB2E4\\uBA74 \\uD574\\uBCF4\\uBA74 \\uB610 \\uB2E4\\uB978 \\uC88B\\uC740 \\uACBD\\uD5D8\\uC744 \\uD560 \\uC218 \\uC788\\uC9C0 \\uC54A\\uC744\\uAE4C\\uB3C4 \\uC0DD\\uAC01\\uD574\\uBD24\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// _app.tsx\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Hydrate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"QueryClientProvider\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-query'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"MyApp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" pageProps \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\uB9E4\\uBC88 user request\\uB9C8\\uB2E4 QueryClient\\uB97C \\uC0C8\\uB85C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4. (React useState lazy initialization)\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"queryClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClient\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"fallback\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClientProvider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"client\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"queryClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token comment\",children:\"/* Hydrate \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C state\\uB97C \\uC8FC\\uC785 */\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Hydrate\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"state\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"pageProps\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?.\"}),\"dehydratedState\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"})]}),\" \",(0,n.jsxs)(e.span,{className:\"token spread\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),\"pageProps\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Hydrate\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"QueryClientProvider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"React.Suspense\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`  );\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`}\n`})})]})}),(0,n.jsxs)(e.h3,{id:\"openapi-typescript\\uB85C-api\\uC758-type-generation\\uC744-\\uC790\\uB3D9\\uD654\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#openapi-typescript\\uB85C-api\\uC758-type-generation\\uC744-\\uC790\\uB3D9\\uD654\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"openapi-typescript\\uB85C api\\uC758 type generation\\uC744 \\uC790\\uB3D9\\uD654\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0API\\uC5D0\\uC11C \\uB370\\uC774\\uD130\\uB97C \\uBC1B\\uC544\\uC62C \\uB54C\\uC5D0 \\uC11C\\uBC84\\uAC00 graphql\\uB97C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC9C0 \\uC54A\\uB2E4\\uBA74 type\\uC744 \\uC9C1\\uC811 \\uC791\\uC131\\uD574\\uC918\\uC57C\\uD558\\uB294 \\uC77C\\uB4E4\\uC774 \\uBC1C\\uC0DD\\uD558\\uB294\\uB370\\uC694. \\uC774\\uBC88 \\uD504\\uB85C\\uC81D\\uD2B8\\uB3C4 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uC600\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.code,{children:\"API\\uB294 rest\\uB85C \\uAD6C\\uC131\\uB418\\uC5B4 \\uC788\\uC5C8\\uACE0, typescript\\uB97C \\uC4F0\\uB294 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC5D0\\uC11C type checking\\uC744 \\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC9C1\\uC811 typing\\uC744 \\uC791\\uC131\\uD574\\uC918\\uC57C\\uB9CC \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC774\\uB7F0 \\uBD88\\uD544\\uC694\\uD55C \\uC791\\uC5C5\\uB4E4\\uC744 \\uC904\\uC774\\uAE30 \\uC704\\uD574\\uC11C \\uC774\\uBC88\\uC5D0 \\uB3C4\\uC785\\uD55C \\uAC83\\uC774 openapi-typescript\\uB77C\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C API\\uC11C\\uBC84\\uC5D0\\uC11C swagger\\uC758 \\uBA54\\uD0C0\\uC815\\uBCF4\\uB97C \\uC774\\uC6A9\\uD574\\uC11C \\uBC14\\uB85C type\\uC744 generation\\uC744 \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC704 \\uBC29\\uC2DD\\uC744 \\uB3C4\\uC785\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uBC31\\uC5D4\\uB4DC\\uD300\\uC5D0\\uC11C\\uB3C4 swagger \\uC815\\uBCF4\\uB97C yml\\uD639\\uC740 json\\uC73C\\uB85C \\uBF51\\uC544\\uC904 \\uC218 \\uC788\\uB294 endpoint\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC918\\uC57C\\uD558\\uB294 \\uC218\\uACE0\\uB97C \\uD574\\uC8FC\\uC5B4\\uC57C \\uD558\\uB294\\uB370\\uC694. \\uB2E4\\uB978 \\uD300\\uC5D0\\uC11C\\uB3C4 \\uBC31\\uC5D4\\uB4DC\\uD300\\uACFC \\uB17C\\uC758\\uC2DC \\uC774\\uAC83\\uC774 \\uD504\\uB860\\uD2B8\\uD300\\uC5D0\\uAC8C \\uC5BC\\uB9C8\\uB098 \\uD070 \\uB3C4\\uC6C0\\uC774 \\uB418\\uB294\\uC9C0\\uB97C \\uC798 \\uC124\\uB4DD\\uD558\\uACE0 \\uD560 \\uC218 \\uC788\\uB2E4\\uBA74 \\uAD49\\uC7A5\\uD788 \\uC88B\\uC744 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uC6B0\\uC120, \\uC704 \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uC131\\uACF5\\uD558\\uACE0 \",(0,n.jsx)(e.strong,{children:\"openapi-typesciprt\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C type\\uC744 \\uB9CC\\uB4E4\\uC5C8\\uB2E4\\uACE0 \\uD574\\uB3C4 \\uC870\\uAE08 \\uBD88\\uD3B8\\uD588\\uB358 \\uC810\\uC740 \\uB9CC\\uB4E4\\uC5B4\\uC900 type\\uC758 \\uD615\\uD0DC\\uAC00 \\uAF64\\uB098 \\uB9CE\\uC774 nested \\uB418\\uC5B4\\uC788\\uB294 object\\uC758 \\uD615\\uD0DC\\uC600\\uACE0, \\uC870\\uAE08 \\uB354 \\uC27D\\uAC8C \\uC6D0\\uD558\\uB294 type\\uB4E4\\uC5D0 \\uC811\\uADFC\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC88B\\uC740 \\uBC29\\uBC95\\uC774 \\uC5C6\\uC744\\uAE4C \\uC0DD\\uAC01\\uD558\\uB2E4\\uAC00 typescript utility library\\uC778 \",(0,n.jsx)(e.code,{children:\"ts-toolbelt\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C \\uD544\\uC694\\uD55C type\\uB4E4\\uC744 \\uC870\\uAE08 \\uB354 \\uC27D\\uAC8C \\uC5BB\\uACE0 \\uD65C\\uC6A9\\uD560 \\uC218 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uAD00\\uB828\\uD574\\uC11C \\uBA87 \\uAC00\\uC9C0\\uB9CC \\uC801\\uC5B4\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"O\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'ts-toolbelt'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" components\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" paths \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'~/types/generated'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAIMethods\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'get'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'put'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'post'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'delete'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"|\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'patch'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// (O.Selectkeys \\uC0AC\\uC6A9) \\uD2B9\\uC815 OAIMehotds\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 path keys\\uB4E4\\uC758 \\uD0C0\\uC785\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[\"OAIPathKeysByMethod\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"TMethod \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" OAIMethods\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"O\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SelectKeys\"})}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  paths\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Record\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TMethod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"unknown\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// ex) get endpoint\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294 \\uBAA8\\uB4E0 endpoint\\uB4E4\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"GetPathKeys\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"OAIPathKeysByMethod\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'get'\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// (O.Path \\uC0AC\\uC6A9) \\uD2B9\\uC815 path\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 pageParams\\uB4E4\\uC744 \\uAC00\\uC838\\uC624\\uB294 type\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token class-name\",children:(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[\"OAIPathParameters\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"TPath \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" OAIPathKeys\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" TMethod \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" OAIMethods\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"O\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Path\"})}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  paths\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TPath\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TMethod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'parameters'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'path'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// (O.Path \\uC0AC\\uC6A9) \\uD2B9\\uC815 path\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 queryString\\uB4E4\\uC744 \\uAC00\\uC838\\uC624\\uB294 type\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token class-name\",children:(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[\"OAIQueryParameters\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"TPath \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" OAIPathKeys\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" TMethod \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" OAIMethods\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"O\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Path\"})}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  paths\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TPath\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TMethod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'parameters'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'query'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"react-query-immer\\uB97C-\\uC0AC\\uC6A9\\uD574\\uC11C-optimistic-update-\\uAD6C\\uD604\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#react-query-immer\\uB97C-\\uC0AC\\uC6A9\\uD574\\uC11C-optimistic-update-\\uAD6C\\uD604\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"react-query, immer\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C optimistic update \\uAD6C\\uD604\\uD558\\uAE30\"]}),(0,n.jsx)(e.p,{children:\"\\xA0\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0\\uC11C \\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uB2F4\\uAE34 item\\uB4E4\\uC758 \\uC218\\uB7C9 \\uBCC0\\uACBD, \\uCCB4\\uD06C\\uC0C1\\uD0DC \\uB4F1\\uC744 browser\\uC758 \\uC0C1\\uD0DC\\uC5D0\\uC11C\\uB9CC \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C \\uC11C\\uBC84\\uC5D0 \\uAE30\\uB85D\\uC744 \\uD558\\uACE0 \\uC11C\\uBC84\\uC758 \\uB370\\uC774\\uD130\\uC5D0 \\uC758\\uC874\\uD574\\uC11C \\uD398\\uC774\\uC9C0\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC57C \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370, \\uC218\\uB7C9\\uC744 \\uBCC0\\uACBD\\uD558\\uAC70\\uB098 checkbox \\uCCB4\\uD06C\\uB97C \\uD560 \\uB54C\\uB9C8\\uB2E4 API call\\uC744 \\uD558\\uAC8C \\uB418\\uBA74 \\uBE60\\uB974\\uAC8C input\\uC5D0 \\uB300\\uD55C feedback\\uC744 \\uBC1B\\uACE0 \\uC2F6\\uC5B4\\uD558\\uB294 \\uC720\\uC800\\uC758 \\uC785\\uC7A5\\uC5D0\\uC11C\\uB294 \\uB9E4\\uBC88 \\uC218\\uB7C9 \\uBCC0\\uACBD\\uC744 \\uD558\\uAC70\\uB098 \\uCCB4\\uD06C\\uBC15\\uC2A4\\uC5D0 \\uCCB4\\uD06C\\uB97C \\uD560 \\uB54C\\uB9C8\\uB2E4 \\uB85C\\uB529 \\uD654\\uBA74\\uC744 \\uBCF4\\uC5EC\\uC8FC\\uB294 \\uAC83\\uC740 \\uC88B\\uC740 UX\\uAC00 \\uC544\\uB2C8\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.p,{children:\"\\xA0\\uC704 \\uC0C1\\uD669\\uC744 \\uD574\\uACB0\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC0DD\\uAC01\\uD588\\uB358 \\uBC29\\uBC95\\uC740 \\uB2E4\\uC74C \\uB450 \\uAC00\\uC9C0\\uC815\\uB3C4\\uC600\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"optimistic update\\uB97C \\uAD6C\\uD604\\uD558\\uC5EC \\uB9E4\\uBC88 API\\uB97C \\uBCF4\\uB0B4\\uC9C0\\uB9CC, API\\uC758 \\uACB0\\uACFC\\uC640 \\uC0C1\\uAD00\\uC5C6\\uC774 \\uC6B0\\uC120 \\uC608\\uC0C1\\uB418\\uB294 \\uACB0\\uACFC\\uB97C \\uBC18\\uC601\\uD558\\uACE0 \\uC5F0\\uC18D\\uC801\\uC778 \\uC694\\uCCAD\\uC774 \\uB05D\\uB0AC\\uC744 \\uB54C\\uC5D0 \\uC11C\\uBC84\\uC5D0 \\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C \\uD655\\uC778\\uD558\\uC5EC UI\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8\\uD569\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.li,{children:\"\\uD639\\uC740 \\uCD08\\uAE30\\uAC12\\uC744 \\uC11C\\uBC84\\uC5D0\\uC11C \\uBC1B\\uC544\\uC640\\uC11C \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC758 state\\uC5D0 \\uC800\\uC7A5\\uD574\\uB450\\uACE0, \\uADF8 \\uC774\\uD6C4\\uC758 \\uB3D9\\uC791\\uB4E4\\uC740 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC5D0\\uC11C\\uB9CC \\uBCC0\\uACBD\\uC744 \\uC2DC\\uD0A4\\uB2E4\\uAC00 \\uD2B9\\uC815 \\uC2DC\\uC810\\uC5D0 \\uC11C\\uBC84\\uC5D0 \\uC2F1\\uD06C\\uB97C \\uC2DC\\uD0B5\\uB2C8\\uB2E4.\"})]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uCD08\\uAE30\\uC5D0\\uB294 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC5D0\\uC11C state\\uB97C \\uAD00\\uB9AC\\uD558\\uB294 \\uBC29\\uD5A5\\uC73C\\uB85C \\uD588\\uC5C8\\uC9C0\\uB9CC \",(0,n.jsx)(e.code,{children:\"react-query\\uC758 \\uD2B9\\uC131\\uC0C1 cache\\uAC00 \\uC788\\uC744 \\uC218 \\uC788\\uACE0 \\uCD08\\uAE30 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8 state\\uB97C init\\uD560 \\uB54C\\uC5D0 \\uCE90\\uC2DC\\uC5D0 \\uB4E4\\uC5B4\\uC788\\uB358 data\\uB97C \\uAE30\\uC900\\uC73C\\uB85C state\\uB97C \\uC138\\uD305\\uD574\\uBC84\\uB9AC\\uAE30 \\uB584\\uBB38\\uC5D0 \\uADF8\\uAC78 \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uB294 \\uCF54\\uB4DC \\uB4F1\\uC744 \\uCD94\\uAC00\\uD574\\uC918\\uC57C\\uD558\\uB294 \\uB4F1 \\uCC98\\uB9AC\\uD574\\uC57C \\uD558\\uB294 \\uBC29\\uC2DD\\uC774 \\uBCF5\\uC7A1\\uD574\\uC9C0\\uAE30\\uB3C4 \\uD588\\uACE0 data\\uC758 source\\uB97C react-query\\uB85C \\uD1B5\\uC77C\\uD558\\uACE0 \\uC2F6\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C react-query\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 API\\uC911\\uC5D0\\uC11C onMutate, onSettled, cancelQueries, invalidateQueries\\uB4F1\\uC744 \\uD65C\\uC6A9\\uD558\\uC5EC optimistic update\\uB97C \\uAD6C\\uD604\\uD558\\uB294 \\uAC83\\uC73C\\uB85C \\uBC29\\uD5A5\\uC73C\\uB85C \\uC7A1\\uC558\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB9AC\\uACE0 \",(0,n.jsx)(e.code,{children:\"data\\uAC00 \\uAF64 nested\\uB418\\uC5B4 \\uC788\\uB294 Object\\uC600\\uAE30\\uC5D0 \\uD574\\uB2F9 Object\\uB97C immutable\\uD558\\uAC8C \\uC5C5\\uB370\\uC774\\uD2B8\\uB97C \\uCF54\\uB4DC\\uB97C \\uAE38\\uAC8C \\uC4F0\\uC9C0 \\uC54A\\uACE0 \\uC791\\uC5C5\\uD558\\uAE30 \\uC704\\uD574\\uC11C immer \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB974 \\uC0AC\\uC6A9\\uD574\\uC11C immutable\\uD558\\uAC8C \\uC5C5\\uB370\\uC774\\uD2B8\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4. (\",(0,n.jsx)(e.a,{href:\"https://react-query.tanstack.com/guides/optimistic-updates\",children:\"react-query optimistic update\"}),\" / \",(0,n.jsx)(e.a,{href:\"https://github.com/immerjs/immer\",children:\"immer\"}),\")\"]}),(0,n.jsxs)(e.h3,{id:\"react-virtuoso\\uB97C-\\uC0AC\\uC6A9\\uD574\\uC11C-\\uBE60\\uB978-\\uBB34\\uD55C\\uC2A4\\uD06C\\uB864\\uB9C1-\\uB9AC\\uC2A4\\uD2B8\\uB97C-\\uAD6C\\uD604\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#react-virtuoso\\uB97C-\\uC0AC\\uC6A9\\uD574\\uC11C-\\uBE60\\uB978-\\uBB34\\uD55C\\uC2A4\\uD06C\\uB864\\uB9C1-\\uB9AC\\uC2A4\\uD2B8\\uB97C-\\uAD6C\\uD604\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"react-virtuoso\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uBE60\\uB978 \\uBB34\\uD55C\\uC2A4\\uD06C\\uB864\\uB9C1 \\uB9AC\\uC2A4\\uD2B8\\uB97C \\uAD6C\\uD604\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uC0C1\\uD488\\uBAA9\\uB85D \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C\\uB294 \\uBB34\\uD55C\\uC2A4\\uD06C\\uB864\\uB9C1 \\uB9AC\\uC2A4\\uD2B8\\uB97C \\uAD6C\\uD604\\uD574\\uC57C\\uD558\\uB294 \\uC774\\uC288\\uAC00 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uBB34\\uD55C\\uC2A4\\uD06C\\uB864\\uB9C1 \\uB9AC\\uC2A4\\uD2B8\\uB97C \\uAD6C\\uD604\\uD560 \\uB54C\\uC5D0 virtualized list\\uAC00 \\uC544\\uB2CC \\uADF8\\uB0E5 \\uB3D4\\uC744 \\uACC4\\uC18D \\uCD94\\uAC00\\uD558\\uB294 \\uBC29\\uD5A5\\uC73C\\uB85C \\uADF8\\uB9AC\\uAC8C \\uB418\\uBA74 dom\\uC774 \\uAD49\\uC7A5\\uD788 \\uBB34\\uAC70\\uC6CC\\uC9C0\\uACE0 \\uC5C5\\uB370\\uC774\\uD2B8\\uAC00 \\uB290\\uB824\\uC9C0\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uD754\\uD788 virutlized list\\uB97C \\uAD6C\\uD604\\uD569\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uC774\\uC804\\uC5D0\\uB3C4 \\uC0AC\\uC6A9\\uD574\\uBCF8 \\uACBD\\uD5D8\\uC774 \\uC788\\uB358 react-virtualized\\uB77C\\uB294 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uCC98\\uC74C\\uC5D0 \\uAD6C\\uD604\\uD558\\uB824\\uACE0 \\uD588\\uB294\\uB370, \\uC774 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uC758 \\uACBD\\uC6B0 window scroll\\uC5D0 \\uB9DE\\uAC8C \\uAD6C\\uD604\\uD558\\uB294 API\\uAC00 \\uB530\\uB85C \\uC5C6\\uC5C8\\uACE0 \\uB2E4\\uB978 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uAC19\\uC774 \\uD63C\\uC6A9\\uD574\\uC11C \\uC0AC\\uC6A9\\uD574\\uC57C\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \",(0,n.jsx)(e.code,{children:\"\\uB3D9\\uB8CC\\uB85C\\uBD80\\uD130 \\uB354 API\\uAC00 \\uAC04\\uB2E8\\uD558\\uACE0 \\uC88B\\uB2E4\\uACE0 \\uCD94\\uCC9C\\uBC1B\\uC740 react-virtuoso\\uB97C \\uC54C\\uAC8C \\uB418\\uC5C8\\uACE0 \\uD574\\uB2F9 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC870\\uAE08 \\uB354 \\uC218\\uC6D4\\uD558\\uAC8C \\uAD6C\\uD604\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uCC98\\uC74C\\uC5D0\\uB294 API\\uAC00 \\uAF64\\uB098 \\uD3B8\\uD558\\uACE0 \\uC26C\\uC6CC\\uC11C \\uB9CC\\uC871\\uC2A4\\uB7FD\\uAC8C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \",(0,n.jsx)(e.code,{children:\"\\uAC11\\uC790\\uAE30 react-virtuoso\\uAC00 SSR\\uC5D0\\uC11C\\uB294 render\\uAC00 \\uC548\\uB418\\uB294 \\uAC83\\uC744 \\uBC1C\\uACAC\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC0C1\\uD488 \\uBAA9\\uB85D\\uC774\\uC57C\\uB9D0\\uB85C SEO\\uAC00 \\uC911\\uC694\\uD55C \\uD398\\uC774\\uC9C0\\uC77C \\uC218 \\uC788\\uB294\\uB370 react-virtuoso\\uAC00 \\uC544\\uBB34\\uB9AC \\uC88B\\uB354\\uB77C\\uB3C4 SSR\\uC744 \\uC2DC\\uC791\\uD55C \\uC774\\uC720\\uC640 \\uB354 \\uC9C1\\uACB0\\uB41C \\uC774 \\uC774\\uC810\\uC744 \\uD3EC\\uAE30\\uD560 \\uC218\\uAC00 \\uC5C6\\uC5B4\\uC11C \\uC774\\uB9AC\\uC800\\uB9AC \\uCC3E\\uC544\\uBD24\\uB294\\uB370 \\uCC98\\uC74C\\uC5D0\\uB294 \\uBABB\\uCC3E\\uB2E4\\uAC00, \\uB098\\uC911\\uC5D0\\uC57C initialCount\\uC640 FixedItemHeight\\uB77C\\uB294 props\\uB97C \\uC0AC\\uC6A9\"}),\"\\uD574\\uC11C SSR\\uC5D0\\uC11C\\uB3C4 \\uD544\\uC694\\uD55C \\uB9CC\\uD07C \\uC798 render\\uB418\\uB3C4\\uB85D \\uB9CC\\uB4E4 \\uC218 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. (\",(0,n.jsx)(e.a,{href:\"https://virtuoso.dev/virtuoso-api-reference/#virtuoso-properties\",children:\"react-virtuoso\"}),\")\"]}),(0,n.jsxs)(e.h3,{id:\"usequery\\uC758-refetchonmount-refethconwindwofocus-\\uD65C\\uC6A9\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#usequery\\uC758-refetchonmount-refethconwindwofocus-\\uD65C\\uC6A9\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"useQuery\\uC758 refetchOnMount, refethcOnWindwoFocus \\uD65C\\uC6A9\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0useQuery\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C \",(0,n.jsx)(e.code,{children:\"react-query staleTime\\uC758 \\uAE30\\uBCF8\\uAC12\\uC778 0\\uC744 \\uC0AC\\uC6A9\\uD558\\uAE30 \\uBCF4\\uB2E4 staleTime\\uC744 \\uC870\\uAE08 \\uB192\\uC740 \\uAC12\\uC744 \\uC8FC\\uACE0 \\uC815\\uB9D0\\uB85C \\uBCC0\\uD654\\uAC00 \\uD544\\uC694\\uD55C \\uAC12\\uC5D0 \\uB300\\uD574\\uC11C\\uB9CC invalidate\\uD574\\uC8FC\\uB294 \\uBC29\\uC2DD\\uC73C\\uB85C \\uC811\\uADFC\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB7F0\\uB370 \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C \",(0,n.jsx)(e.code,{children:\"\\uB2E4\\uB978 \\uD398\\uC774\\uC9C0\\uC758 \\uD2B9\\uC815 \\uC561\\uC158\\uC744 \\uD1B5\\uD574\\uC11C \\uBCC0\\uACBD\\uC774 \\uB420 \\uC218 \\uC788\\uB294 query\\uB4E4\\uC758 \\uACBD\\uC6B0\\uB294 recthOnMount, refetchOnWindowFocus\\uB97C \\uD0B4\\uC73C\\uB85C\\uC368 \\uCD5C\\uC0B0\\uAC12\\uC744 \\uCD5C\\uB300\\uD55C \\uC720\\uC9C0\\uD558\\uB3C4\\uB85D \\uD558\\uB294 \\uBC29\\uD5A5\\uC73C\\uB85C \\uC811\\uADFC\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC5EC\\uB7EC \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uACC4\\uC18D\\uD574\\uC11C \\uC5B4\\uB5A4 query\\uB4E4\\uC744 invalidate\\uD574\\uC57C\\uD558\\uB294 \\uC9C0\\uB97C \\uD56D\\uC0C1 \\uC798 \\uAE30\\uC5B5\\uD558\\uAE30\\uAC00 \\uC5B4\\uB835\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4.\"}),\" \\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC758 \\uC804\\uCCB4 \\uC0C1\\uD488 \\uBAA9\\uB85D\\uB4E4\\uC5D0 \\uB300\\uD55C API, \\uC7A5\\uBC14\\uAD6C\\uB2C8 \\uC0C1\\uD488 \\uBAA9\\uB85D\\uC758 \\uAC00\\uACA9\\uC744 \\uACC4\\uC0B0\\uD558\\uB294 API\\uB4F1\\uC740 \\uB2E4\\uB978 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uC0C1\\uD488\\uC744 \\uCD94\\uAC00\\uD560 \\uB54C\\uB9C8\\uB2E4 \\uC0C8\\uB85C invalidate\\uB97C \\uD574\\uC918\\uC57C\\uB9CC \\uD588\\uB294\\uB370 \\uAC01\\uAC01 invalidate\\uD558\\uAE30\\uBCF4\\uB2E4\\uB294 refetch\\uD558\\uB3C4\\uB85D \\uD558\\uB294 \\uAC83\\uC774 \\uC791\\uC5C5\\uC790\\uC758 \\uBA58\\uD0C8\\uBAA8\\uB378\\uC5D0\\uC11C\\uB3C4 \\uD6E8\\uC52C \\uB354 \\uAE4C\\uBA39\\uC9C0 \\uC54A\\uACE0 \\uC2E4\\uC218\\uC5C6\\uC774 \\uC791\\uC131\\uD560 \\uC218 \\uC788\\uC744 \\uAC83\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,n.jsx)(e.code,{children:\"invalidate\\uB97C \\uD574\\uC8FC\\uB294 \\uACBD\\uC6B0\\uB294 \\uD55C \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uD2B9\\uC815 \\uC561\\uC158\\uC744 \\uD1B5\\uD574\\uC11C \\uBCC0\\uD654\\uAC00 \\uC788\\uC744 \\uC218 \\uC788\\uB294 query\\uB4E4\\uC740 invalidate\\uD558\\uB294 \\uBC29\\uC2DD\\uC73C\\uB85C \\uC811\\uADFC\\uD588\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,n.jsxs)(e.h3,{id:\"windowhistory\\uAC00-\\uC788\\uC744-\\uB54C\\uC5D0\\uB9CC-backbutton-\\uB178\\uCD9C\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#windowhistory\\uAC00-\\uC788\\uC744-\\uB54C\\uC5D0\\uB9CC-backbutton-\\uB178\\uCD9C\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"window.history\\uAC00 \\uC788\\uC744 \\uB54C\\uC5D0\\uB9CC BackButton \\uB178\\uCD9C\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uBAA8\\uBC14\\uC77C \\uC6F9\\uBDF0 \\uC0C1\\uD669\\uC5D0\\uC11C push, replace\\uB4F1\\uC73C\\uB85C \\uD398\\uC774\\uC9C0\\uB97C \\uC62E\\uAE30\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C \\uC644\\uC804\\uD788 history\\uC758 \\uC0C8\\uB85C\\uC6B4 \\uB9E5\\uB77D\\uC744 \\uB9CC\\uB4DC\\uB294 \\uACBD\\uC6B0\\uC5D0 Layout\\uC5D0\\uC11C \\uC5D1\\uC2A4\\uBC84\\uD2BC \\uBFD0\\uB9CC \\uC544\\uB2C8\\uB77C \\uADF8 \\uC548\\uC5D0\\uC11C\\uB3C4 history\\uAC00 \\uC0DD\\uAE30\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB9CC BackButton\\uC744 \\uBCF4\\uC5EC\\uC8FC\\uACE0 \\uC2F6\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \",(0,n.jsx)(e.code,{children:\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C browser\\uC5D0\\uC11C history\\uC5D0\\uC11C back\\uC744 \\uD560 \\uC218 \\uC788\\uB294 \\uC0C1\\uD669\\uC778\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uC815\\uD655\\uD558\\uAC8C \\uC54C \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC740 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB807\\uC9C0\\uB9CC react-router\\uB098 next/router\\uC640 \\uAC19\\uC740 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uC5D0\\uC11C \\uC9C1\\uC811 routing\\uC744 \\uAD00\\uB9AC\\uD558\\uBA74\\uC11C window.history.state.idx\\uB77C\\uB294 \\uAC12\\uC5D0 \\uD604\\uC7AC \\uC5B4\\uB5A4 \\uC21C\\uC11C\\uC5D0 \\uC640\\uC788\\uB294\\uC9C0\\uB97C \\uAE30\\uB85D\\uD569\\uB2C8\\uB2E4. \\uACF5\\uC2DD\\uC801\\uC73C\\uB85C \\uC81C\\uACF5\\uD558\\uB294 \\uBC29\\uBC95\\uC740 \\uC544\\uB2C8\\uC9C0\\uB9CC router\\uAC00 \\uBCC0\\uD560 \\uB54C\\uB9C8\\uB2E4 \\uD574\\uB2F9 \\uAC12\\uC758 \\uBCC0\\uD654\\uC5D0 \\uB530\\uB77C\\uC11C BackButton\\uC744 \\uBCF4\\uC5EC\\uC8FC\\uACE0 \\uB9D0\\uACE0 \\uB4F1\\uC744 \\uACB0\\uC815\"}),\"\\uD558\\uB294 \\uC2DD\\uC73C\\uB85C \\uC704 \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"ModalAppBar\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" title \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" router \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useRouter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"showBackButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setShowBackButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"useEffect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"updateShowBackButton\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setShowBackButton\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token dom variable\",children:\"window\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"history\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"state\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"?.\"}),\"idx \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"events\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'routeChangeComplete'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" updateShowBackButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"events\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"off\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'routeChangeComplete'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" updateShowBackButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"events\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"nav\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"showBackButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"button\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"className\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"styles\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"left\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onClick\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" router\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"back\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"            \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MoveBack\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"button\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"title\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"button\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"CloseIcon\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"button\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"nav\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"nextjs\\uC640-\\uAD00\\uB828\\uC774-\\uC5C6\\uC744-\\uC218\\uB3C4-\\uC788\\uB294-\\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\\uB4E4\",children:[(0,n.jsx)(e.a,{href:\"#nextjs\\uC640-\\uAD00\\uB828\\uC774-\\uC5C6\\uC744-\\uC218\\uB3C4-\\uC788\\uB294-\\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\\uB4E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"nextjs\\uC640 \\uAD00\\uB828\\uC774 \\uC5C6\\uC744 \\uC218\\uB3C4 \\uC788\\uB294 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\\uB4E4\"]}),(0,n.jsxs)(e.h3,{id:\"encodeuri-encodeuricomponent\\uC758-\\uCC28\\uC774\",children:[(0,n.jsx)(e.a,{href:\"#encodeuri-encodeuricomponent\\uC758-\\uCC28\\uC774\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"encodeURI, encodeURIComponent\\uC758 \\uCC28\\uC774\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"querystring\\uC5D0 url\\uC744 \\uAE30\\uB85D\\uD558\\uACE0 \\uB118\\uAE30\\uACE0 \\uC2F6\\uC740 \\uACBD\\uC6B0\\uC5D0 \\uC6B0\\uB9AC\\uB294 \\uC5B4\\uB5A4 encode \\uB0B4\\uC7A5 \\uD568\\uC218\\uB97C \\uC368\\uC57C\\uD560\\uAE4C. \\uC815\\uB2F5\\uC740 endcodeURIComponent\\uC774\\uB2E4.\"}),\" encodeURIComponent, encodeURI \\uB450\\uAC00\\uC9C0 API\\uAC00 \\uC788\\uB2E4\\uB294 \\uAC83\\uC740 \\uC54C\\uACE0 \\uC788\\uB294\\uB370 \\uB458\\uC758 \\uC815\\uD655\\uD55C \\uCC28\\uC774\\uB294 \\uC798 \\uBAB0\\uB790\\uB294\\uB370 \\uC774\\uBC88\\uC5D0 \\uC54C\\uC558\\uB2E4. \",(0,n.jsx)(e.code,{children:\"encodeURI\\uB294 http://\\uC640 \\uAC19\\uC774 \\uD504\\uB85C\\uD1A0\\uCF5C\\uC5D0 \\uAD00\\uB828\\uB41C \\uB0B4\\uC6A9\\uC740 encode\\uC548\\uD558\\uB294\\uB370 encodeURIComponent\\uB294 \\uD574\\uB2F9 \\uBD80\\uBD84\\uAE4C\\uC9C0 encode\\uD574\\uC8FC\\uB294 API\\uB2E4.\"}),\" \\uADF8\\uB7EC\\uBBC0\\uB85C encodeURIComponent\\uB97C \\uC0AC\\uC6A9\\uD574\\uC57C\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 encode\\uAD00\\uB828\\uD574\\uC11C \\uAF64 \\uBCF5\\uC7A1\\uD588\\uB358 \\uC774\\uC288\\uAC00 \\uC788\\uC5C8\\uB294\\uB370, encode\\uB41C \\uC2A4\\uD2B8\\uB9C1\\uC744 \\uB610 encode\\uD560 \\uC218\\uC788\\uB294\\uB370 \\uC774\\uB7F0 \\uACBD\\uC6B0 \\uBAA8\\uBC14\\uC77C\\uC6F9\\uBDF0\\uAC00 \\uC81C\\uB300\\uB85C \\uD574\\uB2F9 string\\uC744 decode\\uD560 \\uC218 \\uC5C6\\uACE0 \\uC815\\uD655\\uD55C querystring\\uC744 \\uBABB\\uB118\\uAE30\\uB294 \\uACBD\\uC6B0\\uAC00 \\uC788\\uB2E4. \\uAD00\\uB828\\uD574\\uC11C\\uB294 \\uC8FC\\uC758\\uB97C \\uD574\\uC57C\\uD55C\\uB2E4.\"]}),(0,n.jsxs)(e.h3,{id:\"windowscroll-smooth-safari\\uC5D0\\uC11C\\uB294-\\uC791\\uB3D9\\uC774-\\uC548\\uB41C\\uB2E4\",children:[(0,n.jsx)(e.a,{href:\"#windowscroll-smooth-safari\\uC5D0\\uC11C\\uB294-\\uC791\\uB3D9\\uC774-\\uC548\\uB41C\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"window.scroll smooth safari\\uC5D0\\uC11C\\uB294 \\uC791\\uB3D9\\uC774 \\uC548\\uB41C\\uB2E4\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0 \",(0,n.jsx)(e.code,{children:\"window.scroll(0, { behavior: 'smooth' })\\uC640 \\uAC19\\uC740 \\uCF54\\uB4DC\\uB294 \\uD06C\\uB86C\\uC5D0\\uC11C\\uB294 \\uC9C4\\uC9DC \\uC720\\uC800\\uAC00 \\uC2A4\\uD06C\\uB864\\uD558\\uB294 \\uAC83\\uCC98\\uB7FC \\uC791\\uB3D9\\uD558\\uC9C0\\uB9CC safari\\uC5D0\\uC11C\\uB294 \\uC791\\uB3D9\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \\uC774 \\uACBD\\uC6B0\\uC5D0\\uB294 polyfill\\uC774 \\uD544\\uC694\\uD558\\uB2E4. \",(0,n.jsx)(e.code,{children:\"\\uC800\\uB294 smoothscroll-polyilll\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C polyfill\\uC744 \\uCD94\\uAC00\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4. (\",(0,n.jsx)(e.a,{href:\"https://github.com/iamdustan/smoothscroll\",children:\"smoothscroll-polyfill\"}),\")\"]}),(0,n.jsxs)(e.h3,{id:\"\\uBAA8\\uBC14\\uC77C-\\uC6F9\\uBDF0\\uC5D0\\uC11C-\\uC0AC\\uC6A9\\uD560-\\uC218-\\uC788\\uB294-\\uC720\\uC6A9\\uD55C-\\uD328\\uD134\\uB4E4\",children:[(0,n.jsx)(e.a,{href:\"#\\uBAA8\\uBC14\\uC77C-\\uC6F9\\uBDF0\\uC5D0\\uC11C-\\uC0AC\\uC6A9\\uD560-\\uC218-\\uC788\\uB294-\\uC720\\uC6A9\\uD55C-\\uD328\\uD134\\uB4E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uBAA8\\uBC14\\uC77C \\uC6F9\\uBDF0\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \\uC720\\uC6A9\\uD55C \\uD328\\uD134\\uB4E4\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\\uD604\\uC7AC \\uC9C4\\uD589\\uD558\\uACE0 \\uC788\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0\\uC11C\\uB294 /app/post-form, /app/modal-close\\uC640 \\uAC19\\uC740 utils\\uC131\\uC758 \\uD398\\uC774\\uC9C0\\uB4E4\\uC774 \\uC788\\uB2E4. \\uB2E4\\uB978 \\uC11C\\uBE44\\uC2A4\\uB97C \\uC774\\uC6A9\\uD560 \\uB54C\\uC5D0 \\uD2B9\\uC815 \\uB85C\\uC9C1\\uC744 \\uC2EC\\uC744 \\uC218\\uB294 \\uC5C6\\uACE0 url\\uB9CC \\uC9C0\\uC815\\uD560 \\uC218 \\uC788\\uC744 \\uB54C \\uD2B9\\uC815 \\uB85C\\uC9C1\\uC744 \\uC2E4\\uD589\\uC2DC\\uD0A4\\uAE30 \\uC704\\uD574\\uC11C \\uC704\\uC640 \\uAC19\\uC740 \\uD398\\uC774\\uC9C0\\uB4E4\\uC744 \\uB9CC\\uB4E4\\uC5B4\\uC11C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB2E4. \",(0,n.jsx)(e.code,{children:\"/app/post-form\\uC740 \\uC0C8\\uB85C\\uC6B4 \\uC6F9\\uBDF0\\uB97C \\uC5F4\\uBA74\\uC11C form post action\\uC73C\\uB85C \\uB2E4\\uB978 \\uD398\\uC774\\uC9C0\\uB85C \\uC774\\uB3D9\\uD558\\uACE0 \\uC2F6\\uC744 \\uB54C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uACE0,\"}),\" \",(0,n.jsx)(e.code,{children:\"/app/modal-close\\uC758 \\uACBD\\uC6B0 \\uB2E4\\uB978 \\uC11C\\uBE44\\uC2A4\\uC5D0\\uC11C \\uB2E4\\uB140\\uC624\\uBA74\\uC11C \\uC6F9\\uBDF0 \\uCC3D\\uC744 \\uB2EB\\uACE0 \\uC2F6\\uC744 \\uB54C \\uD574\\uB2F9 \\uB85C\\uC9C1\\uC744 \\uB2F4\\uC544\\uB454 \\uD398\\uC774\\uC9C0\\uB97C \\uB530\\uB85C \\uD30C\\uC11C \\uC0AC\\uC6A9\"}),\"\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,n.jsxs)(e.h3,{id:\"\\uBAA8\\uBC14\\uC77C-\\uC6F9\\uBDF0\\uC5D0\\uC11C-postmessage\\uC5C6\\uC774-postmessage\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#\\uBAA8\\uBC14\\uC77C-\\uC6F9\\uBDF0\\uC5D0\\uC11C-postmessage\\uC5C6\\uC774-postmessage\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uBAA8\\uBC14\\uC77C \\uC6F9\\uBDF0\\uC5D0\\uC11C postMessage\\uC5C6\\uC774 postMessage\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"\\uBAA8\\uBC14\\uC77C\\uC5D0\\uC11C \\uC6F9\\uBDF0\\uB85C \\uC791\\uC5C5\\uD560 \\uB54C\\uC5D0\\uB294 \\uB85C\\uB4DC\\uB41C \\uC6F9\\uD398\\uC774\\uC9C0 \\uC704\\uC5D0 \\uB610\\uB2E4\\uB978 \\uC6F9\\uC774 \\uB730 \\uC218 \\uC788\\uACE0 \\uC704\\uC5D0 \\uB5A0\\uC788\\uB358 \\uC6F9\\uC5D0\\uC11C \\uC544\\uB798 \\uC6F9\\uBDF0 \\uD2B9\\uC815 \\uB370\\uC774\\uD130\\uB97C \\uB118\\uAE30\\uACE0 \\uC2F6\\uC744 \\uB584\\uAC00 \\uC788\\uC744 \\uC218 \\uC788\\uB2E4.\"}),\" \\uC774\\uB7F4 \\uB54C \\uBCF4\\uD1B5\\uC740 postMessage\\uB97C \\uD560 \\uC218 \\uC788\\uB294 \\uBAA8\\uBC14\\uC77C\\uC571\\uC778\\uD130\\uD398\\uC774\\uC2A4\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC11C \\uC0AC\\uC6A9\\uD558\\uC9C0\\uB9CC \\uADF8\\uC640 \\uAC19\\uC740 \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uAC00 \\uC5C6\\uB2E4\\uBA74, \",(0,n.jsx)(e.code,{children:\"localStorage\\uC5D0 \\uD544\\uC694\\uD55C \\uC815\\uBCF4\\uB97C \\uC804\\uB2EC\\uD558\\uACE0 \\uC704\\uC5D0 \\uB5A0\\uC788\\uB358 \\uC6F9\\uBDF0\\uAC00 \\uB2EB\\uD788\\uACE0 \\uC544\\uB798\\uC5D0 \\uC788\\uB358 \\uC6F9\\uBDF0\\uAC00 focus\\uB420 \\uB54C\\uC5D0 localStorage\\uC5D0 \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD558\\uACE0 \\uD2B9\\uC815 \\uB85C\\uC9C1\\uC744 \\uC2E4\\uD589\\uC2DC\\uD0AC\\uC9C0 \\uACB0\\uC815\\uD560 \\uC218 \\uC788\\uB2E4.\"})]}),(0,n.jsxs)(e.p,{children:[\"\\xA0\",(0,n.jsx)(e.code,{children:\"window storage event\\uB97C \\uC0AC\\uC6A9\\uD560 \\uC218\\uB3C4 \\uC788\\uC9C0\\uB9CC, window storage event\\uB294 \\uC2E4\\uC81C\\uB85C \\uC704 \\uCABD\\uC5D0 \\uB5A0\\uC788\\uB294 \\uC6F9\\uBDF0\\uAC00 \\uB2EB\\uD788\\uAE30\\uB3C4 \\uC804\\uC5D0 \\uC2E4\\uD589\\uB420 \\uC218 \\uC788\\uC744 \\uAC83 \\uAC19\\uC558\\uB2E4. \\uC2E4\\uC81C\\uB85C \\uC6D0\\uD558\\uB294 \\uAC83\\uC740 \\uC704\\uCABD \\uC6F9\\uBDF0\\uAC00 \\uB2EB\\uD788\\uACE0 \\uD3EC\\uCEE4\\uC2A4\\uB418\\uB294 \\uC2DC\\uC810\\uC5D0 \\uD1A0\\uC2A4\\uD2B8\\uB97C \\uB744\\uC6CC\\uC8FC\\uB294 \\uB85C\\uC9C1\\uC744 \\uC2E4\\uD589\\uD574\\uC57C\\uB418\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 localStorage + focus event\\uB85C \\uD574\\uACB0\\uD588\\uB2E4.\"})]}),(0,n.jsxs)(e.h3,{id:\"horizontal-\\uC2A4\\uD06C\\uB864\\uC744-\\uBC1C\\uC0DD\\uC2DC\\uD0A4\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0\\uC11C-\\uB514\\uBC14\\uC774\\uC2A4\\uC758-\\uD06C\\uAE30\\uC5D0-\\uB530\\uB77C\\uC11C-\\uC644\\uC804\\uD788-\\uBCF4\\uC774\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC640-\\uAC78\\uCE58\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C-\\uC720\\uC9C0\\uD558\\uAE30\",children:[(0,n.jsx)(e.a,{href:\"#horizontal-\\uC2A4\\uD06C\\uB864\\uC744-\\uBC1C\\uC0DD\\uC2DC\\uD0A4\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0\\uC11C-\\uB514\\uBC14\\uC774\\uC2A4\\uC758-\\uD06C\\uAE30\\uC5D0-\\uB530\\uB77C\\uC11C-\\uC644\\uC804\\uD788-\\uBCF4\\uC774\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC640-\\uAC78\\uCE58\\uB294-\\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C-\\uC720\\uC9C0\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Horizontal \\uC2A4\\uD06C\\uB864\\uC744 \\uBC1C\\uC0DD\\uC2DC\\uD0A4\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0\\uC11C \\uB514\\uBC14\\uC774\\uC2A4\\uC758 \\uD06C\\uAE30\\uC5D0 \\uB530\\uB77C\\uC11C \\uC644\\uC804\\uD788 \\uBCF4\\uC774\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC640 \\uAC78\\uCE58\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC720\\uC9C0\\uD558\\uAE30\"]}),(0,n.jsxs)(e.p,{children:[\"\\xA0 \",(0,n.jsx)(e.code,{children:\"Horizontal \\uC2A4\\uD06C\\uB864\\uC744 overflow\\uB97C auto\\uB85C \\uC124\\uC815\\uD558\\uC5EC \\uC791\\uB3D9\\uD558\\uB3C4\\uB85D \\uB9CC\\uB4E4\\uC5B4 \\uB450\\uC5C8\\uC5B4\\uB3C4, \\uB514\\uBC14\\uC774\\uC2A4 \\uD06C\\uAE30\\uC5D0 \\uB530\\uB77C \\uAC00\\uB85C \\uC2A4\\uD06C\\uB864\\uC774 \\uAC00\\uB2A5\\uD558\\uB294 \\uAC83\\uC744 \\uC778\\uC9C0\\uD558\\uC9C0 \\uBABB\\uD558\\uAC8C \\uC815\\uD655\\uD558\\uAC8C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uD06C\\uAE30\\uAC00 \\uB531 \\uB9DE\\uAC8C render\\uAC00 \\uB418\\uC5B4\\uC11C \\uC720\\uC800\\uAC00 \\uAC00\\uB85C \\uC2A4\\uD06C\\uB864\\uB9C1\\uC774 \\uAC00\\uB2A5\\uD55C\\uC9C0 \\uC778\\uC9C0\\uAC00 \\uC548\\uB420 \\uC218 \\uC788\\uACE0 \\uC2DC\\uB3C4\\uD558\\uC9C0 \\uC54A\\uC744 \\uC218 \\uC788\\uB2E4. \\uADF8\\uB7F4 \\uB54C\\uC5D0 item\\uB4E4\\uC758 width\\uB97C vw unit\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C \\uB514\\uBC14\\uC774\\uC2A4 width\\uAC00 \\uB2EC\\uB77C\\uC9C0\\uB354\\uB77C\\uB3C4 \\uAF2D \\uAC00\\uB85C \\uC2A4\\uD06C\\uB864\\uB9C1\\uC774 \\uAC00\\uB2A5\\uD558\\uB2E4\\uB294 \\uAC83\\uC744 \\uC778\\uC9C0\\uD560 \\uC218 \\uC788\\uAC8C \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uACB9\\uCE58\\uAC8C rendering\"}),\"\\uD560 \\uC218 \\uC788\\uC5C8\\uB2E4.\"]}),(0,n.jsxs)(e.h2,{id:\"\\uB9C8\\uBB34\\uB9AC\",children:[(0,n.jsx)(e.a,{href:\"#\\uB9C8\\uBB34\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uB9C8\\uBB34\\uB9AC\"]}),(0,n.jsx)(e.p,{children:\"\\xA0\\uCC98\\uC74C\\uC5D0 \\uAE00\\uC744 \\uC4F0\\uAE30 \\uC2DC\\uC791\\uD560 \\uB54C\\uC5D0 \\uC5B4\\uB290\\uC815\\uB3C4 \\uBAA9\\uCC28\\uB97C \\uC791\\uC131\\uD558\\uACE0 \\uC4F0\\uAE30 \\uC2DC\\uC791\\uD588\\uC9C0\\uB9CC, \\uACB0\\uAD6D \\uB098\\uC628 \\uAE00\\uC740 \\uC0AC\\uC2E4\\uACFC \\uC758\\uACAC\\uB4E4\\uC758 \\uB098\\uC5F4 \\uC815\\uB3C4\\uB97C \\uBC97\\uC5B4\\uB098\\uC9C0 \\uBABB\\uD588\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC774 \\uB4DC\\uB124\\uC694. \\uC55E\\uC73C\\uB85C \\uC4F0\\uAC8C \\uB420 \\uAE00\\uB4E4\\uC740 \\uB354 \\uC9D1\\uC911\\uB41C \\uC8FC\\uC81C\\uB85C \\uC77C\\uBAA9\\uC694\\uC5F0\\uD558\\uAC8C \\uC4F0\\uACE0 \\uC2F6\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC744 \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uB610 \\uC608\\uC2DC \\uCF54\\uB4DC\\uB4E4\\uB3C4 \\uCD5C\\uB300\\uD55C \\uB9CE\\uC774 \\uD3EC\\uD568\\uD574\\uC57C\\uACA0\\uB2E4\\uB294 \\uC0DD\\uAC01\\uB3C4 \\uB4DC\\uB124\\uC694. \\uBD80\\uC871\\uD568\\uC744 \\uADF8\\uB300\\uB85C \\uB178\\uCD9C\\uD558\\uB294 \\uAC83 \\uAC19\\uC544 \\uBD80\\uB044\\uB7FD\\uC9C0\\uB9CC, \\uC870\\uAE08\\uC774\\uB77C\\uB3C4 \\uC800\\uC758 \\uC2DC\\uD589\\uCC29\\uC624\\uB4E4\\uC5D0\\uC11C \\uB3C4\\uC6C0\\uC744 \\uC5BB\\uB294 \\uBD84\\uB4E4\\uC774 \\uC788\\uAE38 \\uBC14\\uB78D\\uB2C8\\uB2E4.\"})]})}}var f=x;return w;})();\n;return Component;"},"_id":"blog/nextjs-develop-and-operation-2.mdx","_raw":{"sourceFilePath":"blog/nextjs-develop-and-operation-2.mdx","sourceFileName":"nextjs-develop-and-operation-2.mdx","sourceFileDir":"blog","contentType":"mdx","flattenedPath":"blog/nextjs-develop-and-operation-2"},"type":"Blog","readingTime":{"text":"17 min read","minutes":16.995,"time":1019700,"words":3399},"slug":"nextjs-develop-and-operation-2","toc":[{"value":"목차","url":"#목차","depth":2},{"value":"nextjs 한걸음 더 나아가기","url":"#nextjs-한걸음-더-나아가기","depth":2},{"value":"SSG, SSR, SPA에 대해서 조금 더 이해해보기","url":"#ssg-ssr-spa에-대해서-조금-더-이해해보기","depth":3},{"value":"프로젝트의 구조를 어떻게 구성할 것인가","url":"#프로젝트의-구조를-어떻게-구성할-것인가","depth":3},{"value":"react@next, react-dom@next의 Suspense 이슈","url":"#reactnext-react-domnext의-suspense-이슈","depth":3},{"value":"react-query의 suspense 모드를 사용함으로써 useQuery가 서버에서도 실행이 된다.","url":"#react-query의-suspense-모드를-사용함으로써-usequery가-서버에서도-실행이-된다","depth":3},{"value":"Persistent Layout 구성하기","url":"#persistent-layout-구성하기","depth":3},{"value":".env, .env.local의 사용","url":"#env-envlocal의-사용","depth":3},{"value":"next/router를 사용하면서 주의해야할 것","url":"#nextrouter를-사용하면서-주의해야할-것","depth":3},{"value":"next/image를 사용하면서 주의해야할 것","url":"#nextimage를-사용하면서-주의해야할-것","depth":3},{"value":"next.config.js에서 headers 옵션 사용하기","url":"#nextconfigjs에서-headers-옵션-사용하기","depth":3},{"value":"next.config.js assetPrefix의 사용","url":"#nextconfigjs-assetprefix의-사용","depth":3},{"value":"인증을 어떻게 할 수 있을까","url":"#인증을-어떻게-할-수-있을까","depth":3},{"value":"nextjs와 같이 사용하고 있는 라이브러리들","url":"#nextjs와-같이-사용하고-있는-라이브러리들","depth":2},{"value":"react-query를 SSR에서 활용하기","url":"#react-query를-ssr에서-활용하기","depth":3},{"value":"openapi-typescript로 api의 type generation을 자동화하기","url":"#openapi-typescript로-api의-type-generation을-자동화하기","depth":3},{"value":"react-query, immer를 사용해서 optimistic update 구현하기","url":"#react-query-immer를-사용해서-optimistic-update-구현하기","depth":3},{"value":"react-virtuoso를 사용해서 빠른 무한스크롤링 리스트를 구현하기","url":"#react-virtuoso를-사용해서-빠른-무한스크롤링-리스트를-구현하기","depth":3},{"value":"useQuery의 refetchOnMount, refethcOnWindwoFocus 활용하기","url":"#usequery의-refetchonmount-refethconwindwofocus-활용하기","depth":3},{"value":"window.history가 있을 때에만 BackButton 노출하기","url":"#windowhistory가-있을-때에만-backbutton-노출하기","depth":3},{"value":"nextjs와 관련이 없을 수도 있는 트러블슈팅들","url":"#nextjs와-관련이-없을-수도-있는-트러블슈팅들","depth":2},{"value":"encodeURI, encodeURIComponent의 차이","url":"#encodeuri-encodeuricomponent의-차이","depth":3},{"value":"window.scroll smooth safari에서는 작동이 안된다","url":"#windowscroll-smooth-safari에서는-작동이-안된다","depth":3},{"value":"모바일 웹뷰에서 사용할 수 있는 유용한 패턴들","url":"#모바일-웹뷰에서-사용할-수-있는-유용한-패턴들","depth":3},{"value":"모바일 웹뷰에서 postMessage없이 postMessage하기","url":"#모바일-웹뷰에서-postmessage없이-postmessage하기","depth":3},{"value":"Horizontal 스크롤을 발생시키는 컴포넌트에서 디바이스의 크기에 따라서 완전히 보이는 컴포넌트와 걸치는 컴포넌트를 유지하기","url":"#horizontal-스크롤을-발생시키는-컴포넌트에서-디바이스의-크기에-따라서-완전히-보이는-컴포넌트와-걸치는-컴포넌트를-유지하기","depth":3},{"value":"마무리","url":"#마무리","depth":2}]},"authorDetails":[{"name":"Seonghyeon Kim","avatar":"/static/images/avatar.png","occupation":"Software Engineer","company":"당근마켓","email":"impressor7@gmail.com","twitter":"https://twitter.com/seonghyeon___","linkedin":"https://www.linkedin.com/in/seonghyeon-kim-328757b7/","github":"https://github.com/seonghyeonkimm","type":"Authors","readingTime":{"text":"7 min read","minutes":6.705,"time":402300,"words":1341},"slug":"default","toc":[{"value":"Introduction","url":"#introduction","depth":2},{"value":"Experiences","url":"#experiences","depth":2},{"value":"당근마켓","url":"#당근마켓","depth":3},{"value":"간편모드 광고","url":"#간편모드-광고","depth":4},{"value":"당근마켓 전문가모드 광고","url":"#당근마켓-전문가모드-광고","depth":4},{"value":"프론트엔드 팀 SDK","url":"#프론트엔드-팀-sdk","depth":4},{"value":"BFF","url":"#bff","depth":3},{"value":"기타","url":"#기타","depth":4},{"value":"한국신용데이터","url":"#한국신용데이터","depth":3},{"value":"MMP(Marketing Management Platform) 사내 공용 라이브러리","url":"#mmpmarketing-management-platform-사내-공용-라이브러리","depth":4},{"value":"캐시노트마켓","url":"#캐시노트마켓","depth":4},{"value":"캐시노트마켓 파트너센터","url":"#캐시노트마켓-파트너센터","depth":4},{"value":"캐시노트 신용점수조회","url":"#캐시노트-신용점수조회","depth":4},{"value":"캐시노트 2.0","url":"#캐시노트-20","depth":4},{"value":"티페이","url":"#티페이","depth":3},{"value":"가맹점 관리/계약 어드민","url":"#가맹점-관리계약-어드민","depth":4},{"value":"스타일쉐어","url":"#스타일쉐어","depth":3},{"value":"인앱 검색 서비스","url":"#인앱-검색-서비스","depth":4},{"value":"웹 스토어 리뉴얼","url":"#웹-스토어-리뉴얼","depth":4},{"value":"아파트멘터리","url":"#아파트멘터리","depth":3},{"value":"랜딩페이지","url":"#랜딩페이지","depth":4},{"value":"시공 및 커머스를 위한 백오피스","url":"#시공-및-커머스를-위한-백오피스","depth":4},{"value":"상품 정보 크롤링 크롬 익스텐션","url":"#상품-정보-크롤링-크롬-익스텐션","depth":4},{"value":"인테리어 상품 커머스","url":"#인테리어-상품-커머스","depth":4},{"value":"스포카","url":"#스포카","depth":3},{"value":"전사 데이터 대시보드 구성","url":"#전사-데이터-대시보드-구성","depth":4},{"value":"계약서비스 개발","url":"#계약서비스-개발","depth":4},{"value":"데이터 추출을 위한 쿼리 작성","url":"#데이터-추출을-위한-쿼리-작성","depth":4},{"value":"Communities","url":"#communities","depth":2},{"value":"Presentations","url":"#presentations","depth":3},{"value":"Lecture","url":"#lecture","depth":3},{"value":"Education","url":"#education","depth":2},{"value":"경희대학교","url":"#경희대학교","depth":3}]}],"prev":{"title":"nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처","date":"2021-12-18T00:00:00.000Z","tags":["nextjs"],"draft":false,"summary":"nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.","type":"Blog","readingTime":{"text":"11 min read","minutes":10.16,"time":609600,"words":2032},"slug":"nextjs-develop-and-operation-1","toc":[{"value":"Part 1 - nextjs 서비스 아키텍처","url":"#part-1---nextjs-서비스-아키텍처","depth":1},{"value":"목차","url":"#목차","depth":2},{"value":"nextjs는 무엇에 쓰는 물건인가?","url":"#nextjs는-무엇에-쓰는-물건인가","depth":2},{"value":"nextjs 서비스 아키텍처","url":"#nextjs-서비스-아키텍처","depth":2},{"value":"1. ECR(Elastic Container Registry) 구성하기","url":"#1-ecrelastic-container-registry-구성하기","depth":3},{"value":"2. ECS(Elastic Container Service)로 서버 띄우기","url":"#2-ecselastic-container-service로-서버-띄우기","depth":3},{"value":"3. ALB(application Load Balancer)","url":"#3-albapplication-load-balancer","depth":3},{"value":"4. CloudFront(CDN)","url":"#4-cloudfrontcdn","depth":3},{"value":"5. Route53, ACM(AWS Certificate Manager)","url":"#5-route53-acmaws-certificate-manager","depth":3},{"value":"nextjs 서비스 배포하기","url":"#nextjs-서비스-배포하기","depth":2},{"value":"nextjs 서비스 모니터링하기","url":"#nextjs-서비스-모니터링하기","depth":2},{"value":"nextjs 서비스 아키텍처 구성 중 트러블슈팅","url":"#nextjs-서비스-아키텍처-구성-중-트러블슈팅","depth":2},{"value":"회사 내부의 네트워크에 대한 이해","url":"#회사-내부의-네트워크에-대한-이해","depth":3},{"value":"cloudfront origin, behavior에 대한 이해","url":"#cloudfront-origin-behavior에-대한-이해","depth":3},{"value":"마무리","url":"#마무리","depth":2}]},"next":{"title":"React 18 미리보기","date":"2022-02-10T00:00:00.000Z","tags":["react"],"draft":false,"summary":"React 18을 쓰기 시작한지는 꽤 되었지만 제대로 이해하지 못한 부분들이 많아서 다시 조금 더 꼼꼼히 공부하고 기록했습니다.","type":"Blog","readingTime":{"text":"7 min read","minutes":6.305,"time":378300,"words":1261},"slug":"react-18-preview","toc":[{"value":"즉시 사용 가능한 개선점","url":"#즉시-사용-가능한-개선점","depth":2},{"value":"Automatic batching for fewer renders","url":"#automatic-batching-for-fewer-renders","depth":3},{"value":"SSR support for Suspense","url":"#ssr-support-for-suspense","depth":3},{"value":"Behavioral changes to Suspense in React 18","url":"#behavioral-changes-to-suspense-in-react-18","depth":3},{"value":"Concurrent features","url":"#concurrent-features","depth":2},{"value":"New StrictMode (StrictMode + StrictEffect) - 링크","url":"#new-strictmode-strictmode--stricteffect---링크","depth":2}]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["nextjs-develop-and-operation-2"]},"buildId":"dzw4w5CEmJkywR8RC2qEm","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
<!DOCTYPE html><html lang="ko" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처</title><meta name="robots" content="follow, index"/><meta name="description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta property="og:url" content="https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-1"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Seonghyeon Kim"/><meta property="og:description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta property="og:title" content="nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처"/><meta property="og:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/seonghyeon___"/><meta name="twitter:title" content="nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처"/><meta name="twitter:description" content="nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."/><meta name="twitter:image" content="https://seonghyeonkimm.github.io//static/images/og-card.png"/><link rel="canonical" href="https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-1"/><meta property="article:published_time" content="2021-12-18T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://seonghyeonkimm.github.io//blog/nextjs-develop-and-operation-1"
  },
  "headline": "nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/og-card.png"
    }
  ],
  "datePublished": "2021-12-18T00:00:00.000Z",
  "dateModified": "2021-12-18T00:00:00.000Z",
  "author": [
    {
      "@type": "Person"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Seonghyeon Kim",
    "logo": {
      "@type": "ImageObject",
      "url": "https://seonghyeonkimm.github.io//static/images/logo.png"
    }
  },
  "description": "nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/a3ef90160e604594.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a3ef90160e604594.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-0cd052e8ebd0c0ed.js" defer=""></script><script src="/_next/static/chunks/main-4ef043329e44a116.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e36fede22e27a607.js" defer=""></script><script src="/_next/static/chunks/170-510ab59698f42a3e.js" defer=""></script><script src="/_next/static/chunks/913-fc970b33836fa354.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-0051806e725ec9a7.js" defer=""></script><script src="/_next/static/yX_VBXwzdEHJOTbuzva8b/_buildManifest.js" defer=""></script><script src="/_next/static/yX_VBXwzdEHJOTbuzva8b/_ssgManifest.js" defer=""></script><script src="/_next/static/yX_VBXwzdEHJOTbuzva8b/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><noscript><iframe title="gtm-iframe" height="0" width="0" style="display:none;visibility:hidden" src="https://www.googletagmanager.com/ns.html?id=GTM-KJNTQFR"></iframe></noscript><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Seonghyeon Kim" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg id="logo_svg__Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 500 500" style="width:40px" xml:space="preserve"><style>.logo_svg__st0{fill:#fddf7f}</style><path class="logo_svg__st0" d="M198.709 105.373c-17.072-14.62-38.245-23.682-60.489-26.019-13.531 18.706-20.964 41.345-21.033 64.58 18.434 3.538 36.401 10.112 53.087 19.749 5.726-21.38 15.5-41.1 28.435-58.31zM382.812 143.934c-.069-23.235-7.501-45.874-21.032-64.58-22.243 2.337-43.417 11.399-60.489 26.019 12.935 17.21 22.709 36.93 28.435 58.31 16.686-9.636 34.652-16.211 53.086-19.749z"></path><path d="M495 348.043c-17.119-17.913-44.733-31.678-77.75-38.222-.668.69-1.32 1.39-2.002 2.072-44.773 44.773-108.176 59.496-165.248 44.266-57.072 15.23-120.475.508-165.248-44.265-.682-.682-1.335-1.381-2.002-2.072C49.733 316.365 22.118 330.13 5 348.043c18.346 19.199 48.743 33.641 84.931 39.527l.003-.003c-18.748 19.667-23.392 42.912-13.942 64.358 36.183 5.848 75.468 2.785 108.382-9.195 9.478 22.282 33.522 41.018 65.627 52.269 32.103-11.251 56.146-29.987 65.625-52.269 32.914 11.98 72.199 15.042 108.382 9.195 9.45-21.445 4.806-44.689-13.939-64.355 36.187-5.886 66.585-20.328 84.931-39.527z" style="fill:#83e1e5"></path><path d="M459.514 146.645c-43.251-11.542-90.13-5.865-129.788 17.038-11.847-44.238-40.982-81.4-79.726-103.822-38.744 22.421-67.878 59.584-79.726 103.822-39.659-22.904-86.537-28.58-129.788-17.038-15.23 57.072-.507 120.476 44.266 165.249C129.525 356.667 192.928 371.39 250 356.159c57.073 15.23 120.475.508 165.248-44.265 44.773-44.774 59.496-108.177 44.266-165.249z" style="fill:#ecf4f7"></path><path d="M234.025 15.975a5 5 0 0 1 5-5H245V5a5 5 0 1 1 10 0v5.975h5.975a5 5 0 1 1 0 10H255v5.975a5 5 0 1 1-10 0v-5.975h-5.975a5 5 0 0 1-5-5zM410.067 101h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm-342.084 0h5.975v5.975a5 5 0 1 0 10 0V101h5.975a5 5 0 1 0 0-10h-5.975v-5.975a5 5 0 1 0-10 0V91h-5.975a5 5 0 1 0 0 10zm430.632 243.589c-12.936-13.536-31.514-24.768-53.727-32.479a5 5 0 1 0-3.279 9.447c18.763 6.514 34.649 15.62 46.278 26.486-17.569 16.395-44.874 28.68-76.082 34.16a101.977 101.977 0 0 0-5.846-5.353l-.12-.101a110.401 110.401 0 0 0-2.707-2.215l-.37-.285a114.661 114.661 0 0 0-2.603-1.99c-.162-.12-.328-.239-.495-.357l-.291-.209a129.206 129.206 0 0 0-2.33-1.666c-.33-.228-.669-.453-1.007-.678l-.951-.638c-.435-.293-.868-.587-1.312-.874a132.33 132.33 0 0 0-3.43-2.149 5 5 0 1 0-5.179 8.554c1.08.654 2.137 1.317 3.175 1.99.389.251.765.506 1.142.761l1.025.688c.285.189.57.378.846.568.729.504 1.433 1.016 2.133 1.525l.727.522c.809.599 1.597 1.205 2.373 1.815l.34.262c.842.666 1.661 1.338 2.432 1.988l.142.119c2.479 2.1 4.818 4.3 6.952 6.538 16.455 17.264 21.374 37.193 14.01 56.395-33.207 4.92-68.602 2.104-98.38-7.753 3.429-10.789 3.701-22.676.694-34.022-2.705-10.212-8.027-19.674-15.39-27.363a5 5 0 0 0-7.222 6.916c6.196 6.47 10.673 14.426 12.946 23.008 2.914 10.999 2.174 22.566-2.083 32.572-8.596 20.203-30.787 37.971-61.024 48.919-11.477-4.153-21.839-9.284-30.822-15.263-11.502-7.656-20.311-16.372-26.18-25.905-7.568-12.292-9.81-26.277-6.311-39.377 2.301-8.616 6.985-16.999 13.548-24.243a5.001 5.001 0 0 0-7.411-6.714c-7.627 8.418-13.09 18.23-15.8 28.377-2.91 10.899-2.544 22.265.931 33.082-29.787 9.867-65.199 12.687-98.417 7.766-7.364-19.204-2.444-39.134 14.014-56.398a90.16 90.16 0 0 1 6.942-6.53c.023-.019.102-.083.124-.103.8-.675 1.617-1.346 2.458-2.011l.337-.26c.776-.61 1.564-1.216 2.374-1.815l.722-.518c.704-.513 1.408-1.024 2.135-1.527.277-.192.563-.381.848-.57l1.025-.688c.377-.255.753-.51 1.145-.763 1.035-.67 2.092-1.333 3.172-1.988a5 5 0 1 0-5.179-8.554 132.424 132.424 0 0 0-3.427 2.147c-.446.289-.88.582-1.314.875l-.951.638c-.338.225-.677.45-1.009.68-.793.549-1.562 1.106-2.332 1.667l-.287.206c-.167.118-.333.237-.494.356-.889.657-1.753 1.322-2.604 1.991l-.368.284a106.82 106.82 0 0 0-2.688 2.2l-.145.121a101.933 101.933 0 0 0-5.841 5.349c-31.21-5.48-58.514-17.764-76.083-34.16 11.688-10.923 27.661-20.065 46.529-26.587a5 5 0 0 0-3.267-9.451c-22.323 7.717-40.992 18.985-53.989 32.585a5 5 0 0 0 0 6.909c17.971 18.805 45.835 32.639 79.096 39.418-14.979 19.419-18.338 41.978-9.063 63.025a5 5 0 0 0 3.777 2.92c12.103 1.956 24.518 2.918 36.901 2.918 24.243 0 48.354-3.692 69.695-10.851a66.464 66.464 0 0 0 2.693 4.838c6.632 10.772 16.44 20.524 29.154 28.987 10.108 6.728 21.786 12.435 34.71 16.964a4.984 4.984 0 0 0 3.306 0c31.649-11.092 55.604-29.436 66.577-50.783 21.336 7.154 45.436 10.844 69.673 10.844 12.382 0 24.802-.963 36.901-2.918a4.997 4.997 0 0 0 3.777-2.92c9.276-21.05 5.915-43.612-9.069-63.033 32.908-6.767 61.408-20.896 79.102-39.41a5 5 0 0 0-.002-6.908zm-337.38-111.442a5 5 0 1 0 9.898-1.419 161.813 161.813 0 0 1-.504-3.841 5.001 5.001 0 0 0-9.93 1.186c.164 1.364.342 2.721.536 4.074zM35.276 235.13c-7.582-29.39-7.451-60.434.379-89.775a5.002 5.002 0 0 1 3.542-3.542c23.935-6.387 48.959-7.543 73.177-3.723 1.208-22.049 8.832-43.748 21.794-61.666a4.993 4.993 0 0 1 4.573-2.042c21.717 2.282 42.056 10.519 59.154 23.884 13.698-17.139 30.524-31.693 49.6-42.732a5.001 5.001 0 0 1 5.008 0c19.076 11.039 35.901 25.593 49.6 42.732 17.099-13.365 37.438-21.602 59.154-23.884a4.997 4.997 0 0 1 4.573 2.042c12.962 17.918 20.587 39.617 21.794 61.666 24.218-3.82 49.242-2.664 73.177 3.724a5.002 5.002 0 0 1 3.542 3.542c7.83 29.341 7.961 60.385.379 89.775-7.814 30.292-23.701 58.06-45.94 80.299s-50.006 38.125-80.298 45.939a176.8 176.8 0 0 1-44.155 5.592c-14.912 0-29.82-1.895-44.33-5.649a177.056 177.056 0 0 1-44.33 5.649 176.794 176.794 0 0 1-44.155-5.592c-30.292-7.814-58.059-23.7-80.298-45.939s-38.125-50.007-45.94-80.3zm300.226-68.955a176.425 176.425 0 0 1 5.046 41.835c0 31.451-8.401 62.318-24.295 89.264-13.342 22.619-31.648 42.021-53.363 56.695 53.774 10.277 109.868-6.657 148.823-45.611 41.08-41.08 57.683-101.227 43.695-157.607-40.309-9.99-83.636-4.407-119.906 15.424zm-27.378-59.925c2.875 4.047 5.6 8.207 8.129 12.495a174.86 174.86 0 0 1 16.542 37.543c14.175-7.498 29.323-12.967 44.927-16.34-.823-19.629-7.241-39.018-18.317-55.277-18.809 2.494-36.395 9.906-51.281 21.579zm-185.845 33.699c15.604 3.373 30.751 8.842 44.927 16.34a174.86 174.86 0 0 1 16.542-37.543 175.826 175.826 0 0 1 8.129-12.495c-14.887-11.673-32.472-19.086-51.281-21.579-11.076 16.259-17.494 35.648-18.317 55.277zM88.287 308.358c38.957 38.955 95.05 55.889 148.825 45.61-36.532-24.701-62.853-62.517-72.971-105.442a5 5 0 1 1 9.733-2.294c10.204 43.286 37.877 81.077 76.126 104.12 49.758-29.976 80.548-84.246 80.548-142.342 0-58.096-30.79-112.366-80.548-142.342-49.758 29.976-80.548 84.246-80.548 142.342a5 5 0 1 1-10 0c0-14.167 1.72-28.211 5.046-41.835-36.271-19.831-79.594-25.414-119.906-15.424-13.988 56.38 2.615 116.527 43.695 157.607z" style="fill:#1c1d21"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Seonghyeon Kim</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about/ko">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about/ko">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2021-12-18T00:00:00.000Z">2021년 12월 18일 토요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100"></dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p> nextjs로 지금 현재 커머스를 개발하고 있습니다. <code>그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.</code> 실제로 나중에는 어떻게 구성들이 추가될지 삭제될지 모르곘지만 아래와 같은 구성으로 몇개의 글을 작성해보려고 합니다. 긴 글을 다 읽기 귀찮으신 분들을 위해서 핵심 내용들만을 <code>강조</code>해두려고 최대한 노력했습니다. 시간이 부족하신 분들은 강조해둔 영역만 읽으셔도 충분할 것이라고 생각합니다.</p><ul><li><a target="_blank" rel="noopener noreferrer" href="">Part 1 - nextjs 서비스 아키텍처</a></li><li><a target="_blank" rel="noopener noreferrer" href="">Part 2 - nextjs 서비스 개발 경험 및 트러블슈팅</a></li><li>Part 3 - nextjs 서비스 프러덕션 운영기 (Comming soon..)</li></ul><h1 id="part-1---nextjs-서비스-아키텍처"><a href="#part-1---nextjs-서비스-아키텍처" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Part 1 - nextjs 서비스 아키텍처</h1><p> 처음 글의 주제는 어떤 논의 및 의사결정 과정을 거쳐서 어떤 서비스 아키텍처를 구성하기로 결정했었는지에 대해서 공유하고 서비스 아키텍처를 구성하면서 어떤 요소들에 대한 이해와 공부가 필요했고, 어떤 트러블슈팅 등을 겪었는지에 대해서 적어 보겠습니다. 사실 이 글을 쓰기 시작하면서 얼마나 자세히 써야할까 고민을 했습니다. 결론적으로는 작성하면서 스스로도 어느 정도까지 이해하고 있는지에 대해서도 점검하면 좋겠다는 생각이 들었고, <code>최대한 자세하게 풀어서 적어 보면서 프론트엔드 개발자들 중에서 아직 SSR Framework에 대한 경험이 거의 없는 개발자들도 이해할 수 있도록 nextjs와 서비스 인프라 관련된 내용들에 있어서 어떤 역할을 하는 것이고 어떻게 사용되는 것인지에 대해서도 최대한 자세히 적어보기로 생각했습니다.</code></p><h2 id="목차"><a href="#목차" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>목차</h2><ul><li><a href="#nextjs%EB%8A%94-%EB%AC%B4%EC%97%87%EC%97%90-%EC%93%B0%EB%8A%94-%EB%AC%BC%EA%B1%B4%EC%9D%B8%EA%B0%80">nextjs는 무엇에 쓰는 물건인가?</a></li><li><a href="#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98">nextjs 서비스 아키텍처</a></li><li><a href="#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0">nextjs 서비스 배포하기</a></li><li><a href="#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81">nextjs 서비스 모니터링</a></li><li><a href="#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%84%B1-%EC%A4%91-%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85">nextjs 서비스 아키텍처 구성 중 트러블슈팅</a></li></ul><h2 id="nextjs는-무엇에-쓰는-물건인가"><a href="#nextjs는-무엇에-쓰는-물건인가" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs는 무엇에 쓰는 물건인가?</h2><p>  React로 개발할 때에 SPA로 접근하는게 대부분이었습니다. 그래서 <code>SSR을 해야 하는 경우에만 nextjs를 찾았던 것으로 기억합니다. SEO에 대한 대응이 필요한 서비스 혹은 페이지를 만들어야 되는데 어떤 framework를 사용해야하지라는 질문을 할 때 보통 떠올리던 것이 nextjs였습니다.</code> 그렇지만, 지금 현재 nextjs는 <strong>next export</strong>를 통해서 서버 없이 동작할 수 있도록 **SSG(Static Site Generation)**을 지원하기도 하고, next 서버를 띄운다고 하더라도 html을 서빙하더라도 항상 매번 html을 생성해서 response를 해주는 것이 아니고 미리 빌드 시에 pre-rendering을 하여 특정 페이지는 html을 파일을 서빙하기도 하고 getServerSideProps API를 통해서 그때그때 Server에서 만들어지는 형태의 페이지를 섞어서 사용할 수도 있습니다. 그래서 지금 <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/">공식 사이트</a>에 들어가게 되면 <code>SSR을 전면에 내세운 것이 아니라 The React Framework For Production이라는 문구로 소개하고 있고 SSR만을 위한 것이 아니라 React를 사용해서 Application을 개발할 때에 언제든지 사용할 수 있는 프레임워크</code>라고 생각하는 것이 맞을 것 같습니다. 또한 nextjs를 개발하고 운영을 <a target="_blank" rel="noopener noreferrer" href="https://vercel.com/">Vercel</a>이라는 회사가 하고 있는데 굉장히 업데이트도 빠르게 되고 React Core Team, Google Chrome Team과 협업을 통해서 앞으로 미래의 웹 개발에 있어서 많은 부분들을 주도하고 있다고 느끼고 있습니다.</p><p><img alt="nextjs-introduction" src="https://user-images.githubusercontent.com/13966404/146634039-e27383f8-4190-4c99-a8d4-af7bdc05ec09.png"/></p><p> 특히 제가 엄청 경험이 많지는 않지만 <code>최근까지도 왠만하면 그냥 SPA로 개발하는게 훨씬 이득이 많지 않을까</code> 생각했었습니다. 왜냐하면 SSR을 떠올리던 첫 번째 이유였던 SEO도 Google 검색엔진의 경우에는 SPA를 알아서 로드해서 정보들을 가져갈 수 있고 검색엔진에 노출될 수 있다고 하기도 하고 실제 서버를 띄우는 것보다 SPA로 개발하면 인프라 운영 코스트 등 많은 것들이 월등히 쉽고 편리하기도 하기 때문입니다. 그런데 최근의 흐름을 보면 nextjs를 사용하는 회사들도 많아지고 <a target="_blank" rel="noopener noreferrer" href="https://remix.run/">Remix</a>와 같은 SSR Framework도 나오면서 인기도 많이 얻고 있는 것으로 봐서 조금은 더 이쪽에 관심을 가져야 할 것 같다고 생각하고 있습니다. 지금 개인적으로 생각하기에 nextjs나 remix와 같은 프레임워크의 사용을 고려해야하는 경우를 생각해본다면 다음정도가 있지 않을까 생각합니다.</p><ul><li><code>비록 검색엔진들이 알아서 SPA도 알아서 체크한다고 하지만, SEO를 조금 더 잘 챙기고 싶다.</code></li><li><code>더 좋은 유저 경험을 주고 싶다. SPA나 SSR이 실제로 유저가 js까지 로드되는 시점을 생각한다면, 속도가 거의 차이가 없다고 알려져 있지만, FCP(First Content Paint)는 SSR이 훨씬 빠르기 때문에 더 좋은 유저 경험을 줄 수 있다고 생각하고 있습니다. 아무리 조금이라도 최대한 빠르게 유저에게 웹의 컨텐츠를 보여주는 것만으로도 리텐션에 꽤 많은 차이를 가져올 수 있다는 연구결과도 있기도 하니까요.</code></li></ul><p> 그리고 SPA가 SSR보다 편리했던 인프라 운영 코스트 등도 Vercel이나 Netlify나 다른 Provider들을 통해서 기술들이 발전하면서 훨씬 덜 신경쓰고 서버를 띄울 수 있고 관리할 수 있게 되었기 때문에 예전보다는 운영 코스트에 대한 걱정을 조금은 덜 해도 되지 않을까라는 생각도 듭니다. 또한 요즘 가끔 보이는 BFF(<a target="_blank" rel="noopener noreferrer" href="https://docs.microsoft.com/ko-kr/azure/architecture/patterns/backends-for-frontends">Backend For Frontend</a>)와 같은 개념을 적용해보는 것도 해보고 싶다는 생각이 많이 드네요.</p><h2 id="nextjs-서비스-아키텍처"><a href="#nextjs-서비스-아키텍처" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs 서비스 아키텍처</h2><p> 처음에 nextjs로 SSR React앱을 구현 해야하는 상황에서 서비스를 어떻게 운영할 것인지에 대한 대안으로 몇 가지를 논의했었습니다. 물론 가장 쉽게 nextjs 앱을 띄우는 방법으로 vercel을 사용할 수 있지만, <code>회사 내부의 보안정책으로 인해서 무조건 aws 안에서만 구성을 해야만 했습니다. 아래에 적은 방법 이외에도 다른 방법들이 있겠지만 제가 아는 한도 안에서는 결국 마지막 선택사항은 아래 두 가지</code>였습니다.</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/serverless-nextjs/serverless-next.js">serverless framework</a><ul><li>cloudfront</li><li>lambda@edge</li></ul></li><li><a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/ecs/">ECS(Elastic Container Service)</a><ul><li>fargate</li></ul></li></ul><p> 우선 서비스를 띄울 수 있는 방법은 많지만 그 중에서도 <code>안정적인 서비스 운영을 위해서 많은 트래픽이 몰려도 수월하게 스케일링할 수 있는 구성이 가장 중요했습니다. 그래서 aws안에서 구성할 수 있는 방법은 위의 두 가지 방법을 생각</code>했고, 그 중에서는 저희는 두 번째인 <code>ECS를 선택</code>했습니다. <code>사실 둘 중에 어떤 것이 더 우월한가에 대한 없겠지만, 우선 회사 내부에서 서버를 띄울 때 보통 두 번째 방식인 ECS를 사용하는 경우가 많았습니다.</code> 그러므로 제가 직접 구성하면서 여쭤볼 수 있는 분들이 있었다는 사실과 <code>serverless framework는 개인적으로 해본 경험이 있었기 때문에 다른 새로운 챌린지를 해보고 싶다는 욕구</code>도 있었습니다.</p><p> 별거 없지만, 위와 같은 이유 때문에 ECS를 사용해서 서버를 띄우기로 결정했습니다. 구체적으로 어떤 설정들을 AWS에서 구성해야 nextjs를 운영할 수 있는 인프라를 구성할 수 있는 지에 대해서 하나씩 실제로 구성을 했던 순서대로 설명을 조금 더 자세히 해보겠습니다. 실제로 인프라를 구성하기 위해서 terraform을 사용해서 구성했었지만 자세한 infra 코드보다는 각각의 구성요소가 어떤 역할을 하는지에 집중해서 작성 해보겠습니다. 자세한 설명을 하기 전에 결국 구성된 모습은 다음과 같습니다. 각 요소들을 설명하고 나서 이 그림을 다시 한 번 보겠습니다.</p><p><img alt="서비스 구성도" src="https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png"/></p><h3 id="1-ecrelastic-container-registry-구성하기"><a href="#1-ecrelastic-container-registry-구성하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/ecr/">ECR(Elastic Container Registry)</a> 구성하기</h3><p> ECS라는 이름에서도 알 수 있는 것처럼 <code>ECS는 Docker Container를 사용해서 서버를 띄우는 서비스이고 Docker Container를 띄우기 위해서는 Docker Image를 build하고 Docker Image를 Push하고 관리해야 합니다. Docker Image를 push하고 관리하는 서비스가 바로 ECR</code>입니다.</p><h3 id="2-ecselastic-container-service로-서버-띄우기"><a href="#2-ecselastic-container-service로-서버-띄우기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/ecs/">ECS(Elastic Container Service)</a>로 서버 띄우기</h3><p> ECR에 Docker Image를 올려 두었다면, 그 이후에 신경 써야할 부분은 바로 <code>ECS를 사용해서 ECR에 올라와있는 Docker Image를 사용해서 서버를 띄우는 일</code>입니다. ECS가 서버를 띄우는 방법으로는 두 가지가 있는데 바로 위에서도 언급했던 <strong>Fargate</strong>가 있고 아니면 많이들 알고 계실 <strong>EC2</strong>를 사용하는 방식입니다. 저는 스케일링이 더 수월한 Fargate를 이용했습니다.</p><p> <code>ECS를 이해하기 위해서는 작업 정의(Task Definition)라는 용어를 이해해야 합니다. ECS는 서버를 띄울 때에 특정 작업을 기준으로 판단하는 데 그것이 작업 정의라고 부릅니다.</code> 작업 정의에는 서비스를 띄울 때에 <code>어떤 Docker Image를 사용할지 서버의 물리적인 스펙들을 어떻게 할지 등 서비스를 띄우기에 필요한 메타 정보들을 관리하는 것이라고 생각</code>하시면 됩니다.</p><h3 id="3-albapplication-load-balancer"><a href="#3-albapplication-load-balancer" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. <a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/introduction.html">ALB(application Load Balancer)</a></h3><p> <code>ALB는 ECS가 여러개의 container service를 띄웠을 때에 앞단에서 유저의 request를 받아서 request를 분배하는 역할을 합니다.</code> ALB를 설정할 때에 신경써야 하는 몇 가지 구성요소들이 있는데 관련해서 간단히 적어보겠습니다.</p><p>  <code>우선 VPC와 Subnets입니다. VPC(Virutal Private Cloud)라는 이름에서 알 수 있는 것처럼 AWS 하나의 기능으로서 유저의 사설 네트워크 클라우드라고 생각</code>하시면 됩니다. 그리고 <code>Subnets은 VPC의 IP 주소 범위들을 관리하는 구성요소</code>라고 생각하시면 됩니다. <code>ALB나 ECS를 설정할 때에 어떤 VPC에 그리고 어떤 Subnets들에 연결해서 사용할 지 등을 설정</code>을 해주어야 합니다. Subnets이 IP 주소 범위들을 관리하는 구성요소들이라고 했는데 IP 주소 범위는 어떻게 표현할 수 있을까요? 보통 <code>IP 주소 범위는 IP CIDR라는 용어로 사용되는 방식으로 표현</code>됩니다. 관련 내용을 간단하게 설명해보겠습니다. 저도 네트워크에 대한 지식이 많지 않아 단어와 같은 것들이 정확하지 않을 수 있습니다. 0.0.0.0/0, 0.0.0.0/16, 0.0.0.0/24, 0.0.0.0/32와 같은 형태들을 보신 적이 있으실텐데, 각각의 의미를 간단히 설명해보면 다음과 같습니다. ip 하나의 섹션마다 모두 8bit로 표현되며, 제일 마지막 숫자는 8의 배수로 앞에서부터 몇칸까지가 HostId(픽스된 IP대역)인지를 표현합니다.</p><ul><li>0.0.0.0/0: HostId가 0개 이므로 모든 IP에 해당 한다고 볼 수 있습니다.</li><li>172.0.0.0/8: NetId(할당 가능한 IP대역)가 172까지이며 나머지 부분에 해당하는 IP 대역이 HostId라고 볼 수 있습니다.</li><li>172.55.0.0/16: NetId가 127.55까지이며 나머지 부분이 HostId라고 볼 수 있습니다.</li></ul><p><code>즉, 마지막 숫자는 8의 배수로 172.55.0.0/16이라고 표현하게되면, 172.55.x.x에 해당되는 모든 IP 대역을 표현하고 있다고 생각하면 됩니다.</code></p><p> <code>두 번째로, 보안그룹(securityGroup)입니다. 단어에서도 알 수 있는 것처럼 어떤 소스에서 서버에 접근할 수 있는지(inbound rules) 그리고 어떤 소스로 서버에서 요청을 보낼 수 있는지(outbound rules)들을 정하는 보안 규칙같은 것들을 정하는 구성요소라고 생각하면 됩니다.</code></p><p> <code>마지막으로, 타겟그룹입니다. 타겟그룹은 alb에 들어온 요청들을 어디로 전달할 것인지에 대한 설정입니다.</code> alb는 이름에서도 알 수 있는 것처럼 load balencer 역할을 하는 것이고, 타겟그룹으로 묶여있는 서버들에게 적절하게 request들을 분배하는 역할을 합니다.</p><h3 id="4-cloudfrontcdn"><a href="#4-cloudfrontcdn" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/cloudfront/">CloudFront(CDN)</a></h3><p>  <code>유저의 요청을 바로 alb로 연결할 수도 있지만, 캐싱을 활용하기 위해서 CloudFront를 최앞단에 배치했습니다.</code> cloudfront에는 origin이라는 개념이 있습니다. origin은 cloudfront를 통해서 들어오는 요청을 어디로 보낼 것인가라고 이해하면 됩니다. 예전에 cloudFront를 사용했을 때에는 s3 버킷을 origin만 사용할 수 있는줄 알았는데 요즘은 더 발전된 것인지 cloudfront의 origin으로 사용할 수 있는 종류들이 많아졌음을 배웠습니다. <code>cloudFront의 origin으로 s3 bucket을 사용할 수도 있고, alb도 사용할 수 있고, 그냥 단순히 domain을 연결할 수도 있습니다.</code> 모든 request를 alb를 통해서 ecs까지 도달하게 하지 않고, <code>단기간에 몰리는 traffic을 잘 관리하기 위해서 nextjs에서 cache-control을 설정하게 하고 cloudFront는 origin의 cache-control header를 보고 cache 정책</code>을 결정하도록 설정했습니다.</p><p> cloudFront 설정을 하면서 하나 겪었던 이슈가 있었는데, nextjs의 response에 기본적으로 아무런 cache-control header가 설정이 안된 상태였는데 배포를 해도 배포된 새로운 버전의 response가 안내려온는 문제가 있었습니다. <code>cloudFront에서 origin의 header를 기준으로 cache를 하도록 해두고 origin의 response에 아무런 cache-control 내용이 없으면 기본적으로 무제한 캐싱을 사용합니다.</code> 그래서 캐시를 안하고 싶은 예를 들어 <strong>html 요청</strong>들은 cache를 하지 않도록 cache-control을 <strong>no-cache</strong>로 설정해야 합니다.</p><h3 id="5-route53-acmaws-certificate-manager"><a href="#5-route53-acmaws-certificate-manager" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>5. <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/route53/">Route53</a>, <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/ko/certificate-manager/">ACM(AWS Certificate Manager)</a></h3><p> 드디어 마지막입니다. <code>유저가 서비스에 접근하기 위해서는 domain이 필요하고 그 도메인을 관리하는 영역은 route53이라는 서비스이고, 그 도메인에 https protocol을 지원하기 위해서는 ACM에서 인증서를 발급받고 연결해서 사용</code>해야 합니다. 위에서도 구조도를 보았지만 지금까지의 설명을 읽은 후에 아래 그림을 다시 한번 보았을 때 조금 더 이해가 되는 것 같은 느낌을 느끼실 수 있으면 좋겠네요.</p><p><img alt="서비스 구성도" src="https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png"/></p><p> <code>위 내용은 aws를 기준으로 인프라를 구성할 때에 대한 설명이며, 다른 provider를 이용할 때에는 다른 단어들이 사용될 수 있습니다. 그래도 비슷한 역할들을 하는 구성요소들은 다들 있을 것이고 어떤 역할을 하는지에 대해서만 간단히 익히고, 단어들에 대해서 조금은 익숙해질 수 있는 기회였다면 좋겠습니다.</code> 저도 사실 네트워크, 인프라에 대한 지식이 거의 없으며 이번 작업을 하면서 단편적으로 익힌 내용들을 적었습니다. 혹시나 부족한 설명이나 잘못된 설명이 있다면 언제든지 피드백 부탁드립니다.</p><h2 id="nextjs-서비스-배포하기"><a href="#nextjs-서비스-배포하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs 서비스 배포하기</h2><p>  이제 서비스 구성을 다했습니다. 그런데 우리는 계속 개발을 할 것이고 계속 서비스를 배포하고 새로운 기능을 유저에게 전달해야 합니다. 우리는 위와 같이 구성한 nextjs 앱을 어떻게 배포할 수 있을까요? 우선 ecs로 배포한 nextjs를 업데이트하기 위해서는 두 가지를 업데이트 해야 합니다.</p><ul><li><code>ecr에 docker image를 최신으로 배포합니다.</code></li><li><code>ecs에서 새로운 docker image를 사용하는 작업정의(task-definition)을 업데이트합니다.</code></li></ul><p> 저는 위 과정을 github action에 workflow를 작성하여 자동으로 배포를 진행하고 있습니다. 원래 모든 infra를 terraform으로 작성했었는데, terraform은 다른 repository에 따로 모아두고 있었고, 작업정의를 업데이트하기 위해서는 terraform을 같은 repository로 가져와야할까 고민했었는데요. infra code를 해당 repository로 가져오지는 않고 <code>ecs에 새로운 작업정의를 만드는 것을 aws cli의 aws ecs update-service를 이용해서 배포를 진행하고 있습니다.</code></p><h2 id="nextjs-서비스-모니터링하기"><a href="#nextjs-서비스-모니터링하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs 서비스 모니터링하기</h2><p>  앞으로 서비스를 실제로 운영하면서 모니터링하고 트러블슈팅을 해야할 일들이 더 많이 생길 것 같은데요. 우선은 ecs에서 기본적으로 제공해주는 <code>ecs 서비스의 측정치탭에서 기본적인 CPU, Memory값들을 모니터링합니다.</code> 그리고 특별히 서버에서 <code>어떤 에러들이 발생했는지 등을 확인하기위해서 CloudWatch를 생성해서 ecs 서비스의 로그탭에서 로그들을 확인하고 있습니다.</code> 아직 production이 배포되지 않은 상태라서 앞으로 어떤 툴들이 필요할지는 조금 더 시간이 지나야 구체적으로 더 많은 경험이 생기고 공유할 수 있을 것 같습니다.</p><h2 id="nextjs-서비스-아키텍처-구성-중-트러블슈팅"><a href="#nextjs-서비스-아키텍처-구성-중-트러블슈팅" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nextjs 서비스 아키텍처 구성 중 트러블슈팅</h2><h3 id="회사-내부의-네트워크에-대한-이해"><a href="#회사-내부의-네트워크에-대한-이해" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>회사 내부의 네트워크에 대한 이해</h3><p> 회사 내부에서 사용하는 aws 계정이 하나가 아니라 여러개였고 서로 연관성을 가지고 있었습니다. 이 이야기를 이 글에 자세히 쓸 순 없지만, 관련된 내용을 파악하느라 여기저기 여쭤보고 네트워크나 보안망에 대한 이해가 조금 더 필요했었습니다.</p><h3 id="cloudfront-origin-behavior에-대한-이해"><a href="#cloudfront-origin-behavior에-대한-이해" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>cloudfront origin, behavior에 대한 이해</h3><p>  cloudfront를 생성해서 사용하면 가장 기본적으로 익혀야하는 부분이 origin과 behavior에 대한 이해입니다. 우선 <code>origin은 content의 원천</code>이라고 생각하시면 됩니다. 그리고 <code>behavior는 origin에 대한 통신을 할 때에 어떤 규칙을 가지고 통신할 지에 대한 설정</code>들이라고 생각하시면 됩니다.</p><p>  <code>예를 들어 origin은 예를 들어서 s3 bucket</code>이 될 수 있고, <code>behavior는 어떤 path에 이 설정을 적용할 것인지 캐시는 어떤 값을 기준으로 할지 혹은 http 요청이 오면 https로 redirect한다와 같은 설정들을 추가</code>할 수 있습니다.</p><p>  실제로 cloudFront를 구성하면서 겪었던 트러블 슈팅에 대해서 간략히 공유하자면,</p><ul><li><code>cloudFront에서 캐시키를 origin의 header를 바라보게 만들고 origin의 header에 cache 관련 header가 없다면 무한 캐시가 기본 동작</code>입니다. origin에서 cache hader를 추가하지 않고 작업하다가 배포하니까 새롭게 배포된 앱이 서빙이 안되길래 살펴보니 위와 같은 문제를 겪었습니다.</li><li><code>cloudFront의 origin으로 특정 domain으로 설정했는데 cloudFront가 해당 origin에 접근해서 바로 response를 주는게 아니라 아예 301 상태 코드를 주면서 그 url로 redirect하는 문제</code>를 겪었습니다. 이는 <code>origin에서는 http만 받을 수 있도록 해두었는데, behavior에서 무조건 http to https redirect을 추가했었는데 두개의 설정이 충돌하면서 발생한 문제</code>였습니다. 위 두개의 설정에 대한 역할에 대해서 적절히 이해하고 있다면 저와 같은 실수를 여러분은 안하실 수 있을 것이라고 생각합니다.</li><li>제가 구성하는 nextjs 서비스는 next/image와 같은 next가 제공해주는 image 컴포넌트를 이용하기 위해서는 querystring에 대한 접근이 필요했고, 인증을 위해서 cookie에 대한 접근이 필요했습니다. 그런데 <code>기본적으로 cloudFront는 path를 기준으로만 작동하기 때문에, origin에서 query나 cookie가 필요하다면 query, cookie등도 모두 넘겨 주어야 한다는 설정을 behavior에 설정</code>해주어야 합니다.</li><li>cloudFront을 통해서 들어오는 요청만을 보안적으로 허용하고 싶다면, <a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/LocationsOfEdgeServers.html">cloudfront ip ranges</a>에서 실제로 cloudFront에서 사용하는 ip 대역들을 확인할 수 있습니다.</li></ul><h2 id="마무리"><a href="#마무리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>마무리</h2><p>  적다보니, <code>굉장히 글이 길어지고 스스로가 이해하고 있는 개념들이 굉장히 단편적이고 깊지 못하다는 사실까지 깨닫게 되었는데요. 지금 제가 이해하는 수준들이 걸음마라고 생각하고 앞으로 더 열심히 배우고 싶다는 생각이 들었습니다. 특별한 내용은 없지만 저와 같이 nextjs를 ecs로 구성하고 싶은데 어떻게 시작해야할지 모르는 단계에 있으신 누군가에게 조금이라도 도움이 되는 글이었으면 좋겠다고 생각</code>하면서 첫 번째 글을 마무리합니다.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fseonghyeonkimm.github.io%2F%2Fblog%2Fnextjs-develop-and-operation-1">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm/seonghyeonkimm.github.io/blob/master/data/blog/nextjs-develop-and-operation-1">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/nextjs">nextjs</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/react-query-ssr">react v18, nextjs, react-query 엣지 케이스</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/nextjs-develop-and-operation-2">nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:impressor7@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/seonghyeonkimm"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/seonghyeon-kim-328757b7/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/seonghyeon___"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Seonghyeon Kim</div><div> • </div><div>© 2025</div></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"nextjs 서비스 개발부터 운영까지 (1) - nextjs 서비스 아키텍처","date":"2021-12-18T00:00:00.000Z","tags":["nextjs"],"draft":false,"summary":"nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.","body":{"raw":"\n\u0026nbsp;nextjs로 지금 현재 커머스를 개발하고 있습니다. `그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.` 실제로 나중에는 어떻게 구성들이 추가될지 삭제될지 모르곘지만 아래와 같은 구성으로 몇개의 글을 작성해보려고 합니다. 긴 글을 다 읽기 귀찮으신 분들을 위해서 핵심 내용들만을 `강조`해두려고 최대한 노력했습니다. 시간이 부족하신 분들은 강조해둔 영역만 읽으셔도 충분할 것이라고 생각합니다.\n\n- [Part 1 - nextjs 서비스 아키텍처]()\n- [Part 2 - nextjs 서비스 개발 경험 및 트러블슈팅]()\n- Part 3 - nextjs 서비스 프러덕션 운영기 (Comming soon..)\n\n# Part 1 - nextjs 서비스 아키텍처\n\n\u0026nbsp;처음 글의 주제는 어떤 논의 및 의사결정 과정을 거쳐서 어떤 서비스 아키텍처를 구성하기로 결정했었는지에 대해서 공유하고 서비스 아키텍처를 구성하면서 어떤 요소들에 대한 이해와 공부가 필요했고, 어떤 트러블슈팅 등을 겪었는지에 대해서 적어 보겠습니다. 사실 이 글을 쓰기 시작하면서 얼마나 자세히 써야할까 고민을 했습니다. 결론적으로는 작성하면서 스스로도 어느 정도까지 이해하고 있는지에 대해서도 점검하면 좋겠다는 생각이 들었고, `최대한 자세하게 풀어서 적어 보면서 프론트엔드 개발자들 중에서 아직 SSR Framework에 대한 경험이 거의 없는 개발자들도 이해할 수 있도록 nextjs와 서비스 인프라 관련된 내용들에 있어서 어떤 역할을 하는 것이고 어떻게 사용되는 것인지에 대해서도 최대한 자세히 적어보기로 생각했습니다.`\n\n## 목차\n\n- [nextjs는 무엇에 쓰는 물건인가?](#nextjs는-무엇에-쓰는-물건인가)\n- [nextjs 서비스 아키텍처](#nextjs-서비스-아키텍처)\n- [nextjs 서비스 배포하기](#nextjs-서비스-배포하기)\n- [nextjs 서비스 모니터링](#nextjs-서비스-모니터링)\n- [nextjs 서비스 아키텍처 구성 중 트러블슈팅](#nextjs-서비스-아키텍처-구성-중-트러블슈팅)\n\n## nextjs는 무엇에 쓰는 물건인가?\n\n\u0026nbsp; React로 개발할 때에 SPA로 접근하는게 대부분이었습니다. 그래서 `SSR을 해야 하는 경우에만 nextjs를 찾았던 것으로 기억합니다. SEO에 대한 대응이 필요한 서비스 혹은 페이지를 만들어야 되는데 어떤 framework를 사용해야하지라는 질문을 할 때 보통 떠올리던 것이 nextjs였습니다.` 그렇지만, 지금 현재 nextjs는 **next export**를 통해서 서버 없이 동작할 수 있도록 **SSG(Static Site Generation)**을 지원하기도 하고, next 서버를 띄운다고 하더라도 html을 서빙하더라도 항상 매번 html을 생성해서 response를 해주는 것이 아니고 미리 빌드 시에 pre-rendering을 하여 특정 페이지는 html을 파일을 서빙하기도 하고 getServerSideProps API를 통해서 그때그때 Server에서 만들어지는 형태의 페이지를 섞어서 사용할 수도 있습니다. 그래서 지금 [공식 사이트](https://nextjs.org/)에 들어가게 되면 `SSR을 전면에 내세운 것이 아니라 The React Framework For Production이라는 문구로 소개하고 있고 SSR만을 위한 것이 아니라 React를 사용해서 Application을 개발할 때에 언제든지 사용할 수 있는 프레임워크`라고 생각하는 것이 맞을 것 같습니다. 또한 nextjs를 개발하고 운영을 [Vercel](https://vercel.com/)이라는 회사가 하고 있는데 굉장히 업데이트도 빠르게 되고 React Core Team, Google Chrome Team과 협업을 통해서 앞으로 미래의 웹 개발에 있어서 많은 부분들을 주도하고 있다고 느끼고 있습니다.\n\n![nextjs-introduction](https://user-images.githubusercontent.com/13966404/146634039-e27383f8-4190-4c99-a8d4-af7bdc05ec09.png)\n\n\u0026nbsp;특히 제가 엄청 경험이 많지는 않지만 `최근까지도 왠만하면 그냥 SPA로 개발하는게 훨씬 이득이 많지 않을까` 생각했었습니다. 왜냐하면 SSR을 떠올리던 첫 번째 이유였던 SEO도 Google 검색엔진의 경우에는 SPA를 알아서 로드해서 정보들을 가져갈 수 있고 검색엔진에 노출될 수 있다고 하기도 하고 실제 서버를 띄우는 것보다 SPA로 개발하면 인프라 운영 코스트 등 많은 것들이 월등히 쉽고 편리하기도 하기 때문입니다. 그런데 최근의 흐름을 보면 nextjs를 사용하는 회사들도 많아지고 [Remix](https://remix.run/)와 같은 SSR Framework도 나오면서 인기도 많이 얻고 있는 것으로 봐서 조금은 더 이쪽에 관심을 가져야 할 것 같다고 생각하고 있습니다. 지금 개인적으로 생각하기에 nextjs나 remix와 같은 프레임워크의 사용을 고려해야하는 경우를 생각해본다면 다음정도가 있지 않을까 생각합니다.\n\n- `비록 검색엔진들이 알아서 SPA도 알아서 체크한다고 하지만, SEO를 조금 더 잘 챙기고 싶다.`\n- `더 좋은 유저 경험을 주고 싶다. SPA나 SSR이 실제로 유저가 js까지 로드되는 시점을 생각한다면, 속도가 거의 차이가 없다고 알려져 있지만, FCP(First Content Paint)는 SSR이 훨씬 빠르기 때문에 더 좋은 유저 경험을 줄 수 있다고 생각하고 있습니다. 아무리 조금이라도 최대한 빠르게 유저에게 웹의 컨텐츠를 보여주는 것만으로도 리텐션에 꽤 많은 차이를 가져올 수 있다는 연구결과도 있기도 하니까요.`\n\n\u0026nbsp;그리고 SPA가 SSR보다 편리했던 인프라 운영 코스트 등도 Vercel이나 Netlify나 다른 Provider들을 통해서 기술들이 발전하면서 훨씬 덜 신경쓰고 서버를 띄울 수 있고 관리할 수 있게 되었기 때문에 예전보다는 운영 코스트에 대한 걱정을 조금은 덜 해도 되지 않을까라는 생각도 듭니다. 또한 요즘 가끔 보이는 BFF([Backend For Frontend](https://docs.microsoft.com/ko-kr/azure/architecture/patterns/backends-for-frontends))와 같은 개념을 적용해보는 것도 해보고 싶다는 생각이 많이 드네요.\n\n## nextjs 서비스 아키텍처\n\n\u0026nbsp;처음에 nextjs로 SSR React앱을 구현 해야하는 상황에서 서비스를 어떻게 운영할 것인지에 대한 대안으로 몇 가지를 논의했었습니다. 물론 가장 쉽게 nextjs 앱을 띄우는 방법으로 vercel을 사용할 수 있지만, `회사 내부의 보안정책으로 인해서 무조건 aws 안에서만 구성을 해야만 했습니다. 아래에 적은 방법 이외에도 다른 방법들이 있겠지만 제가 아는 한도 안에서는 결국 마지막 선택사항은 아래 두 가지`였습니다.\n\n- [serverless framework](https://github.com/serverless-nextjs/serverless-next.js)\n  - cloudfront\n  - lambda@edge\n- [ECS(Elastic Container Service)](https://aws.amazon.com/ko/ecs/)\n  - fargate\n\n\u0026nbsp;우선 서비스를 띄울 수 있는 방법은 많지만 그 중에서도 `안정적인 서비스 운영을 위해서 많은 트래픽이 몰려도 수월하게 스케일링할 수 있는 구성이 가장 중요했습니다. 그래서 aws안에서 구성할 수 있는 방법은 위의 두 가지 방법을 생각`했고, 그 중에서는 저희는 두 번째인 `ECS를 선택`했습니다. `사실 둘 중에 어떤 것이 더 우월한가에 대한 없겠지만, 우선 회사 내부에서 서버를 띄울 때 보통 두 번째 방식인 ECS를 사용하는 경우가 많았습니다.` 그러므로 제가 직접 구성하면서 여쭤볼 수 있는 분들이 있었다는 사실과 `serverless framework는 개인적으로 해본 경험이 있었기 때문에 다른 새로운 챌린지를 해보고 싶다는 욕구`도 있었습니다.\n\n\u0026nbsp;별거 없지만, 위와 같은 이유 때문에 ECS를 사용해서 서버를 띄우기로 결정했습니다. 구체적으로 어떤 설정들을 AWS에서 구성해야 nextjs를 운영할 수 있는 인프라를 구성할 수 있는 지에 대해서 하나씩 실제로 구성을 했던 순서대로 설명을 조금 더 자세히 해보겠습니다. 실제로 인프라를 구성하기 위해서 terraform을 사용해서 구성했었지만 자세한 infra 코드보다는 각각의 구성요소가 어떤 역할을 하는지에 집중해서 작성 해보겠습니다. 자세한 설명을 하기 전에 결국 구성된 모습은 다음과 같습니다. 각 요소들을 설명하고 나서 이 그림을 다시 한 번 보겠습니다.\n\n![서비스 구성도](https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png)\n\n### 1. [ECR(Elastic Container Registry)](https://aws.amazon.com/ko/ecr/) 구성하기\n\n\u0026nbsp;ECS라는 이름에서도 알 수 있는 것처럼 `ECS는 Docker Container를 사용해서 서버를 띄우는 서비스이고 Docker Container를 띄우기 위해서는 Docker Image를 build하고 Docker Image를 Push하고 관리해야 합니다. Docker Image를 push하고 관리하는 서비스가 바로 ECR`입니다.\n\n### 2. [ECS(Elastic Container Service)](https://aws.amazon.com/ko/ecs/)로 서버 띄우기\n\n\u0026nbsp;ECR에 Docker Image를 올려 두었다면, 그 이후에 신경 써야할 부분은 바로 `ECS를 사용해서 ECR에 올라와있는 Docker Image를 사용해서 서버를 띄우는 일`입니다. ECS가 서버를 띄우는 방법으로는 두 가지가 있는데 바로 위에서도 언급했던 **Fargate**가 있고 아니면 많이들 알고 계실 **EC2**를 사용하는 방식입니다. 저는 스케일링이 더 수월한 Fargate를 이용했습니다.\n\n\u0026nbsp;`ECS를 이해하기 위해서는 작업 정의(Task Definition)라는 용어를 이해해야 합니다. ECS는 서버를 띄울 때에 특정 작업을 기준으로 판단하는 데 그것이 작업 정의라고 부릅니다.` 작업 정의에는 서비스를 띄울 때에 `어떤 Docker Image를 사용할지 서버의 물리적인 스펙들을 어떻게 할지 등 서비스를 띄우기에 필요한 메타 정보들을 관리하는 것이라고 생각`하시면 됩니다.\n\n### 3. [ALB(application Load Balancer)](https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/introduction.html)\n\n\u0026nbsp;`ALB는 ECS가 여러개의 container service를 띄웠을 때에 앞단에서 유저의 request를 받아서 request를 분배하는 역할을 합니다.` ALB를 설정할 때에 신경써야 하는 몇 가지 구성요소들이 있는데 관련해서 간단히 적어보겠습니다.\n\n\u0026nbsp; `우선 VPC와 Subnets입니다. VPC(Virutal Private Cloud)라는 이름에서 알 수 있는 것처럼 AWS 하나의 기능으로서 유저의 사설 네트워크 클라우드라고 생각`하시면 됩니다. 그리고 `Subnets은 VPC의 IP 주소 범위들을 관리하는 구성요소`라고 생각하시면 됩니다. `ALB나 ECS를 설정할 때에 어떤 VPC에 그리고 어떤 Subnets들에 연결해서 사용할 지 등을 설정`을 해주어야 합니다. Subnets이 IP 주소 범위들을 관리하는 구성요소들이라고 했는데 IP 주소 범위는 어떻게 표현할 수 있을까요? 보통 `IP 주소 범위는 IP CIDR라는 용어로 사용되는 방식으로 표현`됩니다. 관련 내용을 간단하게 설명해보겠습니다. 저도 네트워크에 대한 지식이 많지 않아 단어와 같은 것들이 정확하지 않을 수 있습니다. 0.0.0.0/0, 0.0.0.0/16, 0.0.0.0/24, 0.0.0.0/32와 같은 형태들을 보신 적이 있으실텐데, 각각의 의미를 간단히 설명해보면 다음과 같습니다. ip 하나의 섹션마다 모두 8bit로 표현되며, 제일 마지막 숫자는 8의 배수로 앞에서부터 몇칸까지가 HostId(픽스된 IP대역)인지를 표현합니다.\n\n- 0.0.0.0/0: HostId가 0개 이므로 모든 IP에 해당 한다고 볼 수 있습니다.\n- 172.0.0.0/8: NetId(할당 가능한 IP대역)가 172까지이며 나머지 부분에 해당하는 IP 대역이 HostId라고 볼 수 있습니다.\n- 172.55.0.0/16: NetId가 127.55까지이며 나머지 부분이 HostId라고 볼 수 있습니다.\n\n`즉, 마지막 숫자는 8의 배수로 172.55.0.0/16이라고 표현하게되면, 172.55.x.x에 해당되는 모든 IP 대역을 표현하고 있다고 생각하면 됩니다.`\n\n\u0026nbsp;`두 번째로, 보안그룹(securityGroup)입니다. 단어에서도 알 수 있는 것처럼 어떤 소스에서 서버에 접근할 수 있는지(inbound rules) 그리고 어떤 소스로 서버에서 요청을 보낼 수 있는지(outbound rules)들을 정하는 보안 규칙같은 것들을 정하는 구성요소라고 생각하면 됩니다.`\n\n\u0026nbsp;`마지막으로, 타겟그룹입니다. 타겟그룹은 alb에 들어온 요청들을 어디로 전달할 것인지에 대한 설정입니다.` alb는 이름에서도 알 수 있는 것처럼 load balencer 역할을 하는 것이고, 타겟그룹으로 묶여있는 서버들에게 적절하게 request들을 분배하는 역할을 합니다.\n\n### 4. [CloudFront(CDN)](https://aws.amazon.com/ko/cloudfront/)\n\n\u0026nbsp; `유저의 요청을 바로 alb로 연결할 수도 있지만, 캐싱을 활용하기 위해서 CloudFront를 최앞단에 배치했습니다.` cloudfront에는 origin이라는 개념이 있습니다. origin은 cloudfront를 통해서 들어오는 요청을 어디로 보낼 것인가라고 이해하면 됩니다. 예전에 cloudFront를 사용했을 때에는 s3 버킷을 origin만 사용할 수 있는줄 알았는데 요즘은 더 발전된 것인지 cloudfront의 origin으로 사용할 수 있는 종류들이 많아졌음을 배웠습니다. `cloudFront의 origin으로 s3 bucket을 사용할 수도 있고, alb도 사용할 수 있고, 그냥 단순히 domain을 연결할 수도 있습니다.` 모든 request를 alb를 통해서 ecs까지 도달하게 하지 않고, `단기간에 몰리는 traffic을 잘 관리하기 위해서 nextjs에서 cache-control을 설정하게 하고 cloudFront는 origin의 cache-control header를 보고 cache 정책`을 결정하도록 설정했습니다.\n\n\u0026nbsp;cloudFront 설정을 하면서 하나 겪었던 이슈가 있었는데, nextjs의 response에 기본적으로 아무런 cache-control header가 설정이 안된 상태였는데 배포를 해도 배포된 새로운 버전의 response가 안내려온는 문제가 있었습니다. `cloudFront에서 origin의 header를 기준으로 cache를 하도록 해두고 origin의 response에 아무런 cache-control 내용이 없으면 기본적으로 무제한 캐싱을 사용합니다.` 그래서 캐시를 안하고 싶은 예를 들어 **html 요청**들은 cache를 하지 않도록 cache-control을 **no-cache**로 설정해야 합니다.\n\n### 5. [Route53](https://aws.amazon.com/ko/route53/), [ACM(AWS Certificate Manager)](https://aws.amazon.com/ko/certificate-manager/)\n\n\u0026nbsp;드디어 마지막입니다. `유저가 서비스에 접근하기 위해서는 domain이 필요하고 그 도메인을 관리하는 영역은 route53이라는 서비스이고, 그 도메인에 https protocol을 지원하기 위해서는 ACM에서 인증서를 발급받고 연결해서 사용`해야 합니다. 위에서도 구조도를 보았지만 지금까지의 설명을 읽은 후에 아래 그림을 다시 한번 보았을 때 조금 더 이해가 되는 것 같은 느낌을 느끼실 수 있으면 좋겠네요.\n\n![서비스 구성도](https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png)\n\n\u0026nbsp;`위 내용은 aws를 기준으로 인프라를 구성할 때에 대한 설명이며, 다른 provider를 이용할 때에는 다른 단어들이 사용될 수 있습니다. 그래도 비슷한 역할들을 하는 구성요소들은 다들 있을 것이고 어떤 역할을 하는지에 대해서만 간단히 익히고, 단어들에 대해서 조금은 익숙해질 수 있는 기회였다면 좋겠습니다.` 저도 사실 네트워크, 인프라에 대한 지식이 거의 없으며 이번 작업을 하면서 단편적으로 익힌 내용들을 적었습니다. 혹시나 부족한 설명이나 잘못된 설명이 있다면 언제든지 피드백 부탁드립니다.\n\n## nextjs 서비스 배포하기\n\n\u0026nbsp; 이제 서비스 구성을 다했습니다. 그런데 우리는 계속 개발을 할 것이고 계속 서비스를 배포하고 새로운 기능을 유저에게 전달해야 합니다. 우리는 위와 같이 구성한 nextjs 앱을 어떻게 배포할 수 있을까요? 우선 ecs로 배포한 nextjs를 업데이트하기 위해서는 두 가지를 업데이트 해야 합니다.\n\n- `ecr에 docker image를 최신으로 배포합니다.`\n- `ecs에서 새로운 docker image를 사용하는 작업정의(task-definition)을 업데이트합니다.`\n\n\u0026nbsp;저는 위 과정을 github action에 workflow를 작성하여 자동으로 배포를 진행하고 있습니다. 원래 모든 infra를 terraform으로 작성했었는데, terraform은 다른 repository에 따로 모아두고 있었고, 작업정의를 업데이트하기 위해서는 terraform을 같은 repository로 가져와야할까 고민했었는데요. infra code를 해당 repository로 가져오지는 않고 `ecs에 새로운 작업정의를 만드는 것을 aws cli의 aws ecs update-service를 이용해서 배포를 진행하고 있습니다.`\n\n## nextjs 서비스 모니터링하기\n\n\u0026nbsp; 앞으로 서비스를 실제로 운영하면서 모니터링하고 트러블슈팅을 해야할 일들이 더 많이 생길 것 같은데요. 우선은 ecs에서 기본적으로 제공해주는 `ecs 서비스의 측정치탭에서 기본적인 CPU, Memory값들을 모니터링합니다.` 그리고 특별히 서버에서 `어떤 에러들이 발생했는지 등을 확인하기위해서 CloudWatch를 생성해서 ecs 서비스의 로그탭에서 로그들을 확인하고 있습니다.` 아직 production이 배포되지 않은 상태라서 앞으로 어떤 툴들이 필요할지는 조금 더 시간이 지나야 구체적으로 더 많은 경험이 생기고 공유할 수 있을 것 같습니다.\n\n## nextjs 서비스 아키텍처 구성 중 트러블슈팅\n\n### 회사 내부의 네트워크에 대한 이해\n\n\u0026nbsp;회사 내부에서 사용하는 aws 계정이 하나가 아니라 여러개였고 서로 연관성을 가지고 있었습니다. 이 이야기를 이 글에 자세히 쓸 순 없지만, 관련된 내용을 파악하느라 여기저기 여쭤보고 네트워크나 보안망에 대한 이해가 조금 더 필요했었습니다.\n\n### cloudfront origin, behavior에 대한 이해\n\n\u0026nbsp; cloudfront를 생성해서 사용하면 가장 기본적으로 익혀야하는 부분이 origin과 behavior에 대한 이해입니다. 우선 `origin은 content의 원천`이라고 생각하시면 됩니다. 그리고 `behavior는 origin에 대한 통신을 할 때에 어떤 규칙을 가지고 통신할 지에 대한 설정`들이라고 생각하시면 됩니다.\n\n\u0026nbsp; `예를 들어 origin은 예를 들어서 s3 bucket`이 될 수 있고, `behavior는 어떤 path에 이 설정을 적용할 것인지 캐시는 어떤 값을 기준으로 할지 혹은 http 요청이 오면 https로 redirect한다와 같은 설정들을 추가`할 수 있습니다.\n\n\u0026nbsp; 실제로 cloudFront를 구성하면서 겪었던 트러블 슈팅에 대해서 간략히 공유하자면,\n\n- `cloudFront에서 캐시키를 origin의 header를 바라보게 만들고 origin의 header에 cache 관련 header가 없다면 무한 캐시가 기본 동작`입니다. origin에서 cache hader를 추가하지 않고 작업하다가 배포하니까 새롭게 배포된 앱이 서빙이 안되길래 살펴보니 위와 같은 문제를 겪었습니다.\n- `cloudFront의 origin으로 특정 domain으로 설정했는데 cloudFront가 해당 origin에 접근해서 바로 response를 주는게 아니라 아예 301 상태 코드를 주면서 그 url로 redirect하는 문제`를 겪었습니다. 이는 `origin에서는 http만 받을 수 있도록 해두었는데, behavior에서 무조건 http to https redirect을 추가했었는데 두개의 설정이 충돌하면서 발생한 문제`였습니다. 위 두개의 설정에 대한 역할에 대해서 적절히 이해하고 있다면 저와 같은 실수를 여러분은 안하실 수 있을 것이라고 생각합니다.\n- 제가 구성하는 nextjs 서비스는 next/image와 같은 next가 제공해주는 image 컴포넌트를 이용하기 위해서는 querystring에 대한 접근이 필요했고, 인증을 위해서 cookie에 대한 접근이 필요했습니다. 그런데 `기본적으로 cloudFront는 path를 기준으로만 작동하기 때문에, origin에서 query나 cookie가 필요하다면 query, cookie등도 모두 넘겨 주어야 한다는 설정을 behavior에 설정`해주어야 합니다.\n- cloudFront을 통해서 들어오는 요청만을 보안적으로 허용하고 싶다면, [cloudfront ip ranges](https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/LocationsOfEdgeServers.html)에서 실제로 cloudFront에서 사용하는 ip 대역들을 확인할 수 있습니다.\n\n## 마무리\n\n\u0026nbsp; 적다보니, `굉장히 글이 길어지고 스스로가 이해하고 있는 개념들이 굉장히 단편적이고 깊지 못하다는 사실까지 깨닫게 되었는데요. 지금 제가 이해하는 수준들이 걸음마라고 생각하고 앞으로 더 열심히 배우고 싶다는 생각이 들었습니다. 특별한 내용은 없지만 저와 같이 nextjs를 ecs로 구성하고 싶은데 어떻게 시작해야할지 모르는 단계에 있으신 누군가에게 조금이라도 도움이 되는 글이었으면 좋겠다고 생각`하면서 첫 번째 글을 마무리합니다.\n","code":"var Component=(()=\u003e{var l=Object.create;var d=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var o=r=\u003ed(r,\"__esModule\",{value:!0});var m=(r,i)=\u003e()=\u003e(i||r((i={exports:{}}).exports,i),i.exports),x=(r,i)=\u003e{o(r);for(var c in i)d(r,c,{get:i[c],enumerable:!0})},f=(r,i,c)=\u003e{if(i\u0026\u0026typeof i==\"object\"||typeof i==\"function\")for(let n of s(i))!u.call(r,n)\u0026\u0026n!==\"default\"\u0026\u0026d(r,n,{get:()=\u003ei[n],enumerable:!(c=h(i,n))||c.enumerable});return r},g=r=\u003ef(o(d(r!=null?l(p(r)):{},\"default\",r\u0026\u0026r.__esModule\u0026\u0026\"default\"in r?{get:()=\u003er.default,enumerable:!0}:{value:r,enumerable:!0})),r);var a=m((k,t)=\u003e{t.exports=_jsx_runtime});var b={};x(b,{default:()=\u003ej,frontmatter:()=\u003eC});var e=g(a()),C={title:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uAC1C\\uBC1C\\uBD80\\uD130 \\uC6B4\\uC601\\uAE4C\\uC9C0 (1) - nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\",date:\"2021-12-18\",tags:[\"nextjs\"],draft:!1,summary:\"nextjs\\uB85C \\uC9C0\\uAE08 \\uD604\\uC7AC \\uCEE4\\uBA38\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC5B4\\uCA4C\\uB2E4\\uBCF4\\uB2C8 \\uB9CE\\uC740 \\uBD80\\uBD84\\uC5D0 \\uC788\\uC5B4\\uC11C \\uC9C1\\uC811 \\uC14B\\uC5C5\\uD558\\uB294 \\uACFC\\uC815\\uC5D0 \\uCC38\\uC5EC\\uD588\\uACE0, \\uADF8 \\uACFC\\uC815\\uC5D0\\uC11C \\uBC30\\uC6E0\\uB358 \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uD300\\uC6D0\\uB4E4\\uC5D0\\uAC8C \\uACF5\\uC720\\uD558\\uACE0\\uC790 \\uB2E4\\uC74C \\uAE00\\uC744 \\uAE30\\uD68D\\uD588\\uC2B5\\uB2C8\\uB2E4.\"};function E(r={}){let{wrapper:i}=r.components||{};return i?(0,e.jsx)(i,Object.assign({},r,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",code:\"code\",ul:\"ul\",li:\"li\",a:\"a\",h1:\"h1\",span:\"span\",h2:\"h2\",strong:\"strong\",img:\"img\",h3:\"h3\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"\\xA0nextjs\\uB85C \\uC9C0\\uAE08 \\uD604\\uC7AC \\uCEE4\\uBA38\\uC2A4\\uB97C \\uAC1C\\uBC1C\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uADF8\\uB7F0\\uB370 \\uC5B4\\uCA4C\\uB2E4\\uBCF4\\uB2C8 \\uB9CE\\uC740 \\uBD80\\uBD84\\uC5D0 \\uC788\\uC5B4\\uC11C \\uC9C1\\uC811 \\uC14B\\uC5C5\\uD558\\uB294 \\uACFC\\uC815\\uC5D0 \\uCC38\\uC5EC\\uD588\\uACE0, \\uADF8 \\uACFC\\uC815\\uC5D0\\uC11C \\uBC30\\uC6E0\\uB358 \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uD300\\uC6D0\\uB4E4\\uC5D0\\uAC8C \\uACF5\\uC720\\uD558\\uACE0\\uC790 \\uB2E4\\uC74C \\uAE00\\uC744 \\uAE30\\uD68D\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC2E4\\uC81C\\uB85C \\uB098\\uC911\\uC5D0\\uB294 \\uC5B4\\uB5BB\\uAC8C \\uAD6C\\uC131\\uB4E4\\uC774 \\uCD94\\uAC00\\uB420\\uC9C0 \\uC0AD\\uC81C\\uB420\\uC9C0 \\uBAA8\\uB974\\uACD8\\uC9C0\\uB9CC \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uAD6C\\uC131\\uC73C\\uB85C \\uBA87\\uAC1C\\uC758 \\uAE00\\uC744 \\uC791\\uC131\\uD574\\uBCF4\\uB824\\uACE0 \\uD569\\uB2C8\\uB2E4. \\uAE34 \\uAE00\\uC744 \\uB2E4 \\uC77D\\uAE30 \\uADC0\\uCC2E\\uC73C\\uC2E0 \\uBD84\\uB4E4\\uC744 \\uC704\\uD574\\uC11C \\uD575\\uC2EC \\uB0B4\\uC6A9\\uB4E4\\uB9CC\\uC744 \",(0,e.jsx)(n.code,{children:\"\\uAC15\\uC870\"}),\"\\uD574\\uB450\\uB824\\uACE0 \\uCD5C\\uB300\\uD55C \\uB178\\uB825\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC2DC\\uAC04\\uC774 \\uBD80\\uC871\\uD558\\uC2E0 \\uBD84\\uB4E4\\uC740 \\uAC15\\uC870\\uD574\\uB454 \\uC601\\uC5ED\\uB9CC \\uC77D\\uC73C\\uC154\\uB3C4 \\uCDA9\\uBD84\\uD560 \\uAC83\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"\",children:\"Part 1 - nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"\",children:\"Part 2 - nextjs \\uC11C\\uBE44\\uC2A4 \\uAC1C\\uBC1C \\uACBD\\uD5D8 \\uBC0F \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\"})}),(0,e.jsx)(n.li,{children:\"Part 3 - nextjs \\uC11C\\uBE44\\uC2A4 \\uD504\\uB7EC\\uB355\\uC158 \\uC6B4\\uC601\\uAE30 (Comming soon..)\"})]}),(0,e.jsxs)(n.h1,{id:\"part-1---nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98\",children:[(0,e.jsx)(n.a,{href:\"#part-1---nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Part 1 - nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uCC98\\uC74C \\uAE00\\uC758 \\uC8FC\\uC81C\\uB294 \\uC5B4\\uB5A4 \\uB17C\\uC758 \\uBC0F \\uC758\\uC0AC\\uACB0\\uC815 \\uACFC\\uC815\\uC744 \\uAC70\\uCCD0\\uC11C \\uC5B4\\uB5A4 \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\\uB97C \\uAD6C\\uC131\\uD558\\uAE30\\uB85C \\uACB0\\uC815\\uD588\\uC5C8\\uB294\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uACF5\\uC720\\uD558\\uACE0 \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\\uB97C \\uAD6C\\uC131\\uD558\\uBA74\\uC11C \\uC5B4\\uB5A4 \\uC694\\uC18C\\uB4E4\\uC5D0 \\uB300\\uD55C \\uC774\\uD574\\uC640 \\uACF5\\uBD80\\uAC00 \\uD544\\uC694\\uD588\\uACE0, \\uC5B4\\uB5A4 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305 \\uB4F1\\uC744 \\uACAA\\uC5C8\\uB294\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uC801\\uC5B4 \\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uC0AC\\uC2E4 \\uC774 \\uAE00\\uC744 \\uC4F0\\uAE30 \\uC2DC\\uC791\\uD558\\uBA74\\uC11C \\uC5BC\\uB9C8\\uB098 \\uC790\\uC138\\uD788 \\uC368\\uC57C\\uD560\\uAE4C \\uACE0\\uBBFC\\uC744 \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uACB0\\uB860\\uC801\\uC73C\\uB85C\\uB294 \\uC791\\uC131\\uD558\\uBA74\\uC11C \\uC2A4\\uC2A4\\uB85C\\uB3C4 \\uC5B4\\uB290 \\uC815\\uB3C4\\uAE4C\\uC9C0 \\uC774\\uD574\\uD558\\uACE0 \\uC788\\uB294\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C\\uB3C4 \\uC810\\uAC80\\uD558\\uBA74 \\uC88B\\uACA0\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC774 \\uB4E4\\uC5C8\\uACE0, \",(0,e.jsx)(n.code,{children:\"\\uCD5C\\uB300\\uD55C \\uC790\\uC138\\uD558\\uAC8C \\uD480\\uC5B4\\uC11C \\uC801\\uC5B4 \\uBCF4\\uBA74\\uC11C \\uD504\\uB860\\uD2B8\\uC5D4\\uB4DC \\uAC1C\\uBC1C\\uC790\\uB4E4 \\uC911\\uC5D0\\uC11C \\uC544\\uC9C1 SSR Framework\\uC5D0 \\uB300\\uD55C \\uACBD\\uD5D8\\uC774 \\uAC70\\uC758 \\uC5C6\\uB294 \\uAC1C\\uBC1C\\uC790\\uB4E4\\uB3C4 \\uC774\\uD574\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D nextjs\\uC640 \\uC11C\\uBE44\\uC2A4 \\uC778\\uD504\\uB77C \\uAD00\\uB828\\uB41C \\uB0B4\\uC6A9\\uB4E4\\uC5D0 \\uC788\\uC5B4\\uC11C \\uC5B4\\uB5A4 \\uC5ED\\uD560\\uC744 \\uD558\\uB294 \\uAC83\\uC774\\uACE0 \\uC5B4\\uB5BB\\uAC8C \\uC0AC\\uC6A9\\uB418\\uB294 \\uAC83\\uC778\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C\\uB3C4 \\uCD5C\\uB300\\uD55C \\uC790\\uC138\\uD788 \\uC801\\uC5B4\\uBCF4\\uAE30\\uB85C \\uC0DD\\uAC01\\uD588\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,e.jsxs)(n.h2,{id:\"\\uBAA9\\uCC28\",children:[(0,e.jsx)(n.a,{href:\"#\\uBAA9\\uCC28\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBAA9\\uCC28\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs%EB%8A%94-%EB%AC%B4%EC%97%87%EC%97%90-%EC%93%B0%EB%8A%94-%EB%AC%BC%EA%B1%B4%EC%9D%B8%EA%B0%80\",children:\"nextjs\\uB294 \\uBB34\\uC5C7\\uC5D0 \\uC4F0\\uB294 \\uBB3C\\uAC74\\uC778\\uAC00?\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\",children:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\",children:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uBC30\\uD3EC\\uD558\\uAE30\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\",children:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uBAA8\\uB2C8\\uD130\\uB9C1\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%84%B1-%EC%A4%91-%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85\",children:\"nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98 \\uAD6C\\uC131 \\uC911 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\"})})]}),(0,e.jsxs)(n.h2,{id:\"nextjs\\uB294-\\uBB34\\uC5C7\\uC5D0-\\uC4F0\\uB294-\\uBB3C\\uAC74\\uC778\\uAC00\",children:[(0,e.jsx)(n.a,{href:\"#nextjs\\uB294-\\uBB34\\uC5C7\\uC5D0-\\uC4F0\\uB294-\\uBB3C\\uAC74\\uC778\\uAC00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nextjs\\uB294 \\uBB34\\uC5C7\\uC5D0 \\uC4F0\\uB294 \\uBB3C\\uAC74\\uC778\\uAC00?\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 React\\uB85C \\uAC1C\\uBC1C\\uD560 \\uB54C\\uC5D0 SPA\\uB85C \\uC811\\uADFC\\uD558\\uB294\\uAC8C \\uB300\\uBD80\\uBD84\\uC774\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \",(0,e.jsx)(n.code,{children:\"SSR\\uC744 \\uD574\\uC57C \\uD558\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB9CC nextjs\\uB97C \\uCC3E\\uC558\\uB358 \\uAC83\\uC73C\\uB85C \\uAE30\\uC5B5\\uD569\\uB2C8\\uB2E4. SEO\\uC5D0 \\uB300\\uD55C \\uB300\\uC751\\uC774 \\uD544\\uC694\\uD55C \\uC11C\\uBE44\\uC2A4 \\uD639\\uC740 \\uD398\\uC774\\uC9C0\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC57C \\uB418\\uB294\\uB370 \\uC5B4\\uB5A4 framework\\uB97C \\uC0AC\\uC6A9\\uD574\\uC57C\\uD558\\uC9C0\\uB77C\\uB294 \\uC9C8\\uBB38\\uC744 \\uD560 \\uB54C \\uBCF4\\uD1B5 \\uB5A0\\uC62C\\uB9AC\\uB358 \\uAC83\\uC774 nextjs\\uC600\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB807\\uC9C0\\uB9CC, \\uC9C0\\uAE08 \\uD604\\uC7AC nextjs\\uB294 \",(0,e.jsx)(n.strong,{children:\"next export\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C \\uC11C\\uBC84 \\uC5C6\\uC774 \\uB3D9\\uC791\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D **SSG(Static Site Generation)**\\uC744 \\uC9C0\\uC6D0\\uD558\\uAE30\\uB3C4 \\uD558\\uACE0, next \\uC11C\\uBC84\\uB97C \\uB744\\uC6B4\\uB2E4\\uACE0 \\uD558\\uB354\\uB77C\\uB3C4 html\\uC744 \\uC11C\\uBE59\\uD558\\uB354\\uB77C\\uB3C4 \\uD56D\\uC0C1 \\uB9E4\\uBC88 html\\uC744 \\uC0DD\\uC131\\uD574\\uC11C response\\uB97C \\uD574\\uC8FC\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uACE0 \\uBBF8\\uB9AC \\uBE4C\\uB4DC \\uC2DC\\uC5D0 pre-rendering\\uC744 \\uD558\\uC5EC \\uD2B9\\uC815 \\uD398\\uC774\\uC9C0\\uB294 html\\uC744 \\uD30C\\uC77C\\uC744 \\uC11C\\uBE59\\uD558\\uAE30\\uB3C4 \\uD558\\uACE0 getServerSideProps API\\uB97C \\uD1B5\\uD574\\uC11C \\uADF8\\uB54C\\uADF8\\uB54C Server\\uC5D0\\uC11C \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uB294 \\uD615\\uD0DC\\uC758 \\uD398\\uC774\\uC9C0\\uB97C \\uC11E\\uC5B4\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uC9C0\\uAE08 \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/\",children:\"\\uACF5\\uC2DD \\uC0AC\\uC774\\uD2B8\"}),\"\\uC5D0 \\uB4E4\\uC5B4\\uAC00\\uAC8C \\uB418\\uBA74 \",(0,e.jsx)(n.code,{children:\"SSR\\uC744 \\uC804\\uBA74\\uC5D0 \\uB0B4\\uC138\\uC6B4 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C The React Framework For Production\\uC774\\uB77C\\uB294 \\uBB38\\uAD6C\\uB85C \\uC18C\\uAC1C\\uD558\\uACE0 \\uC788\\uACE0 SSR\\uB9CC\\uC744 \\uC704\\uD55C \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C React\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C Application\\uC744 \\uAC1C\\uBC1C\\uD560 \\uB54C\\uC5D0 \\uC5B8\\uC81C\\uB4E0\\uC9C0 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\"}),\"\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uB294 \\uAC83\\uC774 \\uB9DE\\uC744 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4. \\uB610\\uD55C nextjs\\uB97C \\uAC1C\\uBC1C\\uD558\\uACE0 \\uC6B4\\uC601\\uC744 \",(0,e.jsx)(n.a,{href:\"https://vercel.com/\",children:\"Vercel\"}),\"\\uC774\\uB77C\\uB294 \\uD68C\\uC0AC\\uAC00 \\uD558\\uACE0 \\uC788\\uB294\\uB370 \\uAD49\\uC7A5\\uD788 \\uC5C5\\uB370\\uC774\\uD2B8\\uB3C4 \\uBE60\\uB974\\uAC8C \\uB418\\uACE0 React Core Team, Google Chrome Team\\uACFC \\uD611\\uC5C5\\uC744 \\uD1B5\\uD574\\uC11C \\uC55E\\uC73C\\uB85C \\uBBF8\\uB798\\uC758 \\uC6F9 \\uAC1C\\uBC1C\\uC5D0 \\uC788\\uC5B4\\uC11C \\uB9CE\\uC740 \\uBD80\\uBD84\\uB4E4\\uC744 \\uC8FC\\uB3C4\\uD558\\uACE0 \\uC788\\uB2E4\\uACE0 \\uB290\\uB07C\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"nextjs-introduction\",src:\"https://user-images.githubusercontent.com/13966404/146634039-e27383f8-4190-4c99-a8d4-af7bdc05ec09.png\"})}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uD2B9\\uD788 \\uC81C\\uAC00 \\uC5C4\\uCCAD \\uACBD\\uD5D8\\uC774 \\uB9CE\\uC9C0\\uB294 \\uC54A\\uC9C0\\uB9CC \",(0,e.jsx)(n.code,{children:\"\\uCD5C\\uADFC\\uAE4C\\uC9C0\\uB3C4 \\uC660\\uB9CC\\uD558\\uBA74 \\uADF8\\uB0E5 SPA\\uB85C \\uAC1C\\uBC1C\\uD558\\uB294\\uAC8C \\uD6E8\\uC52C \\uC774\\uB4DD\\uC774 \\uB9CE\\uC9C0 \\uC54A\\uC744\\uAE4C\"}),\" \\uC0DD\\uAC01\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC65C\\uB0D0\\uD558\\uBA74 SSR\\uC744 \\uB5A0\\uC62C\\uB9AC\\uB358 \\uCCAB \\uBC88\\uC9F8 \\uC774\\uC720\\uC600\\uB358 SEO\\uB3C4 Google \\uAC80\\uC0C9\\uC5D4\\uC9C4\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 SPA\\uB97C \\uC54C\\uC544\\uC11C \\uB85C\\uB4DC\\uD574\\uC11C \\uC815\\uBCF4\\uB4E4\\uC744 \\uAC00\\uC838\\uAC08 \\uC218 \\uC788\\uACE0 \\uAC80\\uC0C9\\uC5D4\\uC9C4\\uC5D0 \\uB178\\uCD9C\\uB420 \\uC218 \\uC788\\uB2E4\\uACE0 \\uD558\\uAE30\\uB3C4 \\uD558\\uACE0 \\uC2E4\\uC81C \\uC11C\\uBC84\\uB97C \\uB744\\uC6B0\\uB294 \\uAC83\\uBCF4\\uB2E4 SPA\\uB85C \\uAC1C\\uBC1C\\uD558\\uBA74 \\uC778\\uD504\\uB77C \\uC6B4\\uC601 \\uCF54\\uC2A4\\uD2B8 \\uB4F1 \\uB9CE\\uC740 \\uAC83\\uB4E4\\uC774 \\uC6D4\\uB4F1\\uD788 \\uC27D\\uACE0 \\uD3B8\\uB9AC\\uD558\\uAE30\\uB3C4 \\uD558\\uAE30 \\uB54C\\uBB38\\uC785\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uCD5C\\uADFC\\uC758 \\uD750\\uB984\\uC744 \\uBCF4\\uBA74 nextjs\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uD68C\\uC0AC\\uB4E4\\uB3C4 \\uB9CE\\uC544\\uC9C0\\uACE0 \",(0,e.jsx)(n.a,{href:\"https://remix.run/\",children:\"Remix\"}),\"\\uC640 \\uAC19\\uC740 SSR Framework\\uB3C4 \\uB098\\uC624\\uBA74\\uC11C \\uC778\\uAE30\\uB3C4 \\uB9CE\\uC774 \\uC5BB\\uACE0 \\uC788\\uB294 \\uAC83\\uC73C\\uB85C \\uBD10\\uC11C \\uC870\\uAE08\\uC740 \\uB354 \\uC774\\uCABD\\uC5D0 \\uAD00\\uC2EC\\uC744 \\uAC00\\uC838\\uC57C \\uD560 \\uAC83 \\uAC19\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC9C0\\uAE08 \\uAC1C\\uC778\\uC801\\uC73C\\uB85C \\uC0DD\\uAC01\\uD558\\uAE30\\uC5D0 nextjs\\uB098 remix\\uC640 \\uAC19\\uC740 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uC758 \\uC0AC\\uC6A9\\uC744 \\uACE0\\uB824\\uD574\\uC57C\\uD558\\uB294 \\uACBD\\uC6B0\\uB97C \\uC0DD\\uAC01\\uD574\\uBCF8\\uB2E4\\uBA74 \\uB2E4\\uC74C\\uC815\\uB3C4\\uAC00 \\uC788\\uC9C0 \\uC54A\\uC744\\uAE4C \\uC0DD\\uAC01\\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"\\uBE44\\uB85D \\uAC80\\uC0C9\\uC5D4\\uC9C4\\uB4E4\\uC774 \\uC54C\\uC544\\uC11C SPA\\uB3C4 \\uC54C\\uC544\\uC11C \\uCCB4\\uD06C\\uD55C\\uB2E4\\uACE0 \\uD558\\uC9C0\\uB9CC, SEO\\uB97C \\uC870\\uAE08 \\uB354 \\uC798 \\uCC59\\uAE30\\uACE0 \\uC2F6\\uB2E4.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"\\uB354 \\uC88B\\uC740 \\uC720\\uC800 \\uACBD\\uD5D8\\uC744 \\uC8FC\\uACE0 \\uC2F6\\uB2E4. SPA\\uB098 SSR\\uC774 \\uC2E4\\uC81C\\uB85C \\uC720\\uC800\\uAC00 js\\uAE4C\\uC9C0 \\uB85C\\uB4DC\\uB418\\uB294 \\uC2DC\\uC810\\uC744 \\uC0DD\\uAC01\\uD55C\\uB2E4\\uBA74, \\uC18D\\uB3C4\\uAC00 \\uAC70\\uC758 \\uCC28\\uC774\\uAC00 \\uC5C6\\uB2E4\\uACE0 \\uC54C\\uB824\\uC838 \\uC788\\uC9C0\\uB9CC, FCP(First Content Paint)\\uB294 SSR\\uC774 \\uD6E8\\uC52C \\uBE60\\uB974\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uB354 \\uC88B\\uC740 \\uC720\\uC800 \\uACBD\\uD5D8\\uC744 \\uC904 \\uC218 \\uC788\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC544\\uBB34\\uB9AC \\uC870\\uAE08\\uC774\\uB77C\\uB3C4 \\uCD5C\\uB300\\uD55C \\uBE60\\uB974\\uAC8C \\uC720\\uC800\\uC5D0\\uAC8C \\uC6F9\\uC758 \\uCEE8\\uD150\\uCE20\\uB97C \\uBCF4\\uC5EC\\uC8FC\\uB294 \\uAC83\\uB9CC\\uC73C\\uB85C\\uB3C4 \\uB9AC\\uD150\\uC158\\uC5D0 \\uAF64 \\uB9CE\\uC740 \\uCC28\\uC774\\uB97C \\uAC00\\uC838\\uC62C \\uC218 \\uC788\\uB2E4\\uB294 \\uC5F0\\uAD6C\\uACB0\\uACFC\\uB3C4 \\uC788\\uAE30\\uB3C4 \\uD558\\uB2C8\\uAE4C\\uC694.\"})})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uADF8\\uB9AC\\uACE0 SPA\\uAC00 SSR\\uBCF4\\uB2E4 \\uD3B8\\uB9AC\\uD588\\uB358 \\uC778\\uD504\\uB77C \\uC6B4\\uC601 \\uCF54\\uC2A4\\uD2B8 \\uB4F1\\uB3C4 Vercel\\uC774\\uB098 Netlify\\uB098 \\uB2E4\\uB978 Provider\\uB4E4\\uC744 \\uD1B5\\uD574\\uC11C \\uAE30\\uC220\\uB4E4\\uC774 \\uBC1C\\uC804\\uD558\\uBA74\\uC11C \\uD6E8\\uC52C \\uB35C \\uC2E0\\uACBD\\uC4F0\\uACE0 \\uC11C\\uBC84\\uB97C \\uB744\\uC6B8 \\uC218 \\uC788\\uACE0 \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uAC8C \\uB418\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC608\\uC804\\uBCF4\\uB2E4\\uB294 \\uC6B4\\uC601 \\uCF54\\uC2A4\\uD2B8\\uC5D0 \\uB300\\uD55C \\uAC71\\uC815\\uC744 \\uC870\\uAE08\\uC740 \\uB35C \\uD574\\uB3C4 \\uB418\\uC9C0 \\uC54A\\uC744\\uAE4C\\uB77C\\uB294 \\uC0DD\\uAC01\\uB3C4 \\uB4ED\\uB2C8\\uB2E4. \\uB610\\uD55C \\uC694\\uC998 \\uAC00\\uB054 \\uBCF4\\uC774\\uB294 BFF(\",(0,e.jsx)(n.a,{href:\"https://docs.microsoft.com/ko-kr/azure/architecture/patterns/backends-for-frontends\",children:\"Backend For Frontend\"}),\")\\uC640 \\uAC19\\uC740 \\uAC1C\\uB150\\uC744 \\uC801\\uC6A9\\uD574\\uBCF4\\uB294 \\uAC83\\uB3C4 \\uD574\\uBCF4\\uACE0 \\uC2F6\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC774 \\uB9CE\\uC774 \\uB4DC\\uB124\\uC694.\"]}),(0,e.jsxs)(n.h2,{id:\"nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uCC98\\uC74C\\uC5D0 nextjs\\uB85C SSR React\\uC571\\uC744 \\uAD6C\\uD604 \\uD574\\uC57C\\uD558\\uB294 \\uC0C1\\uD669\\uC5D0\\uC11C \\uC11C\\uBE44\\uC2A4\\uB97C \\uC5B4\\uB5BB\\uAC8C \\uC6B4\\uC601\\uD560 \\uAC83\\uC778\\uC9C0\\uC5D0 \\uB300\\uD55C \\uB300\\uC548\\uC73C\\uB85C \\uBA87 \\uAC00\\uC9C0\\uB97C \\uB17C\\uC758\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uBB3C\\uB860 \\uAC00\\uC7A5 \\uC27D\\uAC8C nextjs \\uC571\\uC744 \\uB744\\uC6B0\\uB294 \\uBC29\\uBC95\\uC73C\\uB85C vercel\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC9C0\\uB9CC, \",(0,e.jsx)(n.code,{children:\"\\uD68C\\uC0AC \\uB0B4\\uBD80\\uC758 \\uBCF4\\uC548\\uC815\\uCC45\\uC73C\\uB85C \\uC778\\uD574\\uC11C \\uBB34\\uC870\\uAC74 aws \\uC548\\uC5D0\\uC11C\\uB9CC \\uAD6C\\uC131\\uC744 \\uD574\\uC57C\\uB9CC \\uD588\\uC2B5\\uB2C8\\uB2E4. \\uC544\\uB798\\uC5D0 \\uC801\\uC740 \\uBC29\\uBC95 \\uC774\\uC678\\uC5D0\\uB3C4 \\uB2E4\\uB978 \\uBC29\\uBC95\\uB4E4\\uC774 \\uC788\\uACA0\\uC9C0\\uB9CC \\uC81C\\uAC00 \\uC544\\uB294 \\uD55C\\uB3C4 \\uC548\\uC5D0\\uC11C\\uB294 \\uACB0\\uAD6D \\uB9C8\\uC9C0\\uB9C9 \\uC120\\uD0DD\\uC0AC\\uD56D\\uC740 \\uC544\\uB798 \\uB450 \\uAC00\\uC9C0\"}),\"\\uC600\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/serverless-nextjs/serverless-next.js\",children:\"serverless framework\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"cloudfront\"}),(0,e.jsx)(n.li,{children:\"lambda@edge\"})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/ecs/\",children:\"ECS(Elastic Container Service)\"}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:\"fargate\"})})]})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uC6B0\\uC120 \\uC11C\\uBE44\\uC2A4\\uB97C \\uB744\\uC6B8 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC740 \\uB9CE\\uC9C0\\uB9CC \\uADF8 \\uC911\\uC5D0\\uC11C\\uB3C4 \",(0,e.jsx)(n.code,{children:\"\\uC548\\uC815\\uC801\\uC778 \\uC11C\\uBE44\\uC2A4 \\uC6B4\\uC601\\uC744 \\uC704\\uD574\\uC11C \\uB9CE\\uC740 \\uD2B8\\uB798\\uD53D\\uC774 \\uBAB0\\uB824\\uB3C4 \\uC218\\uC6D4\\uD558\\uAC8C \\uC2A4\\uCF00\\uC77C\\uB9C1\\uD560 \\uC218 \\uC788\\uB294 \\uAD6C\\uC131\\uC774 \\uAC00\\uC7A5 \\uC911\\uC694\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C aws\\uC548\\uC5D0\\uC11C \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC740 \\uC704\\uC758 \\uB450 \\uAC00\\uC9C0 \\uBC29\\uBC95\\uC744 \\uC0DD\\uAC01\"}),\"\\uD588\\uACE0, \\uADF8 \\uC911\\uC5D0\\uC11C\\uB294 \\uC800\\uD76C\\uB294 \\uB450 \\uBC88\\uC9F8\\uC778 \",(0,e.jsx)(n.code,{children:\"ECS\\uB97C \\uC120\\uD0DD\"}),\"\\uD588\\uC2B5\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uC0AC\\uC2E4 \\uB458 \\uC911\\uC5D0 \\uC5B4\\uB5A4 \\uAC83\\uC774 \\uB354 \\uC6B0\\uC6D4\\uD55C\\uAC00\\uC5D0 \\uB300\\uD55C \\uC5C6\\uACA0\\uC9C0\\uB9CC, \\uC6B0\\uC120 \\uD68C\\uC0AC \\uB0B4\\uBD80\\uC5D0\\uC11C \\uC11C\\uBC84\\uB97C \\uB744\\uC6B8 \\uB54C \\uBCF4\\uD1B5 \\uB450 \\uBC88\\uC9F8 \\uBC29\\uC2DD\\uC778 ECS\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uACBD\\uC6B0\\uAC00 \\uB9CE\\uC558\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB7EC\\uBBC0\\uB85C \\uC81C\\uAC00 \\uC9C1\\uC811 \\uAD6C\\uC131\\uD558\\uBA74\\uC11C \\uC5EC\\uCB64\\uBCFC \\uC218 \\uC788\\uB294 \\uBD84\\uB4E4\\uC774 \\uC788\\uC5C8\\uB2E4\\uB294 \\uC0AC\\uC2E4\\uACFC \",(0,e.jsx)(n.code,{children:\"serverless framework\\uB294 \\uAC1C\\uC778\\uC801\\uC73C\\uB85C \\uD574\\uBCF8 \\uACBD\\uD5D8\\uC774 \\uC788\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uB2E4\\uB978 \\uC0C8\\uB85C\\uC6B4 \\uCC4C\\uB9B0\\uC9C0\\uB97C \\uD574\\uBCF4\\uACE0 \\uC2F6\\uB2E4\\uB294 \\uC695\\uAD6C\"}),\"\\uB3C4 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\xA0\\uBCC4\\uAC70 \\uC5C6\\uC9C0\\uB9CC, \\uC704\\uC640 \\uAC19\\uC740 \\uC774\\uC720 \\uB54C\\uBB38\\uC5D0 ECS\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC11C\\uBC84\\uB97C \\uB744\\uC6B0\\uAE30\\uB85C \\uACB0\\uC815\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uAD6C\\uCCB4\\uC801\\uC73C\\uB85C \\uC5B4\\uB5A4 \\uC124\\uC815\\uB4E4\\uC744 AWS\\uC5D0\\uC11C \\uAD6C\\uC131\\uD574\\uC57C nextjs\\uB97C \\uC6B4\\uC601\\uD560 \\uC218 \\uC788\\uB294 \\uC778\\uD504\\uB77C\\uB97C \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB294 \\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C \\uD558\\uB098\\uC529 \\uC2E4\\uC81C\\uB85C \\uAD6C\\uC131\\uC744 \\uD588\\uB358 \\uC21C\\uC11C\\uB300\\uB85C \\uC124\\uBA85\\uC744 \\uC870\\uAE08 \\uB354 \\uC790\\uC138\\uD788 \\uD574\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uC2E4\\uC81C\\uB85C \\uC778\\uD504\\uB77C\\uB97C \\uAD6C\\uC131\\uD558\\uAE30 \\uC704\\uD574\\uC11C terraform\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C \\uAD6C\\uC131\\uD588\\uC5C8\\uC9C0\\uB9CC \\uC790\\uC138\\uD55C infra \\uCF54\\uB4DC\\uBCF4\\uB2E4\\uB294 \\uAC01\\uAC01\\uC758 \\uAD6C\\uC131\\uC694\\uC18C\\uAC00 \\uC5B4\\uB5A4 \\uC5ED\\uD560\\uC744 \\uD558\\uB294\\uC9C0\\uC5D0 \\uC9D1\\uC911\\uD574\\uC11C \\uC791\\uC131 \\uD574\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uC790\\uC138\\uD55C \\uC124\\uBA85\\uC744 \\uD558\\uAE30 \\uC804\\uC5D0 \\uACB0\\uAD6D \\uAD6C\\uC131\\uB41C \\uBAA8\\uC2B5\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4. \\uAC01 \\uC694\\uC18C\\uB4E4\\uC744 \\uC124\\uBA85\\uD558\\uACE0 \\uB098\\uC11C \\uC774 \\uADF8\\uB9BC\\uC744 \\uB2E4\\uC2DC \\uD55C \\uBC88 \\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"\\uC11C\\uBE44\\uC2A4 \\uAD6C\\uC131\\uB3C4\",src:\"https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png\"})}),(0,e.jsxs)(n.h3,{id:\"1-ecrelastic-container-registry-\\uAD6C\\uC131\\uD558\\uAE30\",children:[(0,e.jsx)(n.a,{href:\"#1-ecrelastic-container-registry-\\uAD6C\\uC131\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \",(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/ecr/\",children:\"ECR(Elastic Container Registry)\"}),\" \\uAD6C\\uC131\\uD558\\uAE30\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0ECS\\uB77C\\uB294 \\uC774\\uB984\\uC5D0\\uC11C\\uB3C4 \\uC54C \\uC218 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC \",(0,e.jsx)(n.code,{children:\"ECS\\uB294 Docker Container\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC11C\\uBC84\\uB97C \\uB744\\uC6B0\\uB294 \\uC11C\\uBE44\\uC2A4\\uC774\\uACE0 Docker Container\\uB97C \\uB744\\uC6B0\\uAE30 \\uC704\\uD574\\uC11C\\uB294 Docker Image\\uB97C build\\uD558\\uACE0 Docker Image\\uB97C Push\\uD558\\uACE0 \\uAD00\\uB9AC\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. Docker Image\\uB97C push\\uD558\\uACE0 \\uAD00\\uB9AC\\uD558\\uB294 \\uC11C\\uBE44\\uC2A4\\uAC00 \\uBC14\\uB85C ECR\"}),\"\\uC785\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"2-ecselastic-container-service\\uB85C-\\uC11C\\uBC84-\\uB744\\uC6B0\\uAE30\",children:[(0,e.jsx)(n.a,{href:\"#2-ecselastic-container-service\\uB85C-\\uC11C\\uBC84-\\uB744\\uC6B0\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \",(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/ecs/\",children:\"ECS(Elastic Container Service)\"}),\"\\uB85C \\uC11C\\uBC84 \\uB744\\uC6B0\\uAE30\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0ECR\\uC5D0 Docker Image\\uB97C \\uC62C\\uB824 \\uB450\\uC5C8\\uB2E4\\uBA74, \\uADF8 \\uC774\\uD6C4\\uC5D0 \\uC2E0\\uACBD \\uC368\\uC57C\\uD560 \\uBD80\\uBD84\\uC740 \\uBC14\\uB85C \",(0,e.jsx)(n.code,{children:\"ECS\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C ECR\\uC5D0 \\uC62C\\uB77C\\uC640\\uC788\\uB294 Docker Image\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uC11C\\uBC84\\uB97C \\uB744\\uC6B0\\uB294 \\uC77C\"}),\"\\uC785\\uB2C8\\uB2E4. ECS\\uAC00 \\uC11C\\uBC84\\uB97C \\uB744\\uC6B0\\uB294 \\uBC29\\uBC95\\uC73C\\uB85C\\uB294 \\uB450 \\uAC00\\uC9C0\\uAC00 \\uC788\\uB294\\uB370 \\uBC14\\uB85C \\uC704\\uC5D0\\uC11C\\uB3C4 \\uC5B8\\uAE09\\uD588\\uB358 \",(0,e.jsx)(n.strong,{children:\"Fargate\"}),\"\\uAC00 \\uC788\\uACE0 \\uC544\\uB2C8\\uBA74 \\uB9CE\\uC774\\uB4E4 \\uC54C\\uACE0 \\uACC4\\uC2E4 \",(0,e.jsx)(n.strong,{children:\"EC2\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uBC29\\uC2DD\\uC785\\uB2C8\\uB2E4. \\uC800\\uB294 \\uC2A4\\uCF00\\uC77C\\uB9C1\\uC774 \\uB354 \\uC218\\uC6D4\\uD55C Fargate\\uB97C \\uC774\\uC6A9\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"ECS\\uB97C \\uC774\\uD574\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uC791\\uC5C5 \\uC815\\uC758(Task Definition)\\uB77C\\uB294 \\uC6A9\\uC5B4\\uB97C \\uC774\\uD574\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. ECS\\uB294 \\uC11C\\uBC84\\uB97C \\uB744\\uC6B8 \\uB54C\\uC5D0 \\uD2B9\\uC815 \\uC791\\uC5C5\\uC744 \\uAE30\\uC900\\uC73C\\uB85C \\uD310\\uB2E8\\uD558\\uB294 \\uB370 \\uADF8\\uAC83\\uC774 \\uC791\\uC5C5 \\uC815\\uC758\\uB77C\\uACE0 \\uBD80\\uB985\\uB2C8\\uB2E4.\"}),\" \\uC791\\uC5C5 \\uC815\\uC758\\uC5D0\\uB294 \\uC11C\\uBE44\\uC2A4\\uB97C \\uB744\\uC6B8 \\uB54C\\uC5D0 \",(0,e.jsx)(n.code,{children:\"\\uC5B4\\uB5A4 Docker Image\\uB97C \\uC0AC\\uC6A9\\uD560\\uC9C0 \\uC11C\\uBC84\\uC758 \\uBB3C\\uB9AC\\uC801\\uC778 \\uC2A4\\uD399\\uB4E4\\uC744 \\uC5B4\\uB5BB\\uAC8C \\uD560\\uC9C0 \\uB4F1 \\uC11C\\uBE44\\uC2A4\\uB97C \\uB744\\uC6B0\\uAE30\\uC5D0 \\uD544\\uC694\\uD55C \\uBA54\\uD0C0 \\uC815\\uBCF4\\uB4E4\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\"}),\"\\uD558\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"3-albapplication-load-balancer\",children:[(0,e.jsx)(n.a,{href:\"#3-albapplication-load-balancer\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \",(0,e.jsx)(n.a,{href:\"https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/introduction.html\",children:\"ALB(application Load Balancer)\"})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"ALB\\uB294 ECS\\uAC00 \\uC5EC\\uB7EC\\uAC1C\\uC758 container service\\uB97C \\uB744\\uC6E0\\uC744 \\uB54C\\uC5D0 \\uC55E\\uB2E8\\uC5D0\\uC11C \\uC720\\uC800\\uC758 request\\uB97C \\uBC1B\\uC544\\uC11C request\\uB97C \\uBD84\\uBC30\\uD558\\uB294 \\uC5ED\\uD560\\uC744 \\uD569\\uB2C8\\uB2E4.\"}),\" ALB\\uB97C \\uC124\\uC815\\uD560 \\uB54C\\uC5D0 \\uC2E0\\uACBD\\uC368\\uC57C \\uD558\\uB294 \\uBA87 \\uAC00\\uC9C0 \\uAD6C\\uC131\\uC694\\uC18C\\uB4E4\\uC774 \\uC788\\uB294\\uB370 \\uAD00\\uB828\\uD574\\uC11C \\uAC04\\uB2E8\\uD788 \\uC801\\uC5B4\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \",(0,e.jsx)(n.code,{children:\"\\uC6B0\\uC120 VPC\\uC640 Subnets\\uC785\\uB2C8\\uB2E4. VPC(Virutal Private Cloud)\\uB77C\\uB294 \\uC774\\uB984\\uC5D0\\uC11C \\uC54C \\uC218 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC AWS \\uD558\\uB098\\uC758 \\uAE30\\uB2A5\\uC73C\\uB85C\\uC11C \\uC720\\uC800\\uC758 \\uC0AC\\uC124 \\uB124\\uD2B8\\uC6CC\\uD06C \\uD074\\uB77C\\uC6B0\\uB4DC\\uB77C\\uACE0 \\uC0DD\\uAC01\"}),\"\\uD558\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(n.code,{children:\"Subnets\\uC740 VPC\\uC758 IP \\uC8FC\\uC18C \\uBC94\\uC704\\uB4E4\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uAD6C\\uC131\\uC694\\uC18C\"}),\"\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"ALB\\uB098 ECS\\uB97C \\uC124\\uC815\\uD560 \\uB54C\\uC5D0 \\uC5B4\\uB5A4 VPC\\uC5D0 \\uADF8\\uB9AC\\uACE0 \\uC5B4\\uB5A4 Subnets\\uB4E4\\uC5D0 \\uC5F0\\uACB0\\uD574\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC9C0 \\uB4F1\\uC744 \\uC124\\uC815\"}),\"\\uC744 \\uD574\\uC8FC\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4. Subnets\\uC774 IP \\uC8FC\\uC18C \\uBC94\\uC704\\uB4E4\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uAD6C\\uC131\\uC694\\uC18C\\uB4E4\\uC774\\uB77C\\uACE0 \\uD588\\uB294\\uB370 IP \\uC8FC\\uC18C \\uBC94\\uC704\\uB294 \\uC5B4\\uB5BB\\uAC8C \\uD45C\\uD604\\uD560 \\uC218 \\uC788\\uC744\\uAE4C\\uC694? \\uBCF4\\uD1B5 \",(0,e.jsx)(n.code,{children:\"IP \\uC8FC\\uC18C \\uBC94\\uC704\\uB294 IP CIDR\\uB77C\\uB294 \\uC6A9\\uC5B4\\uB85C \\uC0AC\\uC6A9\\uB418\\uB294 \\uBC29\\uC2DD\\uC73C\\uB85C \\uD45C\\uD604\"}),\"\\uB429\\uB2C8\\uB2E4. \\uAD00\\uB828 \\uB0B4\\uC6A9\\uC744 \\uAC04\\uB2E8\\uD558\\uAC8C \\uC124\\uBA85\\uD574\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4. \\uC800\\uB3C4 \\uB124\\uD2B8\\uC6CC\\uD06C\\uC5D0 \\uB300\\uD55C \\uC9C0\\uC2DD\\uC774 \\uB9CE\\uC9C0 \\uC54A\\uC544 \\uB2E8\\uC5B4\\uC640 \\uAC19\\uC740 \\uAC83\\uB4E4\\uC774 \\uC815\\uD655\\uD558\\uC9C0 \\uC54A\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. 0.0.0.0/0, 0.0.0.0/16, 0.0.0.0/24, 0.0.0.0/32\\uC640 \\uAC19\\uC740 \\uD615\\uD0DC\\uB4E4\\uC744 \\uBCF4\\uC2E0 \\uC801\\uC774 \\uC788\\uC73C\\uC2E4\\uD150\\uB370, \\uAC01\\uAC01\\uC758 \\uC758\\uBBF8\\uB97C \\uAC04\\uB2E8\\uD788 \\uC124\\uBA85\\uD574\\uBCF4\\uBA74 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4. ip \\uD558\\uB098\\uC758 \\uC139\\uC158\\uB9C8\\uB2E4 \\uBAA8\\uB450 8bit\\uB85C \\uD45C\\uD604\\uB418\\uBA70, \\uC81C\\uC77C \\uB9C8\\uC9C0\\uB9C9 \\uC22B\\uC790\\uB294 8\\uC758 \\uBC30\\uC218\\uB85C \\uC55E\\uC5D0\\uC11C\\uBD80\\uD130 \\uBA87\\uCE78\\uAE4C\\uC9C0\\uAC00 HostId(\\uD53D\\uC2A4\\uB41C IP\\uB300\\uC5ED)\\uC778\\uC9C0\\uB97C \\uD45C\\uD604\\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"0.0.0.0/0: HostId\\uAC00 0\\uAC1C \\uC774\\uBBC0\\uB85C \\uBAA8\\uB4E0 IP\\uC5D0 \\uD574\\uB2F9 \\uD55C\\uB2E4\\uACE0 \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"172.0.0.0/8: NetId(\\uD560\\uB2F9 \\uAC00\\uB2A5\\uD55C IP\\uB300\\uC5ED)\\uAC00 172\\uAE4C\\uC9C0\\uC774\\uBA70 \\uB098\\uBA38\\uC9C0 \\uBD80\\uBD84\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 IP \\uB300\\uC5ED\\uC774 HostId\\uB77C\\uACE0 \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"172.55.0.0/16: NetId\\uAC00 127.55\\uAE4C\\uC9C0\\uC774\\uBA70 \\uB098\\uBA38\\uC9C0 \\uBD80\\uBD84\\uC774 HostId\\uB77C\\uACE0 \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"\\uC989, \\uB9C8\\uC9C0\\uB9C9 \\uC22B\\uC790\\uB294 8\\uC758 \\uBC30\\uC218\\uB85C 172.55.0.0/16\\uC774\\uB77C\\uACE0 \\uD45C\\uD604\\uD558\\uAC8C\\uB418\\uBA74, 172.55.x.x\\uC5D0 \\uD574\\uB2F9\\uB418\\uB294 \\uBAA8\\uB4E0 IP \\uB300\\uC5ED\\uC744 \\uD45C\\uD604\\uD558\\uACE0 \\uC788\\uB2E4\\uACE0 \\uC0DD\\uAC01\\uD558\\uBA74 \\uB429\\uB2C8\\uB2E4.\"})}),(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"\\uB450 \\uBC88\\uC9F8\\uB85C, \\uBCF4\\uC548\\uADF8\\uB8F9(securityGroup)\\uC785\\uB2C8\\uB2E4. \\uB2E8\\uC5B4\\uC5D0\\uC11C\\uB3C4 \\uC54C \\uC218 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC \\uC5B4\\uB5A4 \\uC18C\\uC2A4\\uC5D0\\uC11C \\uC11C\\uBC84\\uC5D0 \\uC811\\uADFC\\uD560 \\uC218 \\uC788\\uB294\\uC9C0(inbound rules) \\uADF8\\uB9AC\\uACE0 \\uC5B4\\uB5A4 \\uC18C\\uC2A4\\uB85C \\uC11C\\uBC84\\uC5D0\\uC11C \\uC694\\uCCAD\\uC744 \\uBCF4\\uB0BC \\uC218 \\uC788\\uB294\\uC9C0(outbound rules)\\uB4E4\\uC744 \\uC815\\uD558\\uB294 \\uBCF4\\uC548 \\uADDC\\uCE59\\uAC19\\uC740 \\uAC83\\uB4E4\\uC744 \\uC815\\uD558\\uB294 \\uAD6C\\uC131\\uC694\\uC18C\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uBA74 \\uB429\\uB2C8\\uB2E4.\"})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C, \\uD0C0\\uAC9F\\uADF8\\uB8F9\\uC785\\uB2C8\\uB2E4. \\uD0C0\\uAC9F\\uADF8\\uB8F9\\uC740 alb\\uC5D0 \\uB4E4\\uC5B4\\uC628 \\uC694\\uCCAD\\uB4E4\\uC744 \\uC5B4\\uB514\\uB85C \\uC804\\uB2EC\\uD560 \\uAC83\\uC778\\uC9C0\\uC5D0 \\uB300\\uD55C \\uC124\\uC815\\uC785\\uB2C8\\uB2E4.\"}),\" alb\\uB294 \\uC774\\uB984\\uC5D0\\uC11C\\uB3C4 \\uC54C \\uC218 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC load balencer \\uC5ED\\uD560\\uC744 \\uD558\\uB294 \\uAC83\\uC774\\uACE0, \\uD0C0\\uAC9F\\uADF8\\uB8F9\\uC73C\\uB85C \\uBB36\\uC5EC\\uC788\\uB294 \\uC11C\\uBC84\\uB4E4\\uC5D0\\uAC8C \\uC801\\uC808\\uD558\\uAC8C request\\uB4E4\\uC744 \\uBD84\\uBC30\\uD558\\uB294 \\uC5ED\\uD560\\uC744 \\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"4-cloudfrontcdn\",children:[(0,e.jsx)(n.a,{href:\"#4-cloudfrontcdn\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. \",(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/cloudfront/\",children:\"CloudFront(CDN)\"})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \",(0,e.jsx)(n.code,{children:\"\\uC720\\uC800\\uC758 \\uC694\\uCCAD\\uC744 \\uBC14\\uB85C alb\\uB85C \\uC5F0\\uACB0\\uD560 \\uC218\\uB3C4 \\uC788\\uC9C0\\uB9CC, \\uCE90\\uC2F1\\uC744 \\uD65C\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C CloudFront\\uB97C \\uCD5C\\uC55E\\uB2E8\\uC5D0 \\uBC30\\uCE58\\uD588\\uC2B5\\uB2C8\\uB2E4.\"}),\" cloudfront\\uC5D0\\uB294 origin\\uC774\\uB77C\\uB294 \\uAC1C\\uB150\\uC774 \\uC788\\uC2B5\\uB2C8\\uB2E4. origin\\uC740 cloudfront\\uB97C \\uD1B5\\uD574\\uC11C \\uB4E4\\uC5B4\\uC624\\uB294 \\uC694\\uCCAD\\uC744 \\uC5B4\\uB514\\uB85C \\uBCF4\\uB0BC \\uAC83\\uC778\\uAC00\\uB77C\\uACE0 \\uC774\\uD574\\uD558\\uBA74 \\uB429\\uB2C8\\uB2E4. \\uC608\\uC804\\uC5D0 cloudFront\\uB97C \\uC0AC\\uC6A9\\uD588\\uC744 \\uB54C\\uC5D0\\uB294 s3 \\uBC84\\uD0B7\\uC744 origin\\uB9CC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294\\uC904 \\uC54C\\uC558\\uB294\\uB370 \\uC694\\uC998\\uC740 \\uB354 \\uBC1C\\uC804\\uB41C \\uAC83\\uC778\\uC9C0 cloudfront\\uC758 origin\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB294 \\uC885\\uB958\\uB4E4\\uC774 \\uB9CE\\uC544\\uC84C\\uC74C\\uC744 \\uBC30\\uC6E0\\uC2B5\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"cloudFront\\uC758 origin\\uC73C\\uB85C s3 bucket\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218\\uB3C4 \\uC788\\uACE0, alb\\uB3C4 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uACE0, \\uADF8\\uB0E5 \\uB2E8\\uC21C\\uD788 domain\\uC744 \\uC5F0\\uACB0\\uD560 \\uC218\\uB3C4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uBAA8\\uB4E0 request\\uB97C alb\\uB97C \\uD1B5\\uD574\\uC11C ecs\\uAE4C\\uC9C0 \\uB3C4\\uB2EC\\uD558\\uAC8C \\uD558\\uC9C0 \\uC54A\\uACE0, \",(0,e.jsx)(n.code,{children:\"\\uB2E8\\uAE30\\uAC04\\uC5D0 \\uBAB0\\uB9AC\\uB294 traffic\\uC744 \\uC798 \\uAD00\\uB9AC\\uD558\\uAE30 \\uC704\\uD574\\uC11C nextjs\\uC5D0\\uC11C cache-control\\uC744 \\uC124\\uC815\\uD558\\uAC8C \\uD558\\uACE0 cloudFront\\uB294 origin\\uC758 cache-control header\\uB97C \\uBCF4\\uACE0 cache \\uC815\\uCC45\"}),\"\\uC744 \\uACB0\\uC815\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0cloudFront \\uC124\\uC815\\uC744 \\uD558\\uBA74\\uC11C \\uD558\\uB098 \\uACAA\\uC5C8\\uB358 \\uC774\\uC288\\uAC00 \\uC788\\uC5C8\\uB294\\uB370, nextjs\\uC758 response\\uC5D0 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC544\\uBB34\\uB7F0 cache-control header\\uAC00 \\uC124\\uC815\\uC774 \\uC548\\uB41C \\uC0C1\\uD0DC\\uC600\\uB294\\uB370 \\uBC30\\uD3EC\\uB97C \\uD574\\uB3C4 \\uBC30\\uD3EC\\uB41C \\uC0C8\\uB85C\\uC6B4 \\uBC84\\uC804\\uC758 response\\uAC00 \\uC548\\uB0B4\\uB824\\uC628\\uB294 \\uBB38\\uC81C\\uAC00 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"cloudFront\\uC5D0\\uC11C origin\\uC758 header\\uB97C \\uAE30\\uC900\\uC73C\\uB85C cache\\uB97C \\uD558\\uB3C4\\uB85D \\uD574\\uB450\\uACE0 origin\\uC758 response\\uC5D0 \\uC544\\uBB34\\uB7F0 cache-control \\uB0B4\\uC6A9\\uC774 \\uC5C6\\uC73C\\uBA74 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uBB34\\uC81C\\uD55C \\uCE90\\uC2F1\\uC744 \\uC0AC\\uC6A9\\uD569\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB798\\uC11C \\uCE90\\uC2DC\\uB97C \\uC548\\uD558\\uACE0 \\uC2F6\\uC740 \\uC608\\uB97C \\uB4E4\\uC5B4 \",(0,e.jsx)(n.strong,{children:\"html \\uC694\\uCCAD\"}),\"\\uB4E4\\uC740 cache\\uB97C \\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D cache-control\\uC744 \",(0,e.jsx)(n.strong,{children:\"no-cache\"}),\"\\uB85C \\uC124\\uC815\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"5-route53-acmaws-certificate-manager\",children:[(0,e.jsx)(n.a,{href:\"#5-route53-acmaws-certificate-manager\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"5. \",(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/route53/\",children:\"Route53\"}),\", \",(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/ko/certificate-manager/\",children:\"ACM(AWS Certificate Manager)\"})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uB4DC\\uB514\\uC5B4 \\uB9C8\\uC9C0\\uB9C9\\uC785\\uB2C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uC720\\uC800\\uAC00 \\uC11C\\uBE44\\uC2A4\\uC5D0 \\uC811\\uADFC\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 domain\\uC774 \\uD544\\uC694\\uD558\\uACE0 \\uADF8 \\uB3C4\\uBA54\\uC778\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uC601\\uC5ED\\uC740 route53\\uC774\\uB77C\\uB294 \\uC11C\\uBE44\\uC2A4\\uC774\\uACE0, \\uADF8 \\uB3C4\\uBA54\\uC778\\uC5D0 https protocol\\uC744 \\uC9C0\\uC6D0\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 ACM\\uC5D0\\uC11C \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uBC1B\\uACE0 \\uC5F0\\uACB0\\uD574\\uC11C \\uC0AC\\uC6A9\"}),\"\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. \\uC704\\uC5D0\\uC11C\\uB3C4 \\uAD6C\\uC870\\uB3C4\\uB97C \\uBCF4\\uC558\\uC9C0\\uB9CC \\uC9C0\\uAE08\\uAE4C\\uC9C0\\uC758 \\uC124\\uBA85\\uC744 \\uC77D\\uC740 \\uD6C4\\uC5D0 \\uC544\\uB798 \\uADF8\\uB9BC\\uC744 \\uB2E4\\uC2DC \\uD55C\\uBC88 \\uBCF4\\uC558\\uC744 \\uB54C \\uC870\\uAE08 \\uB354 \\uC774\\uD574\\uAC00 \\uB418\\uB294 \\uAC83 \\uAC19\\uC740 \\uB290\\uB08C\\uC744 \\uB290\\uB07C\\uC2E4 \\uC218 \\uC788\\uC73C\\uBA74 \\uC88B\\uACA0\\uB124\\uC694.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"\\uC11C\\uBE44\\uC2A4 \\uAD6C\\uC131\\uB3C4\",src:\"https://user-images.githubusercontent.com/13966404/146634044-9ad7ea15-c093-4fdb-9cbb-fd6f165b914f.png\"})}),(0,e.jsxs)(n.p,{children:[\"\\xA0\",(0,e.jsx)(n.code,{children:\"\\uC704 \\uB0B4\\uC6A9\\uC740 aws\\uB97C \\uAE30\\uC900\\uC73C\\uB85C \\uC778\\uD504\\uB77C\\uB97C \\uAD6C\\uC131\\uD560 \\uB54C\\uC5D0 \\uB300\\uD55C \\uC124\\uBA85\\uC774\\uBA70, \\uB2E4\\uB978 provider\\uB97C \\uC774\\uC6A9\\uD560 \\uB54C\\uC5D0\\uB294 \\uB2E4\\uB978 \\uB2E8\\uC5B4\\uB4E4\\uC774 \\uC0AC\\uC6A9\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uB3C4 \\uBE44\\uC2B7\\uD55C \\uC5ED\\uD560\\uB4E4\\uC744 \\uD558\\uB294 \\uAD6C\\uC131\\uC694\\uC18C\\uB4E4\\uC740 \\uB2E4\\uB4E4 \\uC788\\uC744 \\uAC83\\uC774\\uACE0 \\uC5B4\\uB5A4 \\uC5ED\\uD560\\uC744 \\uD558\\uB294\\uC9C0\\uC5D0 \\uB300\\uD574\\uC11C\\uB9CC \\uAC04\\uB2E8\\uD788 \\uC775\\uD788\\uACE0, \\uB2E8\\uC5B4\\uB4E4\\uC5D0 \\uB300\\uD574\\uC11C \\uC870\\uAE08\\uC740 \\uC775\\uC219\\uD574\\uC9C8 \\uC218 \\uC788\\uB294 \\uAE30\\uD68C\\uC600\\uB2E4\\uBA74 \\uC88B\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC800\\uB3C4 \\uC0AC\\uC2E4 \\uB124\\uD2B8\\uC6CC\\uD06C, \\uC778\\uD504\\uB77C\\uC5D0 \\uB300\\uD55C \\uC9C0\\uC2DD\\uC774 \\uAC70\\uC758 \\uC5C6\\uC73C\\uBA70 \\uC774\\uBC88 \\uC791\\uC5C5\\uC744 \\uD558\\uBA74\\uC11C \\uB2E8\\uD3B8\\uC801\\uC73C\\uB85C \\uC775\\uD78C \\uB0B4\\uC6A9\\uB4E4\\uC744 \\uC801\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uD639\\uC2DC\\uB098 \\uBD80\\uC871\\uD55C \\uC124\\uBA85\\uC774\\uB098 \\uC798\\uBABB\\uB41C \\uC124\\uBA85\\uC774 \\uC788\\uB2E4\\uBA74 \\uC5B8\\uC81C\\uB4E0\\uC9C0 \\uD53C\\uB4DC\\uBC31 \\uBD80\\uD0C1\\uB4DC\\uB9BD\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h2,{id:\"nextjs-\\uC11C\\uBE44\\uC2A4-\\uBC30\\uD3EC\\uD558\\uAE30\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-\\uC11C\\uBE44\\uC2A4-\\uBC30\\uD3EC\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nextjs \\uC11C\\uBE44\\uC2A4 \\uBC30\\uD3EC\\uD558\\uAE30\"]}),(0,e.jsx)(n.p,{children:\"\\xA0 \\uC774\\uC81C \\uC11C\\uBE44\\uC2A4 \\uAD6C\\uC131\\uC744 \\uB2E4\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC6B0\\uB9AC\\uB294 \\uACC4\\uC18D \\uAC1C\\uBC1C\\uC744 \\uD560 \\uAC83\\uC774\\uACE0 \\uACC4\\uC18D \\uC11C\\uBE44\\uC2A4\\uB97C \\uBC30\\uD3EC\\uD558\\uACE0 \\uC0C8\\uB85C\\uC6B4 \\uAE30\\uB2A5\\uC744 \\uC720\\uC800\\uC5D0\\uAC8C \\uC804\\uB2EC\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4. \\uC6B0\\uB9AC\\uB294 \\uC704\\uC640 \\uAC19\\uC774 \\uAD6C\\uC131\\uD55C nextjs \\uC571\\uC744 \\uC5B4\\uB5BB\\uAC8C \\uBC30\\uD3EC\\uD560 \\uC218 \\uC788\\uC744\\uAE4C\\uC694? \\uC6B0\\uC120 ecs\\uB85C \\uBC30\\uD3EC\\uD55C nextjs\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uB450 \\uAC00\\uC9C0\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8 \\uD574\\uC57C \\uD569\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"ecr\\uC5D0 docker image\\uB97C \\uCD5C\\uC2E0\\uC73C\\uB85C \\uBC30\\uD3EC\\uD569\\uB2C8\\uB2E4.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"ecs\\uC5D0\\uC11C \\uC0C8\\uB85C\\uC6B4 docker image\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uC791\\uC5C5\\uC815\\uC758(task-definition)\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8\\uD569\\uB2C8\\uB2E4.\"})})]}),(0,e.jsxs)(n.p,{children:[\"\\xA0\\uC800\\uB294 \\uC704 \\uACFC\\uC815\\uC744 github action\\uC5D0 workflow\\uB97C \\uC791\\uC131\\uD558\\uC5EC \\uC790\\uB3D9\\uC73C\\uB85C \\uBC30\\uD3EC\\uB97C \\uC9C4\\uD589\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC6D0\\uB798 \\uBAA8\\uB4E0 infra\\uB97C terraform\\uC73C\\uB85C \\uC791\\uC131\\uD588\\uC5C8\\uB294\\uB370, terraform\\uC740 \\uB2E4\\uB978 repository\\uC5D0 \\uB530\\uB85C \\uBAA8\\uC544\\uB450\\uACE0 \\uC788\\uC5C8\\uACE0, \\uC791\\uC5C5\\uC815\\uC758\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 terraform\\uC744 \\uAC19\\uC740 repository\\uB85C \\uAC00\\uC838\\uC640\\uC57C\\uD560\\uAE4C \\uACE0\\uBBFC\\uD588\\uC5C8\\uB294\\uB370\\uC694. infra code\\uB97C \\uD574\\uB2F9 repository\\uB85C \\uAC00\\uC838\\uC624\\uC9C0\\uB294 \\uC54A\\uACE0 \",(0,e.jsx)(n.code,{children:\"ecs\\uC5D0 \\uC0C8\\uB85C\\uC6B4 \\uC791\\uC5C5\\uC815\\uC758\\uB97C \\uB9CC\\uB4DC\\uB294 \\uAC83\\uC744 aws cli\\uC758 aws ecs update-service\\uB97C \\uC774\\uC6A9\\uD574\\uC11C \\uBC30\\uD3EC\\uB97C \\uC9C4\\uD589\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]}),(0,e.jsxs)(n.h2,{id:\"nextjs-\\uC11C\\uBE44\\uC2A4-\\uBAA8\\uB2C8\\uD130\\uB9C1\\uD558\\uAE30\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-\\uC11C\\uBE44\\uC2A4-\\uBAA8\\uB2C8\\uD130\\uB9C1\\uD558\\uAE30\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nextjs \\uC11C\\uBE44\\uC2A4 \\uBAA8\\uB2C8\\uD130\\uB9C1\\uD558\\uAE30\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \\uC55E\\uC73C\\uB85C \\uC11C\\uBE44\\uC2A4\\uB97C \\uC2E4\\uC81C\\uB85C \\uC6B4\\uC601\\uD558\\uBA74\\uC11C \\uBAA8\\uB2C8\\uD130\\uB9C1\\uD558\\uACE0 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\\uC744 \\uD574\\uC57C\\uD560 \\uC77C\\uB4E4\\uC774 \\uB354 \\uB9CE\\uC774 \\uC0DD\\uAE38 \\uAC83 \\uAC19\\uC740\\uB370\\uC694. \\uC6B0\\uC120\\uC740 ecs\\uC5D0\\uC11C \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC81C\\uACF5\\uD574\\uC8FC\\uB294 \",(0,e.jsx)(n.code,{children:\"ecs \\uC11C\\uBE44\\uC2A4\\uC758 \\uCE21\\uC815\\uCE58\\uD0ED\\uC5D0\\uC11C \\uAE30\\uBCF8\\uC801\\uC778 CPU, Memory\\uAC12\\uB4E4\\uC744 \\uBAA8\\uB2C8\\uD130\\uB9C1\\uD569\\uB2C8\\uB2E4.\"}),\" \\uADF8\\uB9AC\\uACE0 \\uD2B9\\uBCC4\\uD788 \\uC11C\\uBC84\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"\\uC5B4\\uB5A4 \\uC5D0\\uB7EC\\uB4E4\\uC774 \\uBC1C\\uC0DD\\uD588\\uB294\\uC9C0 \\uB4F1\\uC744 \\uD655\\uC778\\uD558\\uAE30\\uC704\\uD574\\uC11C CloudWatch\\uB97C \\uC0DD\\uC131\\uD574\\uC11C ecs \\uC11C\\uBE44\\uC2A4\\uC758 \\uB85C\\uADF8\\uD0ED\\uC5D0\\uC11C \\uB85C\\uADF8\\uB4E4\\uC744 \\uD655\\uC778\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uC544\\uC9C1 production\\uC774 \\uBC30\\uD3EC\\uB418\\uC9C0 \\uC54A\\uC740 \\uC0C1\\uD0DC\\uB77C\\uC11C \\uC55E\\uC73C\\uB85C \\uC5B4\\uB5A4 \\uD234\\uB4E4\\uC774 \\uD544\\uC694\\uD560\\uC9C0\\uB294 \\uC870\\uAE08 \\uB354 \\uC2DC\\uAC04\\uC774 \\uC9C0\\uB098\\uC57C \\uAD6C\\uCCB4\\uC801\\uC73C\\uB85C \\uB354 \\uB9CE\\uC740 \\uACBD\\uD5D8\\uC774 \\uC0DD\\uAE30\\uACE0 \\uACF5\\uC720\\uD560 \\uC218 \\uC788\\uC744 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.h2,{id:\"nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98-\\uAD6C\\uC131-\\uC911-\\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-\\uC11C\\uBE44\\uC2A4-\\uC544\\uD0A4\\uD14D\\uCC98-\\uAD6C\\uC131-\\uC911-\\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nextjs \\uC11C\\uBE44\\uC2A4 \\uC544\\uD0A4\\uD14D\\uCC98 \\uAD6C\\uC131 \\uC911 \\uD2B8\\uB7EC\\uBE14\\uC288\\uD305\"]}),(0,e.jsxs)(n.h3,{id:\"\\uD68C\\uC0AC-\\uB0B4\\uBD80\\uC758-\\uB124\\uD2B8\\uC6CC\\uD06C\\uC5D0-\\uB300\\uD55C-\\uC774\\uD574\",children:[(0,e.jsx)(n.a,{href:\"#\\uD68C\\uC0AC-\\uB0B4\\uBD80\\uC758-\\uB124\\uD2B8\\uC6CC\\uD06C\\uC5D0-\\uB300\\uD55C-\\uC774\\uD574\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD68C\\uC0AC \\uB0B4\\uBD80\\uC758 \\uB124\\uD2B8\\uC6CC\\uD06C\\uC5D0 \\uB300\\uD55C \\uC774\\uD574\"]}),(0,e.jsx)(n.p,{children:\"\\xA0\\uD68C\\uC0AC \\uB0B4\\uBD80\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 aws \\uACC4\\uC815\\uC774 \\uD558\\uB098\\uAC00 \\uC544\\uB2C8\\uB77C \\uC5EC\\uB7EC\\uAC1C\\uC600\\uACE0 \\uC11C\\uB85C \\uC5F0\\uAD00\\uC131\\uC744 \\uAC00\\uC9C0\\uACE0 \\uC788\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC774 \\uC774\\uC57C\\uAE30\\uB97C \\uC774 \\uAE00\\uC5D0 \\uC790\\uC138\\uD788 \\uC4F8 \\uC21C \\uC5C6\\uC9C0\\uB9CC, \\uAD00\\uB828\\uB41C \\uB0B4\\uC6A9\\uC744 \\uD30C\\uC545\\uD558\\uB290\\uB77C \\uC5EC\\uAE30\\uC800\\uAE30 \\uC5EC\\uCB64\\uBCF4\\uACE0 \\uB124\\uD2B8\\uC6CC\\uD06C\\uB098 \\uBCF4\\uC548\\uB9DD\\uC5D0 \\uB300\\uD55C \\uC774\\uD574\\uAC00 \\uC870\\uAE08 \\uB354 \\uD544\\uC694\\uD588\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.h3,{id:\"cloudfront-origin-behavior\\uC5D0-\\uB300\\uD55C-\\uC774\\uD574\",children:[(0,e.jsx)(n.a,{href:\"#cloudfront-origin-behavior\\uC5D0-\\uB300\\uD55C-\\uC774\\uD574\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"cloudfront origin, behavior\\uC5D0 \\uB300\\uD55C \\uC774\\uD574\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 cloudfront\\uB97C \\uC0DD\\uC131\\uD574\\uC11C \\uC0AC\\uC6A9\\uD558\\uBA74 \\uAC00\\uC7A5 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC775\\uD600\\uC57C\\uD558\\uB294 \\uBD80\\uBD84\\uC774 origin\\uACFC behavior\\uC5D0 \\uB300\\uD55C \\uC774\\uD574\\uC785\\uB2C8\\uB2E4. \\uC6B0\\uC120 \",(0,e.jsx)(n.code,{children:\"origin\\uC740 content\\uC758 \\uC6D0\\uCC9C\"}),\"\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(n.code,{children:\"behavior\\uB294 origin\\uC5D0 \\uB300\\uD55C \\uD1B5\\uC2E0\\uC744 \\uD560 \\uB54C\\uC5D0 \\uC5B4\\uB5A4 \\uADDC\\uCE59\\uC744 \\uAC00\\uC9C0\\uACE0 \\uD1B5\\uC2E0\\uD560 \\uC9C0\\uC5D0 \\uB300\\uD55C \\uC124\\uC815\"}),\"\\uB4E4\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \",(0,e.jsx)(n.code,{children:\"\\uC608\\uB97C \\uB4E4\\uC5B4 origin\\uC740 \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C s3 bucket\"}),\"\\uC774 \\uB420 \\uC218 \\uC788\\uACE0, \",(0,e.jsx)(n.code,{children:\"behavior\\uB294 \\uC5B4\\uB5A4 path\\uC5D0 \\uC774 \\uC124\\uC815\\uC744 \\uC801\\uC6A9\\uD560 \\uAC83\\uC778\\uC9C0 \\uCE90\\uC2DC\\uB294 \\uC5B4\\uB5A4 \\uAC12\\uC744 \\uAE30\\uC900\\uC73C\\uB85C \\uD560\\uC9C0 \\uD639\\uC740 http \\uC694\\uCCAD\\uC774 \\uC624\\uBA74 https\\uB85C redirect\\uD55C\\uB2E4\\uC640 \\uAC19\\uC740 \\uC124\\uC815\\uB4E4\\uC744 \\uCD94\\uAC00\"}),\"\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\xA0 \\uC2E4\\uC81C\\uB85C cloudFront\\uB97C \\uAD6C\\uC131\\uD558\\uBA74\\uC11C \\uACAA\\uC5C8\\uB358 \\uD2B8\\uB7EC\\uBE14 \\uC288\\uD305\\uC5D0 \\uB300\\uD574\\uC11C \\uAC04\\uB7B5\\uD788 \\uACF5\\uC720\\uD558\\uC790\\uBA74,\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"cloudFront\\uC5D0\\uC11C \\uCE90\\uC2DC\\uD0A4\\uB97C origin\\uC758 header\\uB97C \\uBC14\\uB77C\\uBCF4\\uAC8C \\uB9CC\\uB4E4\\uACE0 origin\\uC758 header\\uC5D0 cache \\uAD00\\uB828 header\\uAC00 \\uC5C6\\uB2E4\\uBA74 \\uBB34\\uD55C \\uCE90\\uC2DC\\uAC00 \\uAE30\\uBCF8 \\uB3D9\\uC791\"}),\"\\uC785\\uB2C8\\uB2E4. origin\\uC5D0\\uC11C cache hader\\uB97C \\uCD94\\uAC00\\uD558\\uC9C0 \\uC54A\\uACE0 \\uC791\\uC5C5\\uD558\\uB2E4\\uAC00 \\uBC30\\uD3EC\\uD558\\uB2C8\\uAE4C \\uC0C8\\uB86D\\uAC8C \\uBC30\\uD3EC\\uB41C \\uC571\\uC774 \\uC11C\\uBE59\\uC774 \\uC548\\uB418\\uAE38\\uB798 \\uC0B4\\uD3B4\\uBCF4\\uB2C8 \\uC704\\uC640 \\uAC19\\uC740 \\uBB38\\uC81C\\uB97C \\uACAA\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"cloudFront\\uC758 origin\\uC73C\\uB85C \\uD2B9\\uC815 domain\\uC73C\\uB85C \\uC124\\uC815\\uD588\\uB294\\uB370 cloudFront\\uAC00 \\uD574\\uB2F9 origin\\uC5D0 \\uC811\\uADFC\\uD574\\uC11C \\uBC14\\uB85C response\\uB97C \\uC8FC\\uB294\\uAC8C \\uC544\\uB2C8\\uB77C \\uC544\\uC608 301 \\uC0C1\\uD0DC \\uCF54\\uB4DC\\uB97C \\uC8FC\\uBA74\\uC11C \\uADF8 url\\uB85C redirect\\uD558\\uB294 \\uBB38\\uC81C\"}),\"\\uB97C \\uACAA\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uC774\\uB294 \",(0,e.jsx)(n.code,{children:\"origin\\uC5D0\\uC11C\\uB294 http\\uB9CC \\uBC1B\\uC744 \\uC218 \\uC788\\uB3C4\\uB85D \\uD574\\uB450\\uC5C8\\uB294\\uB370, behavior\\uC5D0\\uC11C \\uBB34\\uC870\\uAC74 http to https redirect\\uC744 \\uCD94\\uAC00\\uD588\\uC5C8\\uB294\\uB370 \\uB450\\uAC1C\\uC758 \\uC124\\uC815\\uC774 \\uCDA9\\uB3CC\\uD558\\uBA74\\uC11C \\uBC1C\\uC0DD\\uD55C \\uBB38\\uC81C\"}),\"\\uC600\\uC2B5\\uB2C8\\uB2E4. \\uC704 \\uB450\\uAC1C\\uC758 \\uC124\\uC815\\uC5D0 \\uB300\\uD55C \\uC5ED\\uD560\\uC5D0 \\uB300\\uD574\\uC11C \\uC801\\uC808\\uD788 \\uC774\\uD574\\uD558\\uACE0 \\uC788\\uB2E4\\uBA74 \\uC800\\uC640 \\uAC19\\uC740 \\uC2E4\\uC218\\uB97C \\uC5EC\\uB7EC\\uBD84\\uC740 \\uC548\\uD558\\uC2E4 \\uC218 \\uC788\\uC744 \\uAC83\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.li,{children:[\"\\uC81C\\uAC00 \\uAD6C\\uC131\\uD558\\uB294 nextjs \\uC11C\\uBE44\\uC2A4\\uB294 next/image\\uC640 \\uAC19\\uC740 next\\uAC00 \\uC81C\\uACF5\\uD574\\uC8FC\\uB294 image \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC774\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 querystring\\uC5D0 \\uB300\\uD55C \\uC811\\uADFC\\uC774 \\uD544\\uC694\\uD588\\uACE0, \\uC778\\uC99D\\uC744 \\uC704\\uD574\\uC11C cookie\\uC5D0 \\uB300\\uD55C \\uC811\\uADFC\\uC774 \\uD544\\uC694\\uD588\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB7F0\\uB370 \",(0,e.jsx)(n.code,{children:\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C cloudFront\\uB294 path\\uB97C \\uAE30\\uC900\\uC73C\\uB85C\\uB9CC \\uC791\\uB3D9\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, origin\\uC5D0\\uC11C query\\uB098 cookie\\uAC00 \\uD544\\uC694\\uD558\\uB2E4\\uBA74 query, cookie\\uB4F1\\uB3C4 \\uBAA8\\uB450 \\uB118\\uACA8 \\uC8FC\\uC5B4\\uC57C \\uD55C\\uB2E4\\uB294 \\uC124\\uC815\\uC744 behavior\\uC5D0 \\uC124\\uC815\"}),\"\\uD574\\uC8FC\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.li,{children:[\"cloudFront\\uC744 \\uD1B5\\uD574\\uC11C \\uB4E4\\uC5B4\\uC624\\uB294 \\uC694\\uCCAD\\uB9CC\\uC744 \\uBCF4\\uC548\\uC801\\uC73C\\uB85C \\uD5C8\\uC6A9\\uD558\\uACE0 \\uC2F6\\uB2E4\\uBA74, \",(0,e.jsx)(n.a,{href:\"https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/LocationsOfEdgeServers.html\",children:\"cloudfront ip ranges\"}),\"\\uC5D0\\uC11C \\uC2E4\\uC81C\\uB85C cloudFront\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 ip \\uB300\\uC5ED\\uB4E4\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]})]}),(0,e.jsxs)(n.h2,{id:\"\\uB9C8\\uBB34\\uB9AC\",children:[(0,e.jsx)(n.a,{href:\"#\\uB9C8\\uBB34\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB9C8\\uBB34\\uB9AC\"]}),(0,e.jsxs)(n.p,{children:[\"\\xA0 \\uC801\\uB2E4\\uBCF4\\uB2C8, \",(0,e.jsx)(n.code,{children:\"\\uAD49\\uC7A5\\uD788 \\uAE00\\uC774 \\uAE38\\uC5B4\\uC9C0\\uACE0 \\uC2A4\\uC2A4\\uB85C\\uAC00 \\uC774\\uD574\\uD558\\uACE0 \\uC788\\uB294 \\uAC1C\\uB150\\uB4E4\\uC774 \\uAD49\\uC7A5\\uD788 \\uB2E8\\uD3B8\\uC801\\uC774\\uACE0 \\uAE4A\\uC9C0 \\uBABB\\uD558\\uB2E4\\uB294 \\uC0AC\\uC2E4\\uAE4C\\uC9C0 \\uAE68\\uB2EB\\uAC8C \\uB418\\uC5C8\\uB294\\uB370\\uC694. \\uC9C0\\uAE08 \\uC81C\\uAC00 \\uC774\\uD574\\uD558\\uB294 \\uC218\\uC900\\uB4E4\\uC774 \\uAC78\\uC74C\\uB9C8\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uACE0 \\uC55E\\uC73C\\uB85C \\uB354 \\uC5F4\\uC2EC\\uD788 \\uBC30\\uC6B0\\uACE0 \\uC2F6\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC774 \\uB4E4\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uD2B9\\uBCC4\\uD55C \\uB0B4\\uC6A9\\uC740 \\uC5C6\\uC9C0\\uB9CC \\uC800\\uC640 \\uAC19\\uC774 nextjs\\uB97C ecs\\uB85C \\uAD6C\\uC131\\uD558\\uACE0 \\uC2F6\\uC740\\uB370 \\uC5B4\\uB5BB\\uAC8C \\uC2DC\\uC791\\uD574\\uC57C\\uD560\\uC9C0 \\uBAA8\\uB974\\uB294 \\uB2E8\\uACC4\\uC5D0 \\uC788\\uC73C\\uC2E0 \\uB204\\uAD70\\uAC00\\uC5D0\\uAC8C \\uC870\\uAE08\\uC774\\uB77C\\uB3C4 \\uB3C4\\uC6C0\\uC774 \\uB418\\uB294 \\uAE00\\uC774\\uC5C8\\uC73C\\uBA74 \\uC88B\\uACA0\\uB2E4\\uACE0 \\uC0DD\\uAC01\"}),\"\\uD558\\uBA74\\uC11C \\uCCAB \\uBC88\\uC9F8 \\uAE00\\uC744 \\uB9C8\\uBB34\\uB9AC\\uD569\\uB2C8\\uB2E4.\"]})]})}}var j=E;return b;})();\n;return Component;"},"_id":"blog/nextjs-develop-and-operation-1.mdx","_raw":{"sourceFilePath":"blog/nextjs-develop-and-operation-1.mdx","sourceFileName":"nextjs-develop-and-operation-1.mdx","sourceFileDir":"blog","contentType":"mdx","flattenedPath":"blog/nextjs-develop-and-operation-1"},"type":"Blog","readingTime":{"text":"11 min read","minutes":10.16,"time":609600,"words":2032},"slug":"nextjs-develop-and-operation-1","toc":[{"value":"Part 1 - nextjs 서비스 아키텍처","url":"#part-1---nextjs-서비스-아키텍처","depth":1},{"value":"목차","url":"#목차","depth":2},{"value":"nextjs는 무엇에 쓰는 물건인가?","url":"#nextjs는-무엇에-쓰는-물건인가","depth":2},{"value":"nextjs 서비스 아키텍처","url":"#nextjs-서비스-아키텍처","depth":2},{"value":"1. ECR(Elastic Container Registry) 구성하기","url":"#1-ecrelastic-container-registry-구성하기","depth":3},{"value":"2. ECS(Elastic Container Service)로 서버 띄우기","url":"#2-ecselastic-container-service로-서버-띄우기","depth":3},{"value":"3. ALB(application Load Balancer)","url":"#3-albapplication-load-balancer","depth":3},{"value":"4. CloudFront(CDN)","url":"#4-cloudfrontcdn","depth":3},{"value":"5. Route53, ACM(AWS Certificate Manager)","url":"#5-route53-acmaws-certificate-manager","depth":3},{"value":"nextjs 서비스 배포하기","url":"#nextjs-서비스-배포하기","depth":2},{"value":"nextjs 서비스 모니터링하기","url":"#nextjs-서비스-모니터링하기","depth":2},{"value":"nextjs 서비스 아키텍처 구성 중 트러블슈팅","url":"#nextjs-서비스-아키텍처-구성-중-트러블슈팅","depth":2},{"value":"회사 내부의 네트워크에 대한 이해","url":"#회사-내부의-네트워크에-대한-이해","depth":3},{"value":"cloudfront origin, behavior에 대한 이해","url":"#cloudfront-origin-behavior에-대한-이해","depth":3},{"value":"마무리","url":"#마무리","depth":2}]},"authorDetails":[{}],"prev":{"title":"react v18, nextjs, react-query 엣지 케이스","date":"2021-12-11T00:00:00.000Z","tags":["react","react-query","suspense","nextjs"],"draft":false,"summary":"react 18과 react-query의 suspense mode를 nextjs환경에서 사용하면서 겪었던 엣지 케이스에 대해서 정리했습니다.","type":"Blog","readingTime":{"text":"2 min read","minutes":1.34,"time":80400,"words":268},"slug":"react-query-ssr","toc":[]},"next":{"title":"nextjs 서비스 개발부터 운영까지 (2) - nextjs 서비스 개발 경험 및 트러블슈팅","date":"2021-12-19T00:00:00.000Z","tags":["nextjs"],"draft":false,"summary":"nextjs로 지금 현재 커머스를 개발하고 있습니다. 그런데 어쩌다보니 많은 부분에 있어서 직접 셋업하는 과정에 참여했고, 그 과정에서 배웠던 내용들을 팀원들에게 공유하고자 다음 글을 기획했습니다.","type":"Blog","readingTime":{"text":"17 min read","minutes":16.995,"time":1019700,"words":3399},"slug":"nextjs-develop-and-operation-2","toc":[{"value":"목차","url":"#목차","depth":2},{"value":"nextjs 한걸음 더 나아가기","url":"#nextjs-한걸음-더-나아가기","depth":2},{"value":"SSG, SSR, SPA에 대해서 조금 더 이해해보기","url":"#ssg-ssr-spa에-대해서-조금-더-이해해보기","depth":3},{"value":"프로젝트의 구조를 어떻게 구성할 것인가","url":"#프로젝트의-구조를-어떻게-구성할-것인가","depth":3},{"value":"react@next, react-dom@next의 Suspense 이슈","url":"#reactnext-react-domnext의-suspense-이슈","depth":3},{"value":"react-query의 suspense 모드를 사용함으로써 useQuery가 서버에서도 실행이 된다.","url":"#react-query의-suspense-모드를-사용함으로써-usequery가-서버에서도-실행이-된다","depth":3},{"value":"Persistent Layout 구성하기","url":"#persistent-layout-구성하기","depth":3},{"value":".env, .env.local의 사용","url":"#env-envlocal의-사용","depth":3},{"value":"next/router를 사용하면서 주의해야할 것","url":"#nextrouter를-사용하면서-주의해야할-것","depth":3},{"value":"next/image를 사용하면서 주의해야할 것","url":"#nextimage를-사용하면서-주의해야할-것","depth":3},{"value":"next.config.js에서 headers 옵션 사용하기","url":"#nextconfigjs에서-headers-옵션-사용하기","depth":3},{"value":"next.config.js assetPrefix의 사용","url":"#nextconfigjs-assetprefix의-사용","depth":3},{"value":"인증을 어떻게 할 수 있을까","url":"#인증을-어떻게-할-수-있을까","depth":3},{"value":"nextjs와 같이 사용하고 있는 라이브러리들","url":"#nextjs와-같이-사용하고-있는-라이브러리들","depth":2},{"value":"react-query를 SSR에서 활용하기","url":"#react-query를-ssr에서-활용하기","depth":3},{"value":"openapi-typescript로 api의 type generation을 자동화하기","url":"#openapi-typescript로-api의-type-generation을-자동화하기","depth":3},{"value":"react-query, immer를 사용해서 optimistic update 구현하기","url":"#react-query-immer를-사용해서-optimistic-update-구현하기","depth":3},{"value":"react-virtuoso를 사용해서 빠른 무한스크롤링 리스트를 구현하기","url":"#react-virtuoso를-사용해서-빠른-무한스크롤링-리스트를-구현하기","depth":3},{"value":"useQuery의 refetchOnMount, refethcOnWindwoFocus 활용하기","url":"#usequery의-refetchonmount-refethconwindwofocus-활용하기","depth":3},{"value":"window.history가 있을 때에만 BackButton 노출하기","url":"#windowhistory가-있을-때에만-backbutton-노출하기","depth":3},{"value":"nextjs와 관련이 없을 수도 있는 트러블슈팅들","url":"#nextjs와-관련이-없을-수도-있는-트러블슈팅들","depth":2},{"value":"encodeURI, encodeURIComponent의 차이","url":"#encodeuri-encodeuricomponent의-차이","depth":3},{"value":"window.scroll smooth safari에서는 작동이 안된다","url":"#windowscroll-smooth-safari에서는-작동이-안된다","depth":3},{"value":"모바일 웹뷰에서 사용할 수 있는 유용한 패턴들","url":"#모바일-웹뷰에서-사용할-수-있는-유용한-패턴들","depth":3},{"value":"모바일 웹뷰에서 postMessage없이 postMessage하기","url":"#모바일-웹뷰에서-postmessage없이-postmessage하기","depth":3},{"value":"Horizontal 스크롤을 발생시키는 컴포넌트에서 디바이스의 크기에 따라서 완전히 보이는 컴포넌트와 걸치는 컴포넌트를 유지하기","url":"#horizontal-스크롤을-발생시키는-컴포넌트에서-디바이스의-크기에-따라서-완전히-보이는-컴포넌트와-걸치는-컴포넌트를-유지하기","depth":3},{"value":"마무리","url":"#마무리","depth":2}]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["nextjs-develop-and-operation-1"]},"buildId":"yX_VBXwzdEHJOTbuzva8b","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>